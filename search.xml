<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2011单词</title>
    <url>/2020/07/26/2012%E5%8D%95%E8%AF%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>……</p>
<a id="more"></a>

<h3 id="Text-1"><a href="#Text-1" class="headerlink" title="Text 1"></a>Text 1</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185647.png" alt></p>
<h3 id="Text-2"><a href="#Text-2" class="headerlink" title="Text 2"></a>Text 2</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185724.png" alt></p>
<h3 id="Text-3"><a href="#Text-3" class="headerlink" title="Text 3"></a>Text 3</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185754.png" alt>)<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185810.png" alt></p>
<h3 id="Text-4"><a href="#Text-4" class="headerlink" title="Text 4"></a>Text 4</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185836.png" alt></p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>2011单词</title>
    <url>/2020/07/25/2011%E5%8D%95%E8%AF%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>……</p>
<a id="more"></a>

<h3 id="Text-1"><a href="#Text-1" class="headerlink" title="Text 1"></a>Text 1</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185203.png" alt></p>
<h3 id="Text-2"><a href="#Text-2" class="headerlink" title="Text 2"></a>Text 2</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185241.png" alt></p>
<h3 id="Text-3"><a href="#Text-3" class="headerlink" title="Text 3"></a>Text 3</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185314.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185347.png" alt></p>
<h3 id="Text-4"><a href="#Text-4" class="headerlink" title="Text 4"></a>Text 4</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185420.png" alt>)<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200801185450.png" alt></p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构习题2.2.3</title>
    <url>/2020/07/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%A0%E9%A2%982.3.7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725202005.png" alt></p>
<p><strong>A.</strong> 对于A，在单链表和顺序表上实现的时间复杂度都为O(n)，但<strong>后者要移动很多元素</strong>，因此在单链表上实现效率更高。对于B和D，顺序表的效率更高。C无区别</p>
<hr>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725202259.png" alt></p>
<p><strong>C.</strong>先遍厉长度为m的单链表，找到该单链表的尾结点，然后将其next域指向另一个单链表的首结点，其时间复杂度为O(m)</p>
<hr>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725202640.png" alt></p>
<p><strong>B.</strong>注意不能进行折半查找，计算长度就需要O(n)，所以进行顺序查找，然后插入</p>
<hr>
<h3 id="综合应用"><a href="#综合应用" class="headerlink" title="综合应用"></a>综合应用</h3><ol>
<li><p>设计一个递归算法，删除不带头结点的单链表L中所有值为x的结点。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Del_X_3</span><span class="params">(Linklist &amp;L, ElemType x)</span></span>&#123;</span><br><span class="line">	LNode *p;			<span class="comment">//p指向待删除结点</span></span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span>)			<span class="comment">//递归出口</span></span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;data==x)&#123;</span><br><span class="line">        p=L;</span><br><span class="line">        L=L-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(p);</span><br><span class="line">        Del_X_3(L, x);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        Del_X_3(L-&gt;next, x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>在带头结点的单链表L中，删除所有值为x的结点，并释放其空间，假设值为x的结点不唯一，试编写算法以实现上述操作。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Del_X_1</span><span class="params">(Linklist &amp;L, ElemType x)</span></span>&#123;</span><br><span class="line">    LNode *p=L-&gt;next;</span><br><span class="line">    LNode *pre=L;</span><br><span class="line">    LNode *q;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)(</span><br><span class="line">		<span class="keyword">if</span>(p-&gt;data==x)&#123;</span><br><span class="line">            q=p;</span><br><span class="line">            p=p-&gt;next;</span><br><span class="line">            pre-&gt;next=p;</span><br><span class="line">            <span class="built_in">free</span>(q);</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            pre=p;</span><br><span class="line">			p=p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p>设L为带头结点的单链表，编写算法实现从尾到头反向输出每个结点的值。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">R_Print</span><span class="params">(Linklist L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(L-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">		R_Print(L-&gt;next)</span><br><span class="line">	&#125;</span><br><span class="line"> 	<span class="keyword">if</span>(L!=<span class="literal">NULL</span>)</span><br><span class="line">		<span class="built_in">print</span>(L-&gt;data);<span class="comment">//print为打印的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="4">
<li><p>试编写在带头结点的单链表L中删除一个最小值结点的高效算法(假设最小值结点是唯一的)。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Min</span><span class="params">(Linklist &amp;L)</span></span>&#123;</span><br><span class="line">	LNode *pre=L, *p=pre-&gt;next;<span class="comment">//p为工作指针，pre指向其前驱</span></span><br><span class="line">    LNode *minor=pre, minp=p;<span class="comment">//保存最小值结点及其前驱</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;data &lt; minp-&gt;data)&#123;</span><br><span class="line">            minp=p;</span><br><span class="line">            minpre=pre;</span><br><span class="line">        &#125;</span><br><span class="line">        pre=p;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">	minpre-&gt;next = minp-&gt;next;<span class="comment">//删除最小值结点</span></span><br><span class="line">    <span class="built_in">free</span>(minp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="5">
<li><p>试编写算法将带头结点的单链表就地逆置，所谓“就地”是指辅助空间复杂度为O(1)</p>
<p>解法一：将头结点摘下，然后从第一结点开始，依次插入到头结点的后面（头插法建立单链表），直到最后一个结点为止，这样就实现了链表的逆置</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">Linklist <span class="title">Reverse_1</span> <span class="params">(LinkList L)</span></span>&#123;</span><br><span class="line">	LNode *p, *r;</span><br><span class="line">    p=L-&gt;next;</span><br><span class="line">    L-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">while</span>(p！=NUll)&#123;</span><br><span class="line">        r=p-&gt;next;</span><br><span class="line">        p-&gt;next=L-&gt;next;</span><br><span class="line">        L-&gt;next=p;</span><br><span class="line">        p=r;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解法二：假设pre、p和r指向3个相邻的结点，如下图所示。假设经过若干操作后，<em>pre之前的结点的指针都已调整完毕，它们的next都指向其原前驱结点。现在令</em>p结点的next域指向<em>pre结点，注意到一旦调整指针的指向后，</em>p的后继结点的链就会断开，为此需要用r来指向原*p的后继结点。处理时需要注意两点：一是在处理第一个结点时，应将其next域置为NULL，而不是指向头结点（因为它将作为新表的尾结点）；二是在处理完最后一个结点后，需要将头结点的指针指向它。<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725213700.png" alt></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">Linklist <span class="title">Reverse_2</span><span class="params">(Linklist L)</span></span>&#123;</span><br><span class="line">	LNode*pre, *p=L-&gt;next, *r=p-&gt;next;</span><br><span class="line">    p-&gt;next=<span class="literal">NULL</span>;		<span class="comment">//处理第一个结点</span></span><br><span class="line">	<span class="keyword">while</span>(r！=<span class="literal">NULL</span>)&#123;		<span class="comment">//x为空，则说明p为最后一个结点</span></span><br><span class="line">        pre=p;			<span class="comment">//依次继续遍历</span></span><br><span class="line">        p=r;</span><br><span class="line">        r=r-&gt;next;</span><br><span class="line">        p-&gt;next=pre;	<span class="comment">//指针反转</span></span><br><span class="line">    &#125;</span><br><span class="line">	L-&gt;next=p;<span class="comment">//处理最后一个结点</span></span><br><span class="line">	<span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="6">
<li><p>有一个带头结点的单链表L，设计一个算法使其元素递增有序</p>
</li>
<li><p>设在一个带表头结点的单链表中所有元素结点的数据值无序，试编写一个函数，删除表中所有介于给定的两个值 (作为函数参数给出) 之间的元素的元素 (若存在) </p>
</li>
<li><p>给定两个单链表，编写算法找出两个链表的公共结点</p>
</li>
<li><p>给定一个带表头结点的单链表，设head为头指针，结点结构为 (data，next) ，data为整型元素，ηext为指针，试写出算法：按递增次序输出单链表中各结点的数据元素，并释放结点所占的存储空间 (要求：不允许使用数组作为辅助空间) 。</p>
</li>
<li><p>将一个带头结点的单链表A分解为两个带头结点的单链表A和B，使得A表中含有原表中序号为奇数的元素，而B表中含有原表中序号为偶数的元素，且保持其相对顺序不变。</p>
</li>
<li><p>设C={a1，b1，a2b2…，anbn}为线性表，采用带头结点的hc单链表存放，设计一个就地算法，将其拆分为两个线性表，使得A={a，a2…，an}，B={bn，…，b2b1}</p>
</li>
<li><p>在一个递增有序的线性表中，有数值相同的元素存在。若存储方式为单链表，设计算法去掉数值相同的元素，使表中不再有重复的元素，例如 (7，10，10，21，30，42，42，42，51，70) 将变为 (7，10，21，30，42，51，70) </p>
</li>
<li><p>假设有两个按元素值递増次序排列的线性表，均以单链表形式存储。请编写算法将这两个单链表归并为一个按元素值递减次序排列的单链表，并要求利用原来两个单链表的结点存放归并后的单链表。</p>
</li>
<li><p>设A和B是两个单链表 (带头结点) ，其中元素递增有序。设计一个算法从A和B中的公共元素产生单链表C，要求不破坏A、B的结点</p>
</li>
<li><p>已知两个链表A和B分别表示两个集合，其元素递增排列。编制函数，求A与B的交集，并存放于A链表中。</p>
</li>
<li><p>两个整数序列A=a1，a2，a3，…，am和B=b1，b2b，…，bn已经存入两个单链表中，设计个算法，判断序列B是否是序列A的连续子序列。</p>
</li>
<li><p>设计一个算法用于判断带头结点的循环双链表是否对称</p>
</li>
<li><p>有两个循环单链表，链表头指针分别为h1和h2，编写一个函数将链表h2链接到链表h1之后，要求链接后的链表仍保持循环链表形式。</p>
</li>
<li><p>设有一个带头结点的循环单链表，其结点值均为正整数。设计一个算法，反复找出单链表中结点值最小的结点并输出，然后将该结点从中删除，直到单链表空为止，再删除表</p>
</li>
<li><p>设头指针为L的带有表头结点的非循环双向链表，其每个结点中除有pred (前驱指针) 、data (数据) 和next (后继指针) 域外，还有一个访问频度域freq。在链表被启用前，其值均初始化为零。每当在链表中进行一次 Locate (L，x) 运算时令元素值为ⅹ的结点中freq域的值增1，并使此链表中结点保持按访问频度非增递减) 的顺序排列，同时最近访问的结点排在频度相同的结点前面，以便使频繁访问的结点总是靠近表头。试编写符合上述要求的 Locate (，x) 运算的算法，该运算为函数过程，返回找到结点的地址，类型为指针型。</p>
</li>
<li><p>【2009统考真题】已知一个带有表头结点的单链表，结点结构为</p>
<p>​                                                                        |    data  |   list   |</p>
<p>假设该链表只给出了头指针list。在不改变链表的前提下，请设计一个尽可能高效的算法，查找链表中倒数第k个位置上的结点 (k为正整数) 。若查找成功，算法输岀该结点的data域的值，并返回1；否则，只返回0。要求：</p>
<pre><code>1) 描述算法的基本设计思想
2) 描述算法的详细实现步骤。
3) 根据设计思想和实现步骤，采用程序设计语言描述算法, 关键之处请给出简要注释</code></pre></li>
<li><p>〖2012统考真题】假定采用带头结点的单链表保存单词，当两个单词有相同的后缀时，可共享相同的后缀存储空间，例如，”loading”和“being”的存储映像如下图所示<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725212018.png" alt>设Str1和str2分别指向两个单词所在单链表的头结点，链表结点结构为| data | next |请设计一个时间上尽可能高效的算法，找出由str1和str2所指向两个链表共同后缀的起始位置 (如图中字符所在结点的位置p) 。要求：<br>1) 给出算法的基本设计思想<br>2) 根据设计思想，采用C或C艹+或Java语言描述算法，关键之处给出注释。<br>3) 说明你所设计算法的时间复杂度</p>
</li>
<li><p>〖2015统考真题】用单链表保存m个整数，结点的结构为| data | link |，且 I data l≤n<br> (n为正整数) 现要求设计一个时间复杂度尽可能高效的算法，对于链表中data的绝对值相等的结点，仅保留笫一次出现的结点而删除其余绝对值相等的结点。例如，若给定的单链表head如下<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725212253.png" alt></p>
<p>则删除结点后的head为:</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200725212345.png" alt></p>
<p>要求:<br>1) 给出算法的基本设计思想<br>2) 使用C或C++语言，给出单链表结点的数据类型定义3) 根据设计思想，采用C或C艹语言描述算法，关键之处给出注释。<br>4) 说明你所设计算法的时间复杂度和空间复杂度</p>
</li>
<li><p>设计一个算法完成以下功能：判断一个链表是否有环，如果有，找出环的入口点并返回，否则返回NULL</p>
</li>
<li><p>〖2019统考真题】设线性表L= (a1, a2, a3, …，an-2，an-1，an) 采用带头结点的单链表保存，链表中的结点定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node</span>*<span class="title">next</span>;</span></span><br><span class="line">&#125;NODE;</span><br></pre></td></tr></table></figure>

<p>请设计一个空间复杂度为O (1) 且时间上尽可能高效的算法，重新排列L中的各结点，得到线性表</p>
<p>L’= (a1, an, a2, an-1，a3, an-2…) 。要求</p>
<ol>
<li>给出算法的基本设计思想</li>
<li>根据设计思想，采用C或C艹语言描述算法，关键之处给出注释。</li>
<li>说明你所设计的算法的时间复杂度 </li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2010单词</title>
    <url>/2020/07/24/2010%E5%8D%95%E8%AF%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>……</p>
<a id="more"></a>

<h3 id="Text-1"><a href="#Text-1" class="headerlink" title="Text 1"></a>Text 1</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724192929.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724192954.png" alt></p>
<h3 id="Text-2"><a href="#Text-2" class="headerlink" title="Text 2"></a>Text 2</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193049.png" alt></p>
<h3 id="Text-3"><a href="#Text-3" class="headerlink" title="Text 3"></a>Text 3</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193119.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193153.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193216.png" alt></p>
<h3 id="Text-4"><a href="#Text-4" class="headerlink" title="Text 4"></a>Text 4</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193257.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200724193320.png" alt></p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构习题2.2.3</title>
    <url>/2020/07/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%A0%E9%A2%982.2.3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="一、选择题"><a href="#一、选择题" class="headerlink" title="一、选择题"></a>一、选择题</h3><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721222859.png" alt></p>
<p><strong>A.</strong> 注意，存取方式是指读写方式。顺序表是一种支持随机存取的存储结构，根据起始地址加上元素的序号，可以很方便地访问任意一个元素，这就是随机存取的概念。</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721223159.png" alt></p>
<p><strong>B.</strong>  线性表元素的序号是从1开始，而在第n+1个位置插入相当于在表尾追加。</p>
<h3 id="二、综合应用题"><a href="#二、综合应用题" class="headerlink" title="二、综合应用题"></a>二、综合应用题</h3><ol>
<li>从顺序表中删除具有最小值的元素(假设唯一)并由函数返回被删元素的值。空出的位置由最后一个元素填补，若顺序表为空则显示出错信息并退出运行。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">deleteMinValue</span><span class="params">(SqList &amp;L, ElemType &amp;value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L.length==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    value = L.data[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> pos;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;L.length;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(value&gt;L.data[i])&#123;</span><br><span class="line">            value = L.data[i];</span><br><span class="line">            pos = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    L.data[pos] = L.data[L.length<span class="number">-1</span>];</span><br><span class="line">    L.length--;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>设计一个高效算法，将顺序表L的所有元素逆置，要求算法的空间复杂度为0(1)</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(SqList &amp;L)</span></span>&#123;</span><br><span class="line">    ElenType temp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length/<span class="number">2</span>;i++)&#123;</span><br><span class="line">        temp = L.data[i];</span><br><span class="line">        L.data[i] = L.data[L.length-i<span class="number">-1</span>];</span><br><span class="line">        L.data[L.length-i<span class="number">-1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对长度为n的顺序表L，编写一个时间复杂度为O(n)、空间复杂度为0(1)的算法，该算法删除线性表中所有值为x的数据元素。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//思路一：k记录不等于x的个数，将不等于x的元素向前移动k个位置，修改L的长度</span></span><br><span class="line"><span class="comment">//例如：1，2,3,2,3 (删除值为3)</span></span><br><span class="line"><span class="comment">//1：k++，此时k=1;</span></span><br><span class="line"><span class="comment">//2：k++，此时k=2;</span></span><br><span class="line"><span class="comment">//3：忽略，不处理，此时k=2;</span></span><br><span class="line"><span class="comment">//2：将位置i的元素赋值到k，然后k++，此时k=3;</span></span><br><span class="line"><span class="comment">//3：忽略，不处理，此时k=3;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(SqList &amp;L, ElemType x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(L.data[i] != x)&#123;</span><br><span class="line">            L.data[k] = L.data[i];</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    L.length = k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//思路二：k记录等于x的个数，将不等于x的元素向前移动k个位置，修改L的长度</span></span><br><span class="line"><span class="comment">//例如：1，2,3,2,3 (删除值为3)</span></span><br><span class="line"><span class="comment">//1：不相等，此时k=0;</span></span><br><span class="line"><span class="comment">//2：不相等，此时k=0;</span></span><br><span class="line"><span class="comment">//3：相等，k++，此时k=1;</span></span><br><span class="line"><span class="comment">//2：不相等，此时k=1，当前元素向前移动1个位置</span></span><br><span class="line"><span class="comment">//3：相等，k++，此时k=2;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(SqList &amp;L, ElemType x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(L.data[i] == x)</span><br><span class="line">            k++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            L.data[i-k] = L.data[i];<span class="comment">//当前元素向前移动k个位置</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.length -= k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>从<strong>有序</strong>顺序表中删除其值在给定值s与t之间(要求s&lt;t)的所有元素，如果s或t不合理或顺序表为空，则显示出错信息并退出运行。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">del_s_t</span><span class="params">(SqList &amp;L, ElemType s, ElemType t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="keyword">if</span>(s&lt;=t||L.length==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L.length&amp;&amp;L.data[i]&lt;s;++i);<span class="comment">//寻找值大于等于s的第一个元素</span></span><br><span class="line">    <span class="keyword">if</span>(i&gt;=L.length)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//所有元素都小于s</span></span><br><span class="line">     <span class="keyword">for</span>(j=<span class="number">0</span>;i&lt;L.length&amp;&amp;L.data[j]&lt;=t;++j);<span class="comment">//寻找值小于t的第一个元素</span></span><br><span class="line">    <span class="keyword">for</span>(;j&lt;L.length;i++;j++)&#123;</span><br><span class="line">        L.data[i]=L.data[j];</span><br><span class="line">    &#125;</span><br><span class="line">    L.length=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>从顺序表中删除其值在给定值s与1之间(包含s和t，要求s&lt;t)的所有元素，如果s或t不合理或顺序表为空，则显示出错信息并退出运行。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">del_s_t</span><span class="params">(SqList &amp;L, ElemType s, ElemType t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,k=<span class="number">0</span>;<span class="comment">//k记录s-t之间的个数</span></span><br><span class="line">    <span class="keyword">if</span>(s&lt;=t||L.length==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L.length;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(L.data[i]&gt;=s&amp;&amp;L.data&lt;=t)</span><br><span class="line">            k++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            L.data[i-k] = L.data[i];<span class="comment">//当前元素向前移动k个位置</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.length=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>从<strong>有序</strong>顺序表中删除所有其值重复的元素，使表中所有元素的值均不同。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//号：0 1 2 3 4 5 6 7 8 9 10</span></span><br><span class="line"><span class="comment">//值：1,2,2,2,3,3,3,4,5,5,5</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">del_same</span><span class="params">(SqList &amp;L)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L.length==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> i,j;<span class="comment">//i存储第一个不相同的元素，j为工作指针</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>,j=<span class="number">1</span>;j&lt;L.length;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(L.data[i]!=L.data[j])&#123;<span class="comment">//查找下一个与上一个元素不想同的值，然后放到上个元素后面</span></span><br><span class="line">            i++;</span><br><span class="line">            L.data[i]=L.data[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    L.length=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>将两个有序顺序表合并为一个新的有序顺序表，并由函数返回结果顺序表。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Merge</span><span class="params">(SqList A, SqList B, SqList &amp;c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(A.length+B.length&gt;C.MaxSize)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>,k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;A.length&amp;&amp;j&lt;Length)&#123;</span><br><span class="line">        <span class="keyword">if</span>(A.data[i]&lt;=B.data[j])</span><br><span class="line">            C.data[k++]=A.data[i++];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            C.data[k++]=B.data[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;A.length)&#123;</span><br><span class="line">        C.data[k++]=A.data[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(j&lt;B.length)&#123;</span><br><span class="line">         C.data[k++]=B.data[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    C.length=k;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>已知在一维数组A[m+n]中依次存放两个线性表(a，a2，a，..am)和(b，b2，b，.，bn)试编写一个函数，将数组中两个顺序表的位置互换，即将(b，b2，b3，.，bn)，放在(a，a2 a3，.，.am)的前面。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Exchange</span><span class="params">(ElemType A[], <span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span> arraySize)</span></span>&#123;</span><br><span class="line">    Reverse(A,<span class="number">0</span>,m+n<span class="number">-1</span>,arraySize);<span class="comment">//整体翻转</span></span><br><span class="line">    Reverse(A,<span class="number">0</span>,n<span class="number">-1</span>,arraySize);<span class="comment">//前部分翻转</span></span><br><span class="line">    Reverse(A,n,m+n<span class="number">-1</span>,arraySize);<span class="comment">//有部分翻转</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(ElemType A[], <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> arraySize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left&gt;==right||right&gt;=arraySize)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(left+right)/<span class="number">2</span>;</span><br><span class="line">    ElemType temp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mid-left;i++)&#123;</span><br><span class="line">        temp=A[left+i];</span><br><span class="line">        A[left+i]=A[right+i];</span><br><span class="line">        A[right+i]=temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>线性表(a，a2，a3，.，an)中的元素<strong>递增有序</strong>且按顺序存储于计算机内。要求设计一算法，完成用最少时间在表中查找数值为x的元素，若找到则将其与后继元素位置相交换，若找不到则将其插入表中并使表中元素仍递增有序。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//采用折半查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SearchEexchangeInstert</span><span class="params">(ElemType A[],ElemType x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> low=<span class="number">0</span>, hight=n<span class="number">-1</span>, mid;</span><br><span class="line">    <span class="keyword">while</span>(low&lt;=hight)&#123;</span><br><span class="line">        mid=(low+hight)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(A[mid]==x)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(A[mid]&lt;x)</span><br><span class="line">            low=mid+<span class="number">1</span>;<span class="comment">//到后半部分去查</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            hig=mid<span class="number">-1</span>;<span class="comment">//到前半部分去查</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(A[mid]==x &amp;&amp; mid!=n<span class="number">-1</span>)&#123;<span class="comment">//进行交换，如果是最后一个元素和x相等，则不需要交换</span></span><br><span class="line">        ElemType t=A[mid];</span><br><span class="line">        A[mid]=A[mid+<span class="number">1</span>];</span><br><span class="line">        A[mid+<span class="number">1</span>]=t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(low&gt;high)&#123;<span class="comment">//没有与x相等的元素，进行插入操作</span></span><br><span class="line">        <span class="keyword">for</span>(i=n<span class="number">-1</span>; i&gt;high;i++)</span><br><span class="line">            A[i+<span class="number">1</span>]=A[i];</span><br><span class="line">        A[i+<span class="number">1</span>]=x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="10">
<li><p><strong>【2010统考真题】设将n(n&gt; 1)个整数存放到一维数组R中。设计一个在时间和空间两方面都尽可能高效的算法。将R中保存的序列循环左移p(0&lt;p&lt;n)个位置，即将R中的数据由(X0，X1，X2，…，Xn-1)换为(Xp，Xp+1，Xp+2，…，Xp+n-1)，要求：</strong><br>1)给出算法的基本设计思想。<br>2)根据设计思想，采用C或C++或Java语言描述算法，关键之处给出注释。<br>3)说明你所设计算法的时间复杂度和空间复杂度</p>
<ol>
<li><p>解：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200723092824.png" alt>另外一种做法是设置一个辅助数组：创建大小为p的辅助数组S，将R中前p个整数依次暂存在S中，同时将R中后n-p个整数左移，然后将 中暂存的p个数依次放回到R中的后续单元。时间复杂度为0(n)，空间复杂度为O(p)。</p>
</li>
<li><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span> <span class="params">(<span class="keyword">int</span> R[], <span class="keyword">int</span> from, <span class="keyword">int</span> to)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i, temp;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;(to-from+<span class="number">1</span>)/<span class="number">2</span>;i++)&#123;</span><br><span class="line">        temp=R[from+i];</span><br><span class="line">        R[from+i]=R[to-i];</span><br><span class="line">        R[to-i]=temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">//Reverse</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Converse</span> <span class="params">(<span class="keyword">int</span> R[<span class="number">1</span>,<span class="keyword">int</span> n,<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">	Reverse (R, <span class="number">0</span>, p<span class="number">-1</span>);</span><br><span class="line">    Reverse (R, p, n<span class="number">-1</span>);</span><br><span class="line">    Reverse (R, <span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>上述三个Reversede函数的时间复杂度分别为O(p/2),O((n-p)/2)和O(n/2),设计的算法中时间复杂度是O(n)，空间复杂度是O(1)</p>
</li>
</ol>
</li>
</ol>
<ol start="11">
<li><strong>【2011统考真题】一个长度为L(L&gt;=1)的升序序列S，处在第 [L/2] 个位置的数称为S的中位数。例如，若序列S1=(11，13，15，17，19)，则S，的中位数是15，两个序列的中位数是含它们所有元素的升序序列的中位数。例如，若S2=(2，4，6，8，20)，则S1和S2的中位数是11，现在有两个等长升序序列A和B，试设计一个在时间和空间两方面都尽可能高效的算法，找出两个序列A和B的中位数。要求：</strong><br>1)给出算法的基本设计思想。<br>2)根据设计思想，采用C或C++或Java语言描述算法，关键之处给出注释。<br>3)说明你所设计算法的时间复杂度和空间复杂度。</li>
</ol>
<pre><code>1. 分别求两个升序序列A、B的中位数，设为a和b，求序列A、B的中位数过程如下：


   - 若a=b，则a或b即为所求中位数，算法结束。
   - 若a&lt;b，则舍弃序列A中较小的一半，同时舍弃序列B中较大的一半，要求两次舍弃的长度相等。
   - 若a&gt;b，则舍弃序列A中较大的一半，同时舍弃序列B中较小的一半，要求两次舍弃的长度相等。
   - 在保留的两个升序序列中，重复过程1,2,3，直到两个序列中均只含一个元素时为止。

2. 解：

   <figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">M_Search</span><span class="params">(<span class="keyword">int</span> A[]，<span class="keyword">int</span> B[]，<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> s1=<span class="number">0</span>, d1=n<span class="number">-1</span>, ml;</span><br><span class="line">	<span class="keyword">int</span> s2=<span class="number">0</span>, d2=n<span class="number">-1</span>, m2;		<span class="comment">//分别表示序列A和B的首位数、末位数和中位数</span></span><br><span class="line">	<span class="keyword">while</span>(s1!=d1 || s2!=d2)&#123;</span><br><span class="line"> 		ml=(s1+d1)/<span class="number">2</span>;</span><br><span class="line">		m2-(s2+d2)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(A[m1]=-B[m2])</span><br><span class="line"> 			<span class="keyword">return</span> A[m1];		<span class="comment">//满足条件1</span></span><br><span class="line">		<span class="keyword">if</span>(A[m1]&lt;B[m2])			<span class="comment">//满足条件2</span></span><br><span class="line"> 			<span class="keyword">if</span>((s1+d1)%<span class="number">2</span>==<span class="number">0</span>)&#123; 	<span class="comment">//若元素个数为奇数</span></span><br><span class="line"> 				s1=m1;			<span class="comment">//舍弃A中间点以前的部分且保留中间点</span></span><br><span class="line">				d2=m2;  		<span class="comment">//舍弃B中间点以后的部分且保留中间点</span></span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;				<span class="comment">//元素个数为偶数</span></span><br><span class="line">				s1=m1+<span class="number">1</span>;		<span class="comment">//舍弃A中间点及中间点以前部分</span></span><br><span class="line">				d2=m2; 			<span class="comment">//舍弃B中间点以后部分且保留中间点</span></span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;					<span class="comment">//满足条件3</span></span><br><span class="line">			<span class="keyword">if</span>((s2+d2)%<span class="number">2</span>==<span class="number">0</span>)&#123;	<span class="comment">//若元素个数为奇数</span></span><br><span class="line">				d1=m1;			<span class="comment">//舍弃A中间点以后的部分且保留中间点</span></span><br><span class="line">				s2=m2;			<span class="comment">//舍弃B中间点以前的部分且保留中间点</span></span><br><span class="line">			&#125;</span><br><span class="line"> 			<span class="keyword">else</span>&#123;				<span class="comment">//元素个数为偶数</span></span><br><span class="line">				dl=ml;			<span class="comment">//舍弃A中间点以后部分且保留中间点</span></span><br><span class="line">				s2-m2+<span class="number">1</span>;		 <span class="comment">//舍弃B中间点及中间点以前部分</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> A[s1]&lt;B[s2]?A[s1]:B[s2];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



3. 解：算法的时间复杂度是O(log2n)，空间复杂度是O(1)</code></pre><ol start="12">
<li>【2013统考真题】已知一个整数序列A=(a0，a1，.，an)，其中0&lt;=ai&lt;n(o&lt;i&lt;n)，若存在ap1=ap2=…=apm=x，且m&gt;n/2 (0&lt;=pk&lt;n，1&lt;k&lt;m)，则称x为A的主元素。例如A= (0，5，5，3，5，7，5，5)，则5为主元素; 又如A= (0，5，5，3，5，1，5，7)，则A中没有主元素。假设A中的n个元素保存在一个一维数组中，请设计一个尽可能高效的算法，找出A的主元素。若存在主元素，则输出该元素; 否则输出-1，要求：<br>1)给出算法的基本设计思想。<br>2)根据设计思想，采用C或C++或Java语言描述算法，关键之处给出注释。<br>3)说明你所设计算法的时间复杂度和空间复杂度。</li>
</ol>
<ol start="13">
<li>【2018统考真题】给定一个含n(n&gt;=1)个整数的数组，请设计一个在时间上尽可能高效的算法，找出数组中未出现的最小正整数。例如，数组 {-5，3，2，3} 中未出现的最小正整数是1; 数组 {1，2，3} 中未出现的最小正整数是4，要求：<br>1)给出算法的基本设计思想。<br>2)根据设计思想，采用C或C++语言描述算法，关键之处给出注释。<br>3)说明你所设计算法的时间复杂度和空间复杂度。</li>
</ol>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构习题1.2.3</title>
    <url>/2020/07/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%A0%E9%A2%981.2.3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="一、选择题"><a href="#一、选择题" class="headerlink" title="一、选择题"></a>一、选择题</h3><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721221543.png" alt></p>
<ol>
<li><p>B</p>
</li>
<li><p>C</p>
</li>
<li><p>D</p>
</li>
</ol>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721221702.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721221813.png" alt></p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721221850.png" alt></p>
<ol start="4">
<li><p>A</p>
</li>
<li><p>B</p>
</li>
<li><p>D</p>
</li>
<li><p>C</p>
</li>
<li><p>B</p>
</li>
<li><p>C</p>
</li>
<li><p>D</p>
</li>
<li><p><strong>A</strong> 注意：是执行的次数</p>
</li>
<li><p><strong>A</strong></p>
<ol>
<li>算法原地工作是指算法所需的辅助空间是常量。</li>
<li>本项考查算法效率的理解，时间复杂度是指渐近时间复杂度，不要想当然的去给n赋予一个特殊值，时间复杂度为O（m）的算法必然优于时间复杂度为O（2”）的算法。</li>
<li>时间复杂度总是考虑最坏情况下的时间复杂度，以保证算法的运行时间不会比它更长。</li>
<li>严蔚敏教材中的原话，该问题在论坛讨论过多年，对于这种在语言层次上的效率问题，建议不要以特例程序来解释其优劣，我认为该结论是正确的。<h3 id="二、综合应用题"><a href="#二、综合应用题" class="headerlink" title="二、综合应用题"></a>二、综合应用题</h3></li>
</ol>
</li>
<li><p>一个算法所需时间由下述递归方程表示，试求出该算法的时间复杂度的级别（或阶）<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721222301.png" alt>式中，n是问题的规模，为简单起见，设n是2的整数次幂。</p>
<p>解：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721222451.png" alt></p>
</li>
<li><p>分析以下各程序段，求出算法的时间复杂度。<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721222353.png" alt></p>
<p>解：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721222529.png" alt></p>
</li>
</ol>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构习题1.1.3</title>
    <url>/2020/07/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%A0%E9%A2%981.1.3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="一、选择题"><a href="#一、选择题" class="headerlink" title="一、选择题"></a>一、选择题</h3><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721214953.png" alt></p>
<ol>
<li><p><strong>D.</strong>  抽象数据类型（ADT）描述了数据的逻辑结构和抽象运算，通常用（数据对象，数据关系，基本操作集）这样的三元组来表示，从而构成一个完整的数据结构定义。</p>
</li>
<li><p>*<em>A. *</em>树和图是典型的非线性数据结构，其他选项都属于线性数据结构。</p>
</li>
<li><p><strong>C.</strong> 顺序表、哈希表和单链是三种不同的数据结构，既描述逻辑结构，又描述存储结构和数据运算。而有序表是指关键字有序的线性表，仅描述元素之间的逻辑关系，它既可以链式存储也可以顺序存储，故属于逻辑结构。</p>
</li>
<li><p><strong>D.</strong>  数据的存储结构有顺序存储、链式存储、索引存储和散列存储。循环队列（易错点）是用顺序表表示的队列，是一种数据结构。栈是一种抽象数据类型，可采用顺序存储或链式存储，只表示逻辑结构。</p>
<hr>
</li>
</ol>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200721215036.png" alt></p>
<ol start="5">
<li><strong>A.</strong> 数据的逻辑结构是从面向实际问题的角度出发的，只采用抽象表达方式，独立于存储结构，数据的存储方式有多种不同的选择；而数据的存储结构是逻辑结构在计算机上的映射，它不能独立于逻辑结构而存在。数据结构包括三个要素，缺一不可。</li>
<li><strong>C.</strong> </li>
<li><strong>A.</strong>链式存储设计时，各个不同结点的存储空间可以不连续，但结点内的存储单元地址必须连续。</li>
</ol>
<h3 id="二、综合应用题"><a href="#二、综合应用题" class="headerlink" title="二、综合应用题"></a>二、综合应用题</h3><ol>
<li><p>对于两种不同的数据结构，逻辑结构或物理结构一定不相同吗？</p>
<p>​        对于两种不同的数据结构，它们的逻辑结构和物理结构完全有可能相同。比如二叉树和二叉排序树，二叉排序树可以采用二叉树的逻辑表示和存储方式，前者通常用于表示层次关系，而后者通常用于排序和查找。虽然它们的运算都有建立树、插入结点、删除结点和查找结点等功能，但对于二叉树和二又排序树，这些运算的定义是不同的，以查找结点为例，二叉树的时间复杂度为0（n），而二叉排序树的时间复杂度为O（log2n）。</p>
<hr>
</li>
<li><p>试举一例，说明对相同的逻辑结构，同一种运算在不同的存储方式下实现时，其运算效率不同。</p>
<p>​        线性表既可以用顺序存储方式实现，又可以用链式存储方式实现。在顺序存储方式下，在线性表中插入和删除元素，平均要移动近一半的元素，时间复杂度为O（n）；而在链式存储方式下，插入和删除的时间复杂度都是O（1）。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome的Software Reporter Tool长时间占用CPU解决办法</title>
    <url>/2020/07/07/Chrome%E7%9A%84Software-Reporter-Tool%E9%95%BF%E6%97%B6%E9%97%B4%E5%8D%A0%E7%94%A8CPU%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="什么是Software-Reporter-Tool"><a href="#什么是Software-Reporter-Tool" class="headerlink" title="什么是Software Reporter Tool"></a>什么是Software Reporter Tool</h2><p>Software Reporter Tool是一个Chrome清理工具,用于清理谷歌浏览器中不必要或恶意的扩展，应用程序，劫持开始页面等等。当你安装Chrome时，Software_reporter_tool.exe也j就会被下载在SwReporter文件夹下的Chrome应用数据文件夹中。</p>
<a id="more"></a>

<h2 id="如何关闭SRT"><a href="#如何关闭SRT" class="headerlink" title="如何关闭SRT"></a>如何关闭SRT</h2><p>这个软件在运行的过程中可能会长时间地占用CPU，导致高CPU使用率。我们虽然可以通过任务管理器手动结束进程或者选择删除SRT，但这都不是长久的解决办法。因为前者过一段时间它又会再次运行，后者在浏览器更新的时候就又会重新被下载下来。要完美地解决这一个问题我们可以进入SRT目录，默认它位于以下目录</p>
<p>C:\Users[YourName]\AppData\Local\Google\Chrome\User Data\SwReporter[版本]\software_reporter_tool.exe</p>
<p>我们还可以通过<code>win+r</code>键打开运行命令窗口并输入以下命令快速找到它</p>
<p>%localappdata%\Google\Chrome\User Data\SwReporter</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20200707204417.png" alt></p>
<ul>
<li>右键单击software_reporter_tool.exe选择属性</li>
<li>转到“安全”选项卡</li>
<li>点击“高级”</li>
<li>点击“禁用继承”</li>
<li>选择”从此对象中删除所有继承的权限”,之后一路点击“确定”“确定”。</li>
</ul>
]]></content>
      <categories>
        <category>业余技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之循环单链表（带头结点）</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E5%BE%AA%E7%8E%AF%E5%8D%95%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">    ElemType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InitList</span><span class="params">(LinkList &amp;L)</span></span>&#123;</span><br><span class="line">	L = (LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	<span class="keyword">if</span>(L==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	L-&gt;next=L;<span class="comment">//指向L本身</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(LinkList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(L-&gt;next==L)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isTail</span><span class="params">(LinkList L, LNode *p)</span></span>&#123;<span class="comment">//判断p结点是否是表尾结点</span></span><br><span class="line">	<span class="keyword">if</span>(p-&gt;next==L)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之循环双链表</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E5%BE%AA%E7%8E%AF%E5%8F%8C%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>&#123;</span></span><br><span class="line">	ElemType data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> *<span class="title">prior</span>, *<span class="title">next</span>;</span><span class="comment">//前驱指针和后继指针</span></span><br><span class="line">&#125;DNode, *DLinkList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InitDLinkList</span><span class="params">(DLinkList &amp;L)</span></span>&#123;</span><br><span class="line">	L = (DNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode));</span><br><span class="line">	<span class="keyword">if</span>(L==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	L-&gt;prior=L;</span><br><span class="line">	L-&gt;next=L;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(DLinkList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (L-&gt;next==L) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isTail</span><span class="params">(DLinkList L, DNode *p)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p-&gt;next==L) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertNextDNode</span><span class="params">(DNode *p, DNode *s)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span> || s==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	p-&gt;next-&gt;prior=s;</span><br><span class="line">	s-&gt;prior=p;</span><br><span class="line">	p-&gt;next=s;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertPriorDNode</span><span class="params">(DNode *p, DNode *s)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span> || s==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;next=p;</span><br><span class="line">	p-&gt;prior-&gt;next=s;</span><br><span class="line">	s-&gt;prior=p-&gt;prior;</span><br><span class="line">	p-&gt;prior=s-&gt;next;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteNextDNode</span><span class="params">(DNode *p)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	DNode *q=p-&gt;next;</span><br><span class="line">	p-&gt;next=q-&gt;next;</span><br><span class="line">	q-&gt;next-&gt;prior=p;</span><br><span class="line">	<span class="built_in">free</span>(q);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryList</span><span class="params">(DLinkList &amp;L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(L-&gt;next!=<span class="literal">NULL</span>)</span><br><span class="line">		DeleteNextDNode(L);</span><br><span class="line">	<span class="built_in">free</span>(L);<span class="comment">//释放头结点</span></span><br><span class="line">	L=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之双链表</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E5%8F%8C%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>&#123;</span></span><br><span class="line">	ElemType data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> *<span class="title">prior</span>, *<span class="title">next</span>;</span><span class="comment">//前驱指针和后继指针</span></span><br><span class="line">&#125;DNode, *DLinkList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InitDLinkList</span><span class="params">(DLinkList &amp;L)</span></span>&#123;</span><br><span class="line">	L = (DNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode));</span><br><span class="line">	<span class="keyword">if</span>(L==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	L-&gt;prior=<span class="literal">NULL</span>;</span><br><span class="line">	L-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertNextDNode</span><span class="params">(DNode *p, DNode *s)</span></span>&#123;<span class="comment">//p结点之后插入s结点</span></span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span> || s==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	<span class="keyword">if</span>(p-&gt;next!=<span class="literal">NULL</span>)</span><br><span class="line">		p-&gt;next-&gt;prior=s;<span class="comment">//后面双向插</span></span><br><span class="line">	s-&gt;prior=p;</span><br><span class="line">	p-&gt;next=s;<span class="comment">//前面双向插</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertPriorDNode</span><span class="params">(DNode *p, DNode *s)</span></span>&#123;<span class="comment">//p结点之前插入s结点</span></span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span> || s==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;next=p;</span><br><span class="line">	<span class="keyword">if</span>(p-&gt;prior!=<span class="literal">NULL</span>)</span><br><span class="line">		p-&gt;prior-&gt;next=s;</span><br><span class="line">	s-&gt;prior=p-&gt;prior;</span><br><span class="line">	p-&gt;prior=s-&gt;next;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteNextDNode</span><span class="params">(DNode *p)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	DNode *q=p-&gt;next;</span><br><span class="line">	<span class="keyword">if</span>(q==<span class="literal">NULL</span>)<span class="comment">//p没有后继结点q</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	p-&gt;next=q-&gt;next;</span><br><span class="line">	<span class="keyword">if</span>(q-&gt;next!=<span class="literal">NULL</span>)<span class="comment">//q结点不是最后一个结点</span></span><br><span class="line">		q-&gt;next-&gt;prior=p;</span><br><span class="line">	<span class="built_in">free</span>(q);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestoryList</span><span class="params">(DLinkList &amp;L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(L-&gt;next!=<span class="literal">NULL</span>)</span><br><span class="line">		DeleteNextDNode(L);</span><br><span class="line">	<span class="built_in">free</span>(L);<span class="comment">//释放头结点</span></span><br><span class="line">	L=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printDList</span><span class="params">(DLinkList L)</span></span>&#123;</span><br><span class="line">	<span class="comment">//后向遍历</span></span><br><span class="line">	DNode *p=L;</span><br><span class="line">	<span class="keyword">while</span>(p-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,p-&gt;data);</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//前项遍历</span></span><br><span class="line">	<span class="keyword">while</span>(p-&gt;prior!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,p-&gt;data);</span><br><span class="line">		p=p-&gt;prior;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	DLinkList L;</span><br><span class="line">	InitDLinkList(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之单链表（不带头结点）</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E5%8D%95%E9%93%BE%E8%A1%A8%EF%BC%88%E4%B8%8D%E5%B8%A6%E5%A4%B4%E7%BB%93%E7%82%B9%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">L<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *格式化全部代码       ctrl+a+k+f</span></span><br><span class="line"><span class="comment"> *格式化选中的代码     ctrl+k+f</span></span><br><span class="line"><span class="comment"> *注释代码   ctrl+k+c</span></span><br><span class="line"><span class="comment"> *反注释代码  ctrl+k+u</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Lnode</span>&#123;</span></span><br><span class="line">    ElemType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Lnode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;Lnode, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">initlist</span><span class="params">(LinkList &amp;l)</span></span>&#123;</span><br><span class="line">	L = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">(LinkList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(L==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">listinsert</span><span class="params">(LinkList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1</span>)&#123;<span class="comment">//插入到第一个位置</span></span><br><span class="line">		Lnode *s =(Lnode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Lnode));</span><br><span class="line">		s-&gt;data=e;</span><br><span class="line">		s-&gt;next=L;</span><br><span class="line">		L=s;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Lnode *p;</span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">1</span>;<span class="comment">//p指向的第几个节点</span></span><br><span class="line">	p = L;</span><br><span class="line">	<span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i<span class="number">-1</span>)&#123;<span class="comment">//循环找到i-1个节点</span></span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>)&#123;<span class="comment">//i值不合法 p指向了null</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Lnode *s =(Lnode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Lnode));</span><br><span class="line">	s-&gt;data=e;</span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	p-&gt;next=s;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之单链表</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E5%8D%95%E9%93%BE%E8%A1%A8%EF%BC%88%E5%B8%A6%E5%A4%B4%E7%BB%93%E7%82%B9%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">    ElemType data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InitList</span><span class="params">(LinkList &amp;L)</span></span>&#123;<span class="comment">//初始化一个链表</span></span><br><span class="line">	L = (LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	<span class="keyword">if</span>(L==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	L-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(LinkList L)</span></span>&#123;<span class="comment">//判断链表是否为空</span></span><br><span class="line">	<span class="keyword">if</span>(L-&gt;next==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListInsert</span><span class="params">(LinkList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span>&#123;<span class="comment">//在第i个位置插入e元素</span></span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	LNode *p;</span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;<span class="comment">//p指向的第几个结点</span></span><br><span class="line">	p=L;</span><br><span class="line">	<span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i<span class="number">-1</span>)&#123;<span class="comment">//循环找到i-1个结点</span></span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>)&#123;<span class="comment">//i值不合法 p指向了null</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	LNode *s =(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	s-&gt;data=e;</span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	p-&gt;next=s;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertNextNode</span><span class="params">(LNode *p,ElemType e)</span></span>&#123;<span class="comment">//在p结点后插入元素</span></span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	<span class="keyword">if</span>(s==<span class="literal">NULL</span>)<span class="comment">//内存分配失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;data=e;</span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	p-&gt;next=s;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InsertPriorNode</span><span class="params">(LNode *p,ElemType e)</span></span>&#123;<span class="comment">//在p结点之前插入元素e</span></span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	<span class="keyword">if</span>(s==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//内存分配失败</span></span><br><span class="line">	s-&gt;next=p-&gt;next;</span><br><span class="line">	p-&gt;next=s;</span><br><span class="line">	s-&gt;data=p-&gt;data;</span><br><span class="line">	p-&gt;data=e;<span class="comment">//在p结点之后插入s 然后交换两个结点的data</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListDelete</span><span class="params">(LinkList &amp;L, <span class="keyword">int</span> i,ElemType &amp;e)</span></span>&#123;</span><br><span class="line">    <span class="comment">//删除第i个结点（将第i-1个结点指向第i+1个结点。然后释放第i个结点）</span></span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	LNode *p;</span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">	p=L;</span><br><span class="line">	<span class="keyword">while</span> (p!=<span class="literal">NULL</span> &amp;&amp;j&lt;i<span class="number">-1</span>)&#123;</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span>(p-&gt;next == <span class="literal">NULL</span>)<span class="comment">//i-1个结点之后已无其他结点</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	LNode *q=p-&gt;next;</span><br><span class="line">	e=q-&gt;data;</span><br><span class="line">	p-&gt;next=q-&gt;next;</span><br><span class="line">	<span class="built_in">free</span>(q);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DeleteNode</span><span class="params">(LNode *p)</span></span>&#123;<span class="comment">//删除指定结点p</span></span><br><span class="line">	<span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	LNode *q=p-&gt;next;<span class="comment">//令q指向*p的后继结点</span></span><br><span class="line">	p-&gt;data=p-&gt;next-&gt;data;<span class="comment">//和后继结点交换数据域</span></span><br><span class="line">	p-&gt;next=q-&gt;next;<span class="comment">//将*p结点从链中断开</span></span><br><span class="line">	<span class="built_in">free</span>(q);<span class="comment">//释放q结点</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LNode * <span class="title">GetElem</span><span class="params">(LinkList L,<span class="keyword">int</span> i)</span></span>&#123;<span class="comment">//按位查找，返回第i个元素（带头结点）</span></span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	LNode *p;</span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i)&#123;</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LNode * <span class="title">LocateElem</span><span class="params">(LinkList L, ElemType e)</span></span>&#123;<span class="comment">//按值查找</span></span><br><span class="line">	LNode *p = L-&gt;next;</span><br><span class="line">	<span class="comment">//从第一个结点开始查找数据域为e的结点</span></span><br><span class="line">	<span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; p-&gt;data != e)&#123;</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Length</span><span class="params">(LinkList L)</span></span>&#123;<span class="comment">//表的长度</span></span><br><span class="line">	<span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">	LNode *p=L;</span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">		len++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">printList</span><span class="params">(LinkList L)</span></span>&#123;</span><br><span class="line">	LNode *p=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	p=L;</span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,p-&gt;next-&gt;data);</span><br><span class="line">		p=p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------单链表的建立------------------//</span></span><br><span class="line"><span class="comment">//功能：可以实现列表的逆置</span></span><br><span class="line"><span class="function">LinkList <span class="title">List_HeadInsert</span><span class="params">(LinkList &amp;L)</span></span>&#123;<span class="comment">//头插法</span></span><br><span class="line">	LNode *s;</span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	L=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">	L-&gt;next=<span class="literal">NULL</span>;<span class="comment">//必须指向null，否则会出现问题</span></span><br><span class="line">	<span class="comment">//养成好习惯，只要初始化单链表就指向null</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">	<span class="keyword">while</span> (x!=<span class="number">0</span>)&#123;<span class="comment">//输入0即为结束</span></span><br><span class="line">		s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">		s-&gt;data=x;</span><br><span class="line">		s-&gt;next=L-&gt;next;</span><br><span class="line">		L-&gt;next=s;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LinkList <span class="title">List_TailInsert</span><span class="params">(LinkList &amp;L)</span></span>&#123;<span class="comment">//尾插法</span></span><br><span class="line">	LNode *s;</span><br><span class="line">	LNode *r;<span class="comment">//r为表尾指针</span></span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	L=(LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));<span class="comment">//创建头结点</span></span><br><span class="line">	r=L;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">	<span class="keyword">while</span> (x!=<span class="number">0</span>)&#123;<span class="comment">//输入0即为结束</span></span><br><span class="line">		s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">		s-&gt;data=x;</span><br><span class="line">		r-&gt;next=s;</span><br><span class="line">		r=s;<span class="comment">//r永远指向最后一个结点</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">	&#125;</span><br><span class="line">	r-&gt;next=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    LinkList L;<span class="comment">//声明一个指向单链表的指针 </span></span><br><span class="line">    InitList(L);<span class="comment">//初始化一个空表 </span></span><br><span class="line">	List_HeadInsert(L);</span><br><span class="line">	<span class="keyword">int</span> len = Length(L);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"该表的长度是：%d\n"</span>,len);</span><br><span class="line">	printList(L);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之静态链表</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E9%9D%99%E6%80%81%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MaxSize 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">	ElemType data;</span><br><span class="line">	<span class="keyword">int</span> next;</span><br><span class="line">&#125;SLinkList[MaxSize];</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之顺序表动态分配</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E9%A1%BA%E5%BA%8F%E8%A1%A8%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li>顺序表的静态分配与动态分配只不过是一个数组长度固定，一个数组长度可以动态变化的。在物理存储上都是连续的、顺序的。</li>
<li>动态分配方式指针L.data同样可以用数组下标取数，所以在进行一系列操作时并没有什么区别。无非需要注意的是：</li>
<li>【静态分配】外部define：MaxSize，结构体内：L.length。</li>
<li>【动态分配】外部define：InitSize，结构体内：L.length，L.MaxSize。另外动态分配会有延长数组的操作和销毁操作。</li>
</ul>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> InitSize 5</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType *data;<span class="comment">//指示动态分配数组的指针</span></span><br><span class="line">    <span class="keyword">int</span> MaxSize,length;<span class="comment">//数组的最大容量和当前长度</span></span><br><span class="line">&#125;SqList;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitList</span><span class="params">(SqList &amp;L)</span></span>&#123;</span><br><span class="line">	L.data=(ElemType *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ElemType)*InitSize);</span><br><span class="line">	L.length=<span class="number">0</span>;</span><br><span class="line">	L.MaxSize=InitSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IncreaseSize</span><span class="params">(SqList &amp;L,<span class="keyword">int</span> len)</span></span>&#123;<span class="comment">//增加动态数组长度len</span></span><br><span class="line">    <span class="comment">//(int*)realloc(L.data,L.MaxSize+len);</span></span><br><span class="line">	ElemType *p=L.data;</span><br><span class="line">	L.data=(ElemType *)<span class="built_in">malloc</span>((L.MaxSize+len)*<span class="keyword">sizeof</span>(ElemType));</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">		L.data[i]=p[i];</span><br><span class="line">	&#125;</span><br><span class="line">	L.MaxSize=L.MaxSize+len;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintList</span><span class="params">(SqList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"data[%d]=%d\n"</span>,i,L.data[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Length</span><span class="params">(SqList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> L.length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(SqList L)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(L.length==<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DestroyList</span><span class="params">(SqList &amp;L)</span></span>&#123;<span class="comment">//销毁顺序表 </span></span><br><span class="line">	<span class="keyword">if</span>(L.data)&#123;</span><br><span class="line">		<span class="built_in">free</span>(L.data);<span class="comment">//释放L.data指向的内存区域</span></span><br><span class="line">		L.data=<span class="literal">NULL</span>;<span class="comment">//释放L.data指针本身</span></span><br><span class="line">		L.length=<span class="number">0</span>;</span><br><span class="line">		L.MaxSize=<span class="number">0</span>; </span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListInsert</span><span class="params">(SqList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length+<span class="number">1</span>)&#123;<span class="comment">//因为L.length+1表示可以在表尾追加元素</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(L.length&gt;=L.MaxSize)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"当前存储空间已满\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=L.length;j&gt;i<span class="number">-1</span>;j--)&#123;</span><br><span class="line">		L.data[j]=L.data[j<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	L.data[i<span class="number">-1</span>]=e;</span><br><span class="line">    L.length++;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListDelete</span><span class="params">(SqList &amp;L, <span class="keyword">int</span> i, ElemType &amp;e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    e=L.data[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i<span class="number">-1</span>;j&lt;L.length<span class="number">-1</span>;j++)&#123;</span><br><span class="line">		L.data[j]=L.data[j+<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">    L.length--;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetElem</span><span class="params">(SqList L,<span class="keyword">int</span> i)</span></span>&#123;<span class="comment">//按位查找，获取位序为i的元素 </span></span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"查找位序不合法！"</span>); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> L.data[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateElem</span><span class="params">(SqList L,<span class="keyword">int</span> e)</span></span>&#123;<span class="comment">//按值查找,找到L中第一个等于e的元素，并返回其位序 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(L.data[i]==e)&#123;</span><br><span class="line">			<span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SqList L;</span><br><span class="line">	InitList(L);</span><br><span class="line">	ListInsert(L,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">	PrintList(L);</span><br><span class="line">	<span class="keyword">int</span> e = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">if</span>(ListDelete(L,<span class="number">3</span>,e))&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"已经删除第3个元素，删除元素为%d\n"</span>,e);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"位序i不合法，删除失败\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	IncreaseSize(L,<span class="number">3</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"len:%d\n"</span>,L.MaxSize);</span><br><span class="line">	DestroyList(L);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>线性表之顺序表静态分配</title>
    <url>/2020/07/07/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B%E9%A1%BA%E5%BA%8F%E8%A1%A8%E9%9D%99%E6%80%81%E5%88%86%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>见代码</p>
<a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> InitSize 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MaxSize 10</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ElemType;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType data[InitSize];</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">&#125;SqList;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitList</span><span class="params">(SqList &amp;L)</span></span>&#123;<span class="comment">//初始化一个顺序表 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;MaxSize;i++)</span><br><span class="line">		L.data[i]=<span class="number">0</span>;</span><br><span class="line">	L.length=InitSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintList</span><span class="params">(SqList L)</span></span>&#123;<span class="comment">//打印输出顺序表 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"data[%d]=%d\n"</span>,i,L.data[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Length</span><span class="params">(SqList L)</span></span>&#123;<span class="comment">//求表长 </span></span><br><span class="line">	<span class="keyword">return</span> L.length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Empty</span><span class="params">(SqList L)</span></span>&#123;<span class="comment">//判空操作 </span></span><br><span class="line">	<span class="keyword">if</span>(L.length==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListInsert</span><span class="params">(SqList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span>&#123;<span class="comment">//在L的位序i处插入元素</span></span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length+<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(L.length&gt;=MaxSize)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"当前存储空间已满\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=L.length;j&gt;i<span class="number">-1</span>;j--)&#123;<span class="comment">//将第i个元素及以后的元素后移 </span></span><br><span class="line">		L.data[j]=L.data[j<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	L.data[i<span class="number">-1</span>]=e;</span><br><span class="line">    L.length++;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ListDelete</span><span class="params">(SqList &amp;L, <span class="keyword">int</span> i, ElemType &amp;e)</span></span>&#123;<span class="comment">//删除L的位序为i的元素，将被删除的元素赋给e </span></span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    e=L.data[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i<span class="number">-1</span>;j&lt;L.length<span class="number">-1</span>;j++)&#123;</span><br><span class="line">		L.data[j]=L.data[j+<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">    L.length--;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetElem</span><span class="params">(SqList L,<span class="keyword">int</span> i)</span></span>&#123;<span class="comment">//按位查找，获取L中第i个位置的元素值 </span></span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;L.length)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"查找位序不合法！"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> L.data[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LocateElem</span><span class="params">(SqList L,<span class="keyword">int</span> e)</span></span>&#123;<span class="comment">//按值查找,找到L中第一个等于e的元素，并返回其位序 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(L.data[i]==e)&#123;</span><br><span class="line">			<span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SqList L;</span><br><span class="line">	InitList(L);</span><br><span class="line">	ListInsert(L,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">	PrintList(L);</span><br><span class="line">	<span class="keyword">int</span> e = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">if</span>(ListDelete(L,<span class="number">3</span>,e))&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"已经删除第3个元素，删除元素为%d\n"</span>,e);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"位序i不合法，删除失败\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第10天</title>
    <url>/2020/03/27/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC10%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>subsidy n.补助金，津贴</li>
<li>utilize vt.利用</li>
<li>abuse v./n.滥用；虐待</li>
<li>virtue n.贞操；美德；优点</li>
<li>hinder a.后面的，后方的v. （from）阻止，妨碍</li>
<li>hindrance n.妨害，障碍；障碍物</li>
<li>explicit a.明确的，显然的，坦率的</li>
<li>inherit v.继承（金钱等），遗传</li>
<li>heir n.继承人</li>
<li>inherent a.与生俱来的，内在的，固有的</li>
<li>ideology n.意识形态，思想意识<a id="more"></a></li>
<li>immune a.免疫的，有免疫力的，不受影响的</li>
<li>limp a.无力的，松软的</li>
<li>manual n.手册，指南a.手的，手工的</li>
<li>manipulate vt.操纵，熟练操作，巧妙控制</li>
<li>board n.木板；董事会v.上船（车、飞机等）</li>
<li>obese a.肥胖的</li>
<li>maintain v.维持；继续；维修；主张；供养</li>
<li>merit n.优点，价值，功效； v.值得，应得</li>
<li>misery n.痛苦，悲惨，不幸</li>
<li>occasional a.偶尔的，临时的；特殊场合的</li>
<li>motivate vt.成为…的动机；给动机，激励</li>
<li>pledge v.誓约，保证，发誓</li>
<li>remote a.远的，偏僻的，微小的</li>
<li>emotion n.情绪，情感</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>I shall define him as an individual who has elected as his primary duty and pleasure in life the activity of thinking in a Socratic way about moral problems.（2006翻译第一题）</p>
<ol>
<li>define…a… 把.定为…</li>
<li>elect…as… 将…选作为…、将.当作…</li>
</ol>
<p>译：我将知识分子定义为这样的一个人，他将以苏格拉底式的方式对于道德问题进行思考的活动当作他人生中首要的责任和乐趣。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第9天</title>
    <url>/2020/03/26/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC9%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>climax n.顶点，高潮v.达到巅峰</li>
<li>attribute v.（to）归因于，归属于</li>
<li>drought n.旱灾，干旱，缺乏</li>
<li>temptation n.引诱，诱惑，诱惑物</li>
<li>league n.联盟；社团v.结盟</li>
<li>curricula n.课程，总课程</li>
<li>diploma n.毕业文凭，学位证书；奖状；公文</li>
<li>exceed v.超过，胜过</li>
<li>inspiration n.灵感，鼓舞，激励</li>
<li>excel v.胜过其他，擅长，胜过，优于</li>
<li>domain n.领土，领域；范围<a id="more"></a></li>
<li>dominant a.统治的，支配的</li>
<li>dominate v.支配，影响</li>
<li>predominant a.主要的，占主导地位的；占优势的</li>
<li>prominent a.突起的；杰出的</li>
<li>eminent a.显赫的；优良的</li>
<li>drain vi.排水；流干，耗尽n.排水；下水道</li>
<li>drown v.（使）溺死，（使）淹没</li>
<li>execute v.执行死刑；执行，实行</li>
<li>executive a.执行的，实施的n.总经理，行政负责人</li>
<li>interference n.干扰，冲突；干涉；妨碍，打扰</li>
<li>intersection n.横断，交叉；十字路口</li>
<li>exile vt./n.放逐，流放</li>
<li>fleet n.舰队；车队a.快速的</li>
<li>gamble n./v.赌博，投机，冒风险</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>The panel has not yet reached agreement on a crucial question，however，whether to recommend legislation that would make it a crime for private funding to be used for human cloning.（1999阅读）</p>
<ol>
<li>panel（小组）</li>
<li>recommend（推荐，建议）</li>
<li>legislation（立法）</li>
<li>cloning（克隆）</li>
</ol>
<p>翻译：然而，该小组还没有就是否建议立法这一关键问题达成一致，此项立法将会使私人基金用于克隆人的行为列为犯罪行为。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第8天</title>
    <url>/2020/03/25/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC8%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>wedge n.楔子；楔形物v.楔入；挤进</li>
<li>pledge v./n.发誓，保证</li>
<li>rigid a.僵硬的；严格的，死板的</li>
<li>shed n.棚v.流出；散发；脱落</li>
<li>shade n.遮阳；遮棚v.遮蔽</li>
<li>sore a.疼痛的；痛心的n.痛处，疮口</li>
<li>span n.跨度，一段距离；一段时间</li>
<li>stick n.棍，手杖v.刺，戳；粘住，粘贴</li>
<li>sticky a.黏性的，泥泞的；棘手的</li>
<li>surpass vt.超过，胜过</li>
<li>surplus n.过剩；余额，余款 a.过剩的<a id="more"></a></li>
<li>survey v.俯瞰，全面审视；社会调查；勘定，勘测</li>
<li>supervise v.管理，监督</li>
<li>sway n./v.摇摆</li>
<li>tangle v./n.纠缠，混乱</li>
<li>inhabit v.居住于，存在于，栖息于</li>
<li>temper vt.使回火；调和，使缓和n.韧度；脾气</li>
<li>temperament n.气质；性格，性情</li>
<li>thermal a.热的，热力的</li>
<li>advance v.前进，进展； n.前进，预付</li>
<li>toil n./v.辛苦，苦工</li>
<li>trip n.（短途）旅行；摔倒，绊倒 v.失足；绊倒</li>
<li>versus prep. （在诉讼、比赛等中）与…对阵</li>
<li>witness n.目击证人v.目击；见证</li>
<li>embark vt.使上船，从事，着手；</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>While warnings are often appropriate and necessary-the dangers of drug interactions，for example-and many are required by state or federal regulations，it isn’t clear that they actually protect the manufacturers and sellers from liability if a customer is injured.（1999阅读）</p>
<ol>
<li>warning（警告）</li>
<li>appropriate（恰当的）</li>
<li>interaction（相互影响）</li>
<li>drug interactions（药物相互反应）</li>
<li>manufacturer（制造商）</li>
<li>liability（责任）</li>
<li>injured（受伤的）</li>
</ol>
<p>译：尽管警告通常是恰当且必要的-例如（警告）药物相互反应的危险-并且许多警告是州政府或联邦政府条例所要求的，然而并不清楚的是倘若顾客受伤，这些警告实际上可以保护制造商同经销商免于责任。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第7天</title>
    <url>/2020/03/24/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC7%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>board n.木板；<strong>董事会</strong>  v.上船（车、飞机等）</li>
<li>obese a.肥胖的</li>
<li>maintain v.维持；继续；维修；主张；供养</li>
<li>merit n.优点，价值，功效； v.值得，应得</li>
<li>misery n.痛苦，悲惨，不幸</li>
<li>occasional a.偶尔的，临时的；特殊场合的</li>
<li>opaque a.不透明的；晦涩难懂的</li>
<li>notorious a.臭名昭著的，声名狼藉的</li>
<li>optional a.可以任选的，随意的，非强制的</li>
<li>participate v.参与，参加（in）</li>
<li>oxygen n.氧，氧气<a id="more"></a></li>
<li>pathetic a.可怜的，悲惨的</li>
<li>performance n.履行，执行，表演，演出，性能</li>
<li>ponder v.掂量，衡量；考虑，沉思</li>
<li>prompt v.促进a.敏捷的</li>
<li>promote vt.促进，促销；提升</li>
<li>physical a.物质的，身体的</li>
<li>motive a.运动的n.动机，目的</li>
<li>motivate vt.成为 的动机；给动机，激励</li>
<li>pledge v.誓约，保证，发誓</li>
<li>remote a.远的，偏僻的，微小的</li>
<li>emotion n.情绪，情感</li>
<li>recreation n.娱乐，消遣</li>
<li>momentum n.动量；动力，要素</li>
<li>sarcastic a.讽刺的</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>There will be television chat shows hosted by robots，and cars with pollution monitors that will disable them when they offend.（2001翻译第一题）</p>
<ol>
<li>television chat show（电视ii栏目）</li>
<li>host（主持）</li>
<li>pollution monitors（污染监控器）</li>
<li>offend（反，冒犯）</li>
</ol>
<p>译：将会有由机器人主持的电视谈话栏目，还将会有安装了污染监控器的车辆，当车辆违反污染规定时，污染监控器将会使车辆不能行驶。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第6天</title>
    <url>/2020/03/24/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC6%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>hale a.强壮的， （尤指老人）健壮的</li>
<li>emotion n.情绪，情感，感情</li>
<li>hinder a.后面的，后方的 v.阻止，妨碍（from）</li>
<li>hindrance n.妨害，障碍；障碍物</li>
<li>explicit a.明确的，显然的，坦率的</li>
<li>inherit v.继承（金钱等） ，遗传</li>
<li>heir n.继承人</li>
<li>inherent a.与生俱来的，内在的，固有的</li>
<li>holy a.神圣的，圣洁的</li>
<li>horizon n.地平线；眼界，见识<a id="more"></a></li>
<li>orient n.东方，亚洲v.使朝东；为…定位</li>
<li>atiguev./n.使疲劳</li>
<li>hound n.猎狗；卑鄙的人vt.用猎狗追，追逐</li>
<li>feasible a.可行的，切实可行的，行得通的</li>
<li>generous a.慷慨的，宽宏大量的</li>
<li>gratitud n.感激，感谢</li>
<li>kinship n.亲属关系</li>
<li>illegal a.不合法的，非法的</li>
<li>lofty a.高耸的；崇高的；高傲的</li>
<li>ideology n.意识形态，思想意识</li>
<li>immune a.免疫的，有免疫力的，不受影响的</li>
<li>limp a.无力的，松软的</li>
<li>manual n.手册，指南a.手的，手工的</li>
<li>manipulate vt.操纵，熟练操作，巧妙控制</li>
<li>permanent a.持久的，永久的</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>To filter out what is unique from what is shared might enable us to understand how complex cultural behavior arose and what guides it in evolutionary or cognitive terms.（2012翻译第三题）</p>
<ol>
<li>evolutionary（进化）</li>
<li>cognitive（认知）</li>
<li>what is unique; 独有（特征）</li>
<li>what is shared; 共有（特征）</li>
</ol>
<p>译：从共有（特征）中滤出独有（特征），这使我们得以理解复杂的文化行为如何产生，并从进化或认知角度理解什么引导了它的走向。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第5天</title>
    <url>/2020/03/24/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC5%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>diploma n.毕业文凭，学位证书；奖状；公文</li>
<li>exceed v.超过，胜过</li>
<li>inspiration n.灵感，鼓舞，激励</li>
<li>excel v.胜过其他，擅长，胜过，优于</li>
<li>domain n.领土，领域；范围</li>
<li>dominant a.统治的，支配的</li>
<li>handicap vt./n.妨碍，障碍，不利条件</li>
<li>harness n.马具；挽具 v.驾驭，治理，利用</li>
<li>pessimistic a.悲观的，悲观主义的</li>
<li>hover v./n.盘旋，徘徊；犹豫<a id="more"></a></li>
<li>precise a.精确的</li>
<li>instant a.瞬间的n.瞬间，顷刻</li>
<li>constantly adv.永恒地；不断地</li>
<li>intrude vi.闯入，侵入 vt.把（思想）强加于人</li>
<li>enterprise n.进取心，事业心；事业，企业</li>
<li>thrift n.繁荣，兴旺；节俭</li>
<li>reclaim vt.要求归还，收回；开垦荒地</li>
<li>paradoxical a.矛盾的，反论的；荒谬的</li>
<li>overwhelm v.压倒；淹没，覆盖</li>
<li>overwhelming a.势不可挡的，压倒一切的</li>
<li>plausible a.似乎有道理的；似乎可能的；似乎真实的</li>
<li>applaud vt.鼓掌欢迎，称赞</li>
<li>laud vt./n.称赞，赞美</li>
<li>ultimate a.最后的，最终的</li>
<li>consistent a.始终如一的； （with）一致的，符合的</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>in the early industrialized countries of Europe the process of industrialization-with all the far-reaching changes in social patterns that followed-was spread over nearly a century，whereas nowadays a developing nation may undergo the same process in a decade or so.（2000翻译第四题）</p>
<ol>
<li>industrialized countries（工业化的国家）</li>
<li>process of industrialization（工业化进程）</li>
<li>far-reaching changes-（影响深远的变革）</li>
<li>social patterns（社会模式，社会结构）</li>
<li>spread over（延续，持续）</li>
<li>undergo（经历，完成）</li>
</ol>
<p>译：在欧洲早期工业化的国家中，其工业化进程—以及随之而来的在社会模式方面所有深远的变革—持续了近一个世纪，然而，现如今一个发展中国家在十年左右的时间里，有可能历经同样的过程</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>4-MyBatis动态SQL</title>
    <url>/2020/03/24/4-MyBatis%E5%8A%A8%E6%80%81SQL/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>MyBatis 的一个强大的特性之一就是它的动态 SQL 能力。也就是可以根据不同的条件拼接SQL语句。以下是动态SQL在XML中支持的几种元素</p>
<ol>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
<li>bind</li>
</ol>
<p>优点：使用动态SQL可以选择查询内容（即可为空），而不使用动态SQL时，只有同时输入所有条件时，才能查出正确结果</p>
<a id="more"></a>
<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不使用动态SQL --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByNameAndPassword"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user</span><br><span class="line">	where user_name = #&#123;name&#125; and password = #&#123;password&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- if实现动态查询 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByPhoneOrEmail"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span> select * from user where 1=1 </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> and phone = #&#123;phone&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> and email = #&#123;email&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- if+where --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByPhoneOrEmail"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span> select * from user </span><br><span class="line">	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> and phone = #&#123;phone&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> and email = #&#123;email&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- if实现动态更新 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUserByIdSelective"</span>&gt;</span> update user set</span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> phone = #&#123;phone&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> email = #&#123;email&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	id = #&#123;id&#125; where id = #&#123;id&#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- if+set --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- set标签可以去掉末尾的逗号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUserByIdSelective"</span>&gt;</span> update user </span><br><span class="line">	<span class="tag">&lt;<span class="name">set</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> phone = #&#123;phone&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> email = #&#123;email&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">set</span>&gt;</span> where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- if实现动态插入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span>&gt;</span> insert into user(user_name,phone,email </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null and password != ''"</span>&gt;</span> ,password <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	) values(#&#123;userName&#125;,#&#123;phone&#125;,#&#123;email&#125; </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null and password != ''"</span>&gt;</span> ,#&#123;password&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span>)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="choose"><a href="#choose" class="headerlink" title="choose"></a>choose</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- choose实现动态查询 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByPhoneOrEmail"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span> select * from user where 1=1</span><br><span class="line">	<span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> and phone = #&#123;phone&#125; <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> and email = #&#123;email&#125; <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">otherwise</span>&gt;</span> and 1 = 2 <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">choose</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<ol>
<li>if标签是与(and)的关系，而 choose 是或(or)的关系。</li>
<li>使用choose元素可以实现类似if…else…的逻辑</li>
</ol>
<h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><ol>
<li>trim元素可以实现where和set元素的功能</li>
<li>trim元素的属性，都在trim元素包含内容时起作用：<ol>
<li>prefix：给内容增加该属性指定的前缀</li>
<li>prefixOverrides：把内容中匹配的前缀字符串去掉</li>
<li>suffix：给内容增加该属性指定的后缀</li>
<li>suffixOverrides：把内容中匹配的后缀字符串去掉如：逗号）</li>
</ol>
</li>
<li>作用：<ol>
<li>rim元素的主要功能是可以在自己包含的内容前加上某些前缀，也可以在其后加上某些后缀，与之对应的属性是prefix和suffix；</li>
<li>可以把包含内容的首部某些内容覆盖，即忽略，也可以把尾部的某些内容覆盖，对应的属性是prefixOverrides和suffixOverrides；<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用trim实现where功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByPhoneOrEmail"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span> select * from user </span><br><span class="line">	<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"where"</span> <span class="attr">prefixOverrides</span>=<span class="string">"and|or"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> and phone = #&#123;phone&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> and email = #&#123;email&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- trim实现set功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUserByIdSelective"</span>&gt;</span> update user </span><br><span class="line">	<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"set"</span> <span class="attr">suffixOverrides</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null and !phone.equals('')"</span>&gt;</span> phone = #&#123;phone&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null and email != ''"</span>&gt;</span> email = #&#123;email&#125;, <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">	where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h2 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h2><p>foreach各个属性的含义：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">collection</td>
<td align="left">必填，值为要迭代循环的属性名</td>
</tr>
<tr>
<td align="left">item</td>
<td align="left">变量名，值为从迭代对象中取出的每一个值</td>
</tr>
<tr>
<td align="left">index</td>
<td align="left">索引的属性名，在遍历集合、数组时为当前索引值，当遍历Map时该值为Map的key值</td>
</tr>
<tr>
<td align="left">open</td>
<td align="left">整个循环内容开头的字符串</td>
</tr>
<tr>
<td align="left">close</td>
<td align="left">整个循环内容结尾的字符串</td>
</tr>
<tr>
<td align="left">separator</td>
<td align="left">每次循环的分隔符</td>
</tr>
</tbody></table>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foreach实现批量查询 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当参数为List集合时，collection取值为list</span></span><br><span class="line"><span class="comment">	当参数为数组时，collection取值为array</span></span><br><span class="line"><span class="comment">	当参数为Map类型时，collection取值默认情况下为_parameter</span></span><br><span class="line"><span class="comment">	也可以使用@Param注解指定名字，collection取值为该注解指定的名字</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUsersByIdList"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user where id in</span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">		#&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- foreach实现批量插入 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;insert id="insertUsers" useGeneratedKeys="true" keyProperty="id"&gt; 返回所有记录的主键--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUsers"</span>&gt;</span></span><br><span class="line">	insert into user(user_name,password,phone,email)</span><br><span class="line">	values</span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"user"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">		(#&#123;user.userName&#125;, #&#123;user.password&#125;,#&#123;user.phone&#125;, #&#123;user.email&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- foreach实现动态更新 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUserByMap"</span>&gt;</span></span><br><span class="line">	update user set</span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"_parameter"</span> <span class="attr">index</span>=<span class="string">"key"</span> <span class="attr">item</span>=<span class="string">"value"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">		$&#123;key&#125; = #&#123;value&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模糊查询 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- bind可以使用OGNL表达式创建一个变量并将其绑定到上下文中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserLike"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">"userName"</span> <span class="attr">value</span>=<span class="string">"'%' + name + '%'"</span>/&gt;</span></span><br><span class="line">	select * from user where user_name like #&#123;userName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第4天</title>
    <url>/2020/03/24/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC4%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>estate n.地产，不动产；个人财产</li>
<li>blur n.模糊不清的事物，污点； v.使模糊，玷污</li>
<li>statement n.陈述，声明</li>
<li>overstate v.夸张陈述</li>
<li>statesman n.政治家</li>
<li>candidate n.候选人，候补者</li>
<li>statistics n.统计，统计学</li>
<li>cautious a.谨慎的，十分小心的</li>
<li>status n.地位，身份；情形，状况</li>
<li>constitute v.组成，构成；建立政府；制定法律<a id="more"></a></li>
<li>statute n.法令，法规</li>
<li>constituent a.组成的，构成的n.成分；选民</li>
<li>characteristic a.特有的，独特的； n.特征，特性</li>
<li>institute v.it，设置n.学会，学院</li>
<li>distinguish v.区别，辨别，辨认出，使杰出</li>
<li>substitute n.代替者，替身，代用品v.代替，替换（for）</li>
<li>superstition n.迷信</li>
<li>excursion n.短途旅行，游览；离题</li>
<li>cursory a.匆忙的；粗略的，草率的</li>
<li>precursor n.先驱，先锋</li>
<li>current n.电流，水流；潮流，趋势 a.流通的；当前的</li>
<li>incur v.招致，招惹</li>
<li>occurrence [a’knrens]n.发生；事件</li>
<li>recur v.（尤指不好的事）-再发生；重现</li>
<li>intercourse n.交往，交际；</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>But his primary task is not to think about the moral code，which governs his activity，any more than a businessman is expected to dedicate his energies to an exploration of rules of conduct in business.（2006翻译第四题）</p>
<ol>
<li>moral code（道德准则）</li>
<li>dedicate to（致力于）</li>
<li>conduct（行为）</li>
</ol>
<p>译：但是普通科学家的主要任务并非是思考约束其行为的道德准则，这正如人们不期望商人致力于商业中行为规则的探索</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法之主从复合句4</title>
    <url>/2020/03/23/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%90%88%E5%8F%A54/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="状语从句"><a href="#状语从句" class="headerlink" title="状语从句"></a>状语从句</h2><table>
<thead>
<tr>
<th align="left">状语从句类型</th>
<th align="left">常用连词</th>
<th align="left">特殊引导词</th>
</tr>
</thead>
<tbody><tr>
<td align="left">时间状语从句</td>
<td align="left">when, while, as,before, long before,after, since, till, until,not until, as soon as,once</td>
<td align="left">1.时间名词和短语：the moment, the instant 瞬间,the minute, the day, next time, every time，by the time, each time <br>2.副词：instantly, immediately, directly 不久，立即 <br>3.固定搭配的连词：no sooner…than 一…就,hardly…when 刚…就, scarcely…when 几乎没有…的时候(倒装)</td>
</tr>
<tr>
<td align="left">地点状语从句</td>
<td align="left">where</td>
<td align="left">wherever, anywhere, everywhere</td>
</tr>
<tr>
<td align="left">原因状语从句</td>
<td align="left">because, as, for,since</td>
<td align="left">seeing that, considering that, now that, given that, in that, in as much as 既然，由于, in so much as 由于   介 词 because of, due to, owing to, given, considering</td>
</tr>
<tr>
<td align="left">目的状语从句</td>
<td align="left">so that, such that, in order that</td>
<td align="left">lest（唯恐）, for fear that, in case, in hope that, on purpose that, for the purpose that, to the end that（为…起见）等</td>
</tr>
<tr>
<td align="left">结果状语从句</td>
<td align="left">so that, so…that, such…that</td>
<td align="left">such that, to the degree that, to the extent that, to such a degree that, to such an extent that 等</td>
</tr>
<tr>
<td align="left">条件状语从句</td>
<td align="left">if, unless, whether</td>
<td align="left">suppose, supposing that, providing that, provided,(注意 supposed，provide 不用作条件从句的连词)on condition that, so long as, as long as, only if只要..就</td>
</tr>
<tr>
<td align="left">让步状语从句</td>
<td align="left">although, though, even though, even if</td>
<td align="left">while, as, whatever, whoever, wherever, whichever, whenever, no matter …,whether…or…,however 介词 for all, in spite of, despite</td>
</tr>
<tr>
<td align="left">比较状语从句</td>
<td align="left">as, than</td>
<td align="left">the more…the more…, just as …as/so…, not so/as.. as, A is to B what/as C is to D, no more…than, not A so much as B, not so much A as B</td>
</tr>
<tr>
<td align="left">方式状语从句</td>
<td align="left">as, the way</td>
<td align="left">As if, as though, in the same way</td>
</tr>
<tr>
<td align="left"><a id="more"></a></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<ol>
<li>as:<ol>
<li>时间状语从句：随着</li>
<li>原因状语从句：因为</li>
<li>让步状语从句：虽然</li>
<li>比较状语从句：as…as +从句</li>
<li>方式状语从句：正如</li>
<li>prep.作为</li>
<li>各种搭配 refer to …as等等</li>
</ol>
</li>
<li>since<ol>
<li>原因状语从句：既然</li>
<li>时间状语从句：自从</li>
<li>adv.自那之后</li>
<li>prep. since than 自那之后</li>
<li>因为</li>
</ol>
</li>
<li>while<ol>
<li>时间状语从句：当</li>
<li>让步状语从句<ol>
<li>句首：虽然</li>
<li>句中：但是</li>
<li>表对比：然而</li>
</ol>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法之主从复合句3</title>
    <url>/2020/03/23/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%90%88%E5%8F%A53/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="定语从句续"><a href="#定语从句续" class="headerlink" title="定语从句续"></a>定语从句续</h2><ol>
<li>He referred me to some reference books with which I am not very familiar.—&gt;他让我查阅一些我不太熟悉的参考书。<ol>
<li>refer sb to sth 指引，建议</li>
<li>refer … to sb 推荐=recommend</li>
<li>refer to 谈及，涉及</li>
<li>refer to … as 把…看做</li>
<li>sb be familiar with sth 某人熟悉某物</li>
<li>sth be familiar to sb 某物对某人来说是熟悉的</li>
<li>reference books 参考书</li>
</ol>
</li>
<li>It’s theory to which many economists subscribe, but in practice it often leaves railroads in the position of determining which companies will flourish and which will fail.—&gt;许多经济学家同意这个理论，但实际上，它常常使铁路公司处于决定哪些公司会繁荣，哪些公司会失败的地位<ol>
<li>subscribe v.订阅，捐款</li>
<li>subscribe to 订阅，订购，同意</li>
<li>flourish=boom=prosper=thrive 繁荣<a id="more"></a></li>
</ol>
</li>
<li>Television is one of the means by which these feelings are created and conveyed …—&gt;电视是创造和传达这些情感的手段之一<ol>
<li>convery=deliver 传递</li>
<li>by the means 通过这种方式</li>
</ol>
</li>
<li>Yet it is hard to imagine that the merger of a few oil firms today could re-create the same threats to competition that were feared nearly a century ago in the US, when the Standard Oil Trust was broken up.—&gt;然而，很难想象如今几家石油公司的合并，会重塑近一个世纪前美国标准石油信托(Standard Oil Trust)被拆分时人们所担心的那种竞争威胁。<ol>
<li>fear 担心，害怕</li>
<li>break up 破产</li>
<li>be break up 被迫破产</li>
</ol>
</li>
<li>As a result, the modern world is increasingly populated by intelligent gizmos whose presence we barely notice but whose universal existence has removed much human labor.—&gt;结果是，现代世界被越来越多的智能小发明所填满，我们几乎注意不到它们的存在，但它们的普遍存在已经消除了许多人类劳动<ol>
<li>be populated by 被…填满了</li>
<li>gizmos 小机器，小设备</li>
<li>presence 出现，呈现</li>
<li>universal=common 普通的</li>
<li>labor n.劳动，劳工</li>
</ol>
</li>
<li>Changes in the social structure may indirectly affect juvenile crime rates. For example, changes in the economy that lead to fewer job opportunities for youth and rising unemployment make gainful employment increasingly difficult to obtain.—&gt;社会结构的变化可能会间接影响青少年犯罪率。例如，经济的变化导致年轻人就业机会减少，失业率上升，这使得获得有收入的工作越来越难。<ol>
<li>indirectly 间接地</li>
<li>juvenile 青少年 =teenagers=adolescent</li>
<li>youth 青年，年轻人</li>
<li>gainful employment 有收益的工作</li>
</ol>
</li>
<li>Some attributed virtually every important cultural achievement to the inventions of a few, especially gifted peoples that, according to diffusionists, then spread to other cultures.—&gt;有些人把几乎每一项重要的文化成就都归功于少数人的发明，特别是天才民族的发明。根据传播论者的说法，这些发明后来传播到其他文化。<ol>
<li>attribute/ascribe  A to B把A归因于B</li>
<li>virtually 实际上的，几乎，虚拟的</li>
<li>diffusionist 传播论者<ol>
<li>diffuse v.传播（spread）；宣泄，缓解（release）</li>
</ol>
</li>
<li>gift n.天赋（talent），礼物</li>
</ol>
</li>
<li>Apart from the fact that twenty-seven acts of Parliament govern the terms of advertising, no regular advertiser dare promote a product that fails to live up to the promise of his advertisement.—&gt;除了议会有27件法案来规范广告的条件，没有任何一个正式的广告商敢于推销一种商品却不能遵守其在广告中的承诺<ol>
<li>apart from 除了</li>
<li>acts 法案</li>
<li>Parliament 议会</li>
<li>govern 控制（control）规范</li>
<li>term 术语</li>
<li>regular a.常规的，正规的</li>
<li>dare ①实义动词：敢 ②情态动词</li>
<li>live up to 符合遵守，不辜负</li>
<li>promote<ol>
<li>促进，提高 enhance improve</li>
<li>推销，促销，营销</li>
<li>升职</li>
<li>cope with = deal with 处理</li>
<li>fail to 没能够</li>
</ol>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第3天</title>
    <url>/2020/03/23/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC3%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>comprehension n.理解；包含</li>
<li>concrete n.混凝土a.具体的；实质性的 v.凝固；用混凝土修筑</li>
<li>recreate v.（使）休养，娱乐 重建，重造</li>
<li>convince vt.使确信，使信服（of）</li>
<li>convincing a.令人信服的</li>
<li>indict v.[法]控告，起诉</li>
<li>abstract a.抽象的 n.摘要</li>
<li>assault v.攻击，袭击</li>
<li>cooperate vi.合作，协作（with）</li>
<li>collaborate v.合作；勾结<a id="more"></a></li>
<li>elaborate v.精心制作；详细阐述 a.精心制作的；详细阐述的</li>
<li>operate v.操作，做手术；经营，运转；运算</li>
<li>proceed v.进行，继续下去，发生</li>
<li>pursuit n.追赶；追求，职业</li>
<li>rebell v.反抗，反叛，起义</li>
<li>corporate a.团体的；公司的，法人的</li>
<li>simulate v.模仿，模拟，冒充</li>
<li>tactic n.策略，战略（=strategy）</li>
<li>tentative a.实验性的，暂时的，犹豫不决的</li>
<li>declare v.宣告，声明</li>
<li>clarify v.澄清，阐明</li>
<li>decorate vt.装饰，装潢</li>
<li>alienate v.使疏远，离间</li>
<li>notable a.值得注意的，显著的</li>
<li>convict v.证明…有罪，宣判…有罪  n.罪犯</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>An invisible border divides those arguing for computers in the classroom on the behalf of students’career prospects and those arguing for computers in the classroom for broader reasons of radical educational reform.（1999阅读）</p>
<ol>
<li>invisible（隐形的，无形的）</li>
<li>border（边界，界限）</li>
<li>divide A and B（分为A与B）</li>
<li>argue for（支持）</li>
<li>on the behalf of（代表，基于）</li>
<li>career prospects（就业前景）</li>
<li>radical educational reform（激进的教育改革）</li>
</ol>
<p>译：一条隐形的边界将人们分为两类，一类是基于学生职业前景的考虑而支持计算机用于课堂，另一类是因为激进的教育改革这种更加宽泛的理由而支持计算机用于课堂。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>考研毛中特2</title>
    <url>/2020/03/22/%E8%80%83%E7%A0%94%E6%AF%9B%E4%B8%AD%E7%89%B92/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="毛泽东思想思维导图"><a href="#毛泽东思想思维导图" class="headerlink" title="毛泽东思想思维导图"></a>毛泽东思想思维导图</h2><p><img src="/2020/03/22/%E8%80%83%E7%A0%94%E6%AF%9B%E4%B8%AD%E7%89%B92/5.png" alt></p>
<a id="more"></a>
<h2 id="毛泽东思想定义："><a href="#毛泽东思想定义：" class="headerlink" title="毛泽东思想定义："></a>毛泽东思想定义：</h2><p>毛泽东思想是在革命和建设的长期实践中，以毛泽东为主要代表的中国共产党人，根据马克思列宁主义基本原理，形成的适合中国情况的科学指导思想，是被实践证明了的关于中国革命和建设的正确的理论原则和经验总结，是中国共产党集体智慧的结晶。</p>
<ol>
<li>中共七大（1945年）</li>
<li>十一届六中全会（1981年）</li>
</ol>
]]></content>
      <categories>
        <category>考研毛中特</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>考研毛中特1</title>
    <url>/2020/03/22/%E8%80%83%E7%A0%94%E6%AF%9B%E4%B8%AD%E7%89%B91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>##毛中特学习方法</p>
<ol>
<li>框架复习法<ol>
<li>明确板块</li>
<li>区分概念</li>
<li>查缺补漏</li>
</ol>
</li>
<li>主线学习法<ol>
<li>清晰逻辑</li>
<li>线索记忆</li>
</ol>
</li>
<li>技巧法<ol>
<li>单选，多选题选项<a id="more"></a>
<h2 id="毛中特逻辑框架"><a href="#毛中特逻辑框架" class="headerlink" title="毛中特逻辑框架"></a>毛中特逻辑框架</h2><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/1.png" alt></li>
</ol>
</li>
</ol>
<h2 id="毛中特主线"><a href="#毛中特主线" class="headerlink" title="毛中特主线"></a>毛中特主线</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/3.png" alt></p>
<h2 id="马克主义中国化思维导图"><a href="#马克主义中国化思维导图" class="headerlink" title="马克主义中国化思维导图"></a>马克主义中国化思维导图</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2.png" alt></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>革命（1919-156）：反帝反封建反资本</p>
<p>新民主义革命：反帝反封建</p>
<p>社会主义革命：实现共产主义，公有制，没有剥削，反资</p>
<p>革命：地主推翻奴隶主，资本家推翻资本家，工人推翻资本家 （社会性质改变，称之为革命）</p>
<p>毛泽东思想的实践基础：革命+建设</p>
<p>中国特色社会主义的实践基础：改革+现代化建设</p>
<ol>
<li>为什么要马克思主义中国化：<ol>
<li>理论的需要：马克思主义</li>
<li>现实的需要：革命，建设，改革，现代化建设</li>
<li>两者具有相融性</li>
</ol>
</li>
<li>马克思主义中国化内涵：<ol>
<li>把马克思主义同中国具体实际和时代特征结合起来,运用马克思主义的立场、观点、方法研究和解决中国革命、建设、改革中的实际问题；<ol>
<li>立场：为人民服务</li>
<li>观点：唯物主义，辩证法</li>
</ol>
</li>
<li>总结和提炼中国革命、建设、改革的实践经验，从而认识和掌握客观规律，为马克思主义理论宝库增添新的内容；</li>
<li>就是运用中国人民喜闻乐见的民族语言来阐述马克思主义理论，使之成为具有中国特色、中国风格、中国气派的马克思主义。<ol>
<li>具有中国特色、中国风格、中国气派（相融性）</li>
</ol>
</li>
</ol>
</li>
<li>马克思主义中国化理论回答的问题/马克思主义是怎样中国化的？<ol>
<li>毛泽东思想：什么是马克思主义，怎样对待马克思主义</li>
<li>邓小平理论：什么是社会主义，怎样对待社会主义</li>
<li>三个代表重要思想：建设什么样的党，怎样建设党</li>
<li>科学发展观：实现什么样的发展，怎样发展</li>
<li>习近平新时代中国特色社会主义：坚持和发展什么样的中国特色社会主义，怎样建设和发展中国特色社会主义</li>
</ol>
</li>
<li>马克思主义中国化的量的理论成果：<ol>
<li>毛泽东思想（第一次相结合的理论成果）</li>
<li>中国特色社会主义理论体系（第二次相结合的理论成果）</li>
</ol>
</li>
<li>二者关系：<ol>
<li>来源：马克思主义</li>
<li>精髓：实事求是</li>
<li>目标：实现共产主义</li>
<li>立场：为人民服务</li>
</ol>
</li>
</ol>
<h2 id="马克思主义中国化的思维导图"><a href="#马克思主义中国化的思维导图" class="headerlink" title="马克思主义中国化的思维导图"></a>马克思主义中国化的思维导图</h2><p>思想体系的核心，精髓（实事求是）<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/4.png" alt></p>
<ol>
<li>马克思主义中国的精髓：实事求是<ol>
<li>实事：客观存在的事物</li>
<li>是：事物的规律</li>
<li>求：研究</li>
</ol>
</li>
<li>党的思想路线核心<ol>
<li>党的思想路线：一切从实际出发，理论联系实际，实事求是，在实践中检验和发展真理</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研毛中特</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第2天</title>
    <url>/2020/03/21/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC2%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>launch v.发射，发动，开展</li>
<li>mechanical a.机械的，呆板的</li>
<li>brace n.支柱，支架   v.支撑；振作精神；紧缚</li>
<li>initiative  a.创始的，起始的； n.主动精神</li>
<li>budget  n.预算v.做预算；谨慎花钱</li>
<li>partial  a.部分的，不完全的，偏袒的，偏爱的</li>
<li>bound  a.绑缚的  n.边界</li>
<li>illusion n.幻觉，错误的观念，错误的理解</li>
<li>purchase v.购买</li>
<li>abound  vi.大量存在， （in， with）充满，富于<a id="more"></a></li>
<li>enhance  v.提高，增强</li>
<li>abundant a.丰富的，充裕的</li>
<li>redundant a.冗余的</li>
<li>morality  n.道德，品行，美德</li>
<li>monotonous  a.单调的，无变化的</li>
<li>coupon  n.商家的优待券，赠券</li>
<li>vulnerable  a.易受攻击的，易受伤害的，脆弱的<ol>
<li>volunteer v.自愿</li>
</ol>
</li>
<li>insidious  a.潜伏的，隐患的，暗中为害的</li>
<li>cater v.备办食物；满足（需要），迎合</li>
<li>susceptible（to sth.） a.易受影响的，易受感动的</li>
<li>cause  n.原因；动机v.成为…的原因</li>
<li>subtle  a.精巧的，巧妙的，潜移默化的；不易察觉的</li>
<li>compare  v.比较；比喻</li>
<li>comparable  a.可比较的；比得上的</li>
<li>justify  v.证明 正当或有理，为..辩护</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>Scientists jumped to the rescue with some distinctly shaky evidence to the effect that insects would eat us up if birds failed to control them.（2010翻译第一题）</p>
<ol>
<li>shaky a.站不住脚的</li>
<li>shaky evidence 站不住脚的证据</li>
<li>to the effect 达到效果</li>
<li>eat up 吃光</li>
<li>distinctly adv. 明显地；无疑地，确实地</li>
</ol>
<p>译：科学家用一些很明显站不住脚的证据迅速赶来营救达到效果（想证明）：如果鸟类未能控制昆虫，那么昆虫会将人类吃光。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>文都20天词汇长难句复习第1天</title>
    <url>/2020/03/21/%E6%96%87%E9%83%BD20%E5%A4%A9%E8%AF%8D%E6%B1%87%E9%95%BF%E9%9A%BE%E5%8F%A5%E5%A4%8D%E4%B9%A0%E7%AC%AC1%E5%A4%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h2><ol>
<li>absurd a.不合理的，荒谬的</li>
<li>crucial a.至关重要的，决定性的</li>
<li>inevitable a.不可避免的，必然发生的</li>
<li>dread v/n.恐惧，害怕，担心</li>
<li>relieve v.减轻，解除，援救，救济</li>
<li>prosperous a.繁荣的，兴旺的</li>
<li>inadequate a.不足够的，不适当的</li>
<li>equality n.相等性，同等</li>
<li>equip v.装备，配备（+with）</li>
<li>primary a.最初的，初级的，首要的，主要的，基本的<a id="more"></a></li>
<li>ecology n.生态学，均衡系统</li>
<li>anonymous a.匿名的，无名的</li>
<li>advocate v.鼓吹，提倡  n.鼓吹者，提倡者；辩护者</li>
<li>vocal a.声音的，有声音的；歌唱的</li>
<li>evoke v.引起，唤起</li>
<li>allocate v.分配，分派</li>
<li>locate v.给…定位，查找…的地点；定居</li>
<li>provoke v.挑衅，激发，招惹</li>
<li>allowance n.补贴，零用钱；默许</li>
<li>allege v.宣称；（无根据地）断言</li>
<li>legend n.传说，传奇</li>
<li>dialect n.方言</li>
<li>neglect v/n.疏忽，遗漏</li>
<li>negligible a.忽略不计的，微不足道的</li>
<li>authorize v.授权，批准</li>
</ol>
<h2 id="长难句"><a href="#长难句" class="headerlink" title="长难句"></a>长难句</h2><p>But even more important，it was the farthest that scientists had been able to look into the past，for what they were seeing were the patterns and structures that existed 15 billion years ago.（1998翻译第一题）</p>
<ol>
<li>patterns（形状，样式）</li>
<li>structures（结构）</li>
</ol>
<p>译：但是更为重要的是，这是科学家能够观测到的最遥远的过去（景象），因为他正在看到的是存在于150亿年前的（宇宙云的）形状和结构。</p>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>3-MyBatis关联映射之鉴别器映射</title>
    <url>/2020/03/20/3-MyBatis%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84%E4%B9%8B%E9%89%B4%E5%88%AB%E5%99%A8%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h2><p>有时一个单独的数据库查询会返回很多种不同数据类型的结果集。discriminator鉴别器元素可以用来处理这种情况</p>
<a id="more"></a>
<p>域模型<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-20_223912.jpg" alt><br>数据库表<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-20_223935.jpg" alt></p>
<h2 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h2><p>Employee.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HourlyEmployee.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HourlyEmployee</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> rate;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SalariedEmployee.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SalariedEmployee</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其他类，文件"><a href="#其他类，文件" class="headerlink" title="其他类，文件"></a>其他类，文件</h2><p>EmployeeMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">findAllEmployee</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EmployeeMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.EmployeeMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.Employee"</span> <span class="attr">id</span>=<span class="string">"employeeMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--使用resultMap的extends属性来映射两个子类的属性--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.SalariedEmployee"</span> <span class="attr">id</span>=<span class="string">"SalariedMap"</span> <span class="attr">extends</span>=<span class="string">"employeeMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"salary"</span> <span class="attr">property</span>=<span class="string">"salary"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.HourlyEmployee"</span> <span class="attr">id</span>=<span class="string">"HourlyMap"</span> <span class="attr">extends</span>=<span class="string">"employeeMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"rate"</span> <span class="attr">property</span>=<span class="string">"rate"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--使用discriminator元素映射employee_type字段--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	discriminator元素常用的两个属性如下：</span></span><br><span class="line"><span class="comment">		column：该属性用于设置需要进行鉴别比较值的列</span></span><br><span class="line"><span class="comment">		javaType：该属性用于指定列的类型</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.Employee"</span> <span class="attr">id</span>=<span class="string">"selectMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">column</span>=<span class="string">"employee_type"</span> <span class="attr">javaType</span>=<span class="string">"java.lang.String"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"SE"</span> <span class="attr">resultMap</span>=<span class="string">"SalariedMap"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"HE"</span> <span class="attr">resultMap</span>=<span class="string">"HourlyMap"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllEmployee"</span> <span class="attr">resultMap</span>=<span class="string">"selectMap"</span>&gt;</span></span><br><span class="line">		select * from employee</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tset</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SqlSession session = MyBatisUtil.openSqlSession();</span><br><span class="line">		EmployeeMapper mapper = session.getMapper(EmployeeMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		System.out.println(mapper.findAllEmployee());</span><br><span class="line">		</span><br><span class="line">		session.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>3-MyBatis关联映射之一对多映射</title>
    <url>/2020/03/20/3-MyBatis%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84%E4%B9%8B%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h2><p>购物网站中用户和订单之间的一对多关系</p>
<a id="more"></a>
<p>域模型：<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-20_222635.jpg" alt></p>
<p>数据库表：<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-20_222820.jpg" alt></p>
<h2 id="两个实体类"><a href="#两个实体类" class="headerlink" title="两个实体类"></a>两个实体类</h2><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String userName;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Order&gt; orders = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	.......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Order.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他类，文件"><a href="#其他类，文件" class="headerlink" title="其他类，文件"></a>其他类，文件</h2><p>OrderMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace:映射器接口的全名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.OrderMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.Order"</span> <span class="attr">id</span>=<span class="string">"orderMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"order_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">property</span>=<span class="string">"price"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findOrderByUserId"</span> <span class="attr">resultMap</span>=<span class="string">"orderMap"</span>&gt;</span></span><br><span class="line">        select * from orders where user_id = #&#123;uid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>UserMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUsers</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//通过用户对象的id查询用户的属性和跟用户关联的订单属性</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserAndOrdersById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace:映射器接口的全名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 此映射会频繁用到，可以将其单独配置，后面可以直接通过id引用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 映射select语句 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsers"</span>  <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">           select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 映射一对多 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--extends属性可以实现结果映射的继承--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--ofType属性指定集合中元素的类型，必选项--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 一：嵌套的ResultMap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userAndOrdersMap"</span> <span class="attr">extends</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- collection映射集合类型  --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"orders"</span> <span class="attr">ofType</span>=<span class="string">"net.onest.entity.Order"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">resultMap</span>=<span class="string">"net.onest.mapper.OrderMapper.orderMap"</span>&gt;</span></span><br><span class="line">             </span><br><span class="line">         <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserAndOrdersById"</span> <span class="attr">resultMap</span>=<span class="string">"userAndOrdersMap"</span>&gt;</span></span><br><span class="line">        select u.id, u.user_name, u.password, o.id order_id, o.price from user u</span><br><span class="line">        left join orders o on u.id = user_id</span><br><span class="line">        where u.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 二：嵌套查询 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;resultMap type="net.onest.entity.User" id="userAndOrdersMap" extends="userMap"&gt;</span></span><br><span class="line"><span class="comment">        &lt;collection property="orders"</span></span><br><span class="line"><span class="comment">            ofType="net.onest.entity.Order"</span></span><br><span class="line"><span class="comment">            select="net.onest.mapper.OrderMapper.findOrderByUserId"</span></span><br><span class="line"><span class="comment">            column="&#123;uid=id&#125;"</span></span><br><span class="line"><span class="comment">            fetchType="eager"&gt;&lt;/collection&gt;</span></span><br><span class="line"><span class="comment">    &lt;/resultMap&gt;</span></span><br><span class="line"><span class="comment">    &lt;select id="findUserAndOrdersById" resultMap="userAndOrdersMap"&gt;</span></span><br><span class="line"><span class="comment">        select * from user where id = #&#123;id&#125;</span></span><br><span class="line"><span class="comment">    &lt;/select&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tset</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SqlSession sqlSession = MyBatisUtil.openSqlSession();</span><br><span class="line">		<span class="comment">//得到了映射器接口实现类的对象</span></span><br><span class="line">		UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//		List&lt;User&gt; users =  userMapper.findAllUsers();</span></span><br><span class="line"><span class="comment">//		System.out.println(users);</span></span><br><span class="line">		</span><br><span class="line">		System.out.println(userMapper.findUserAndOrdersById(<span class="number">1</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//关闭session</span></span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="对比两种方式"><a href="#对比两种方式" class="headerlink" title="对比两种方式"></a>对比两种方式</h2><ol>
<li>第一种方式属于“关联的嵌套结果映射“,即通过一次SQL查询根据表或指定的属性映射到不同的对象中</li>
<li>第二种方式属于“关联的嵌套查询”，利用简单的SQL语句，通过多次查询得到想要的结果，也可以实现延迟加载效果</li>
</ol>
]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>高数之微分方程</title>
    <url>/2020/03/19/%E9%AB%98%E6%95%B0%E4%B9%8B%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="一阶微分方程"><a href="#一阶微分方程" class="headerlink" title="一阶微分方程"></a>一阶微分方程</h2><h3 id="（一）可分离变量的微分方程"><a href="#（一）可分离变量的微分方程" class="headerlink" title="（一）可分离变量的微分方程"></a>（一）可分离变量的微分方程</h3><ol>
<li>方程形式：g(y)dy=f(x)dx</li>
<li>解法：两边同时积分</li>
</ol>
<h3 id="（二）齐次方程"><a href="#（二）齐次方程" class="headerlink" title="（二）齐次方程"></a>（二）齐次方程</h3><ol>
<li>方程形式：dy/dx=Φ(y/x)</li>
<li>解法：换元<ol>
<li>令u=y/x  则dy/dx=u+du/dx</li>
<li>代入原方程，即为可分离变量的微分方程，然后代回u=y/x</li>
</ol>
</li>
</ol>
<a id="more"></a>
<h3 id="（三）一阶线性微分方程"><a href="#（三）一阶线性微分方程" class="headerlink" title="（三）一阶线性微分方程"></a>（三）一阶线性微分方程</h3><ol>
<li>方程形式：dy/dx+p(x)y=Q(x)</li>
<li>解法：<ol>
<li>齐次线性方程的解法：Q(x)=0</li>
<li><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_223906.jpg" alt></li>
<li>非齐次线性方程的解法:</li>
<li><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_224005.jpg" alt></li>
</ol>
</li>
</ol>
<h3 id="（四）伯努利方程"><a href="#（四）伯努利方程" class="headerlink" title="（四）伯努利方程"></a>（四）伯努利方程</h3><ol>
<li>方程形式:<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_224717.jpg" alt></li>
<li>解法:令z=y^(1-n),即：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_224833.jpg" alt></li>
</ol>
<h2 id="可降阶的高阶微分方程"><a href="#可降阶的高阶微分方程" class="headerlink" title="可降阶的高阶微分方程"></a>可降阶的高阶微分方程</h2><h3 id="不显含-y-型的二阶微分方程"><a href="#不显含-y-型的二阶微分方程" class="headerlink" title="不显含 y 型的二阶微分方程"></a>不显含 y 型的二阶微分方程<img src="/2020/03/19/%E9%AB%98%E6%95%B0%E4%B9%8B%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/2020-03-19_224936.jpg" alt></h3><ol>
<li>令y’=p</li>
<li>y’’=p’<h3 id="不显含-x-型的二阶微分方程"><a href="#不显含-x-型的二阶微分方程" class="headerlink" title="不显含 x 型的二阶微分方程"></a>不显含 x 型的二阶微分方程<img src="/2020/03/19/%E9%AB%98%E6%95%B0%E4%B9%8B%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/2020-03-19_225028.jpg" alt></h3></li>
<li>令y’=p</li>
<li>y’’=p(dp/dy)  可推导出</li>
</ol>
<h2 id="高阶线性微分方程"><a href="#高阶线性微分方程" class="headerlink" title="高阶线性微分方程"></a>高阶线性微分方程</h2><ol>
<li>二阶线性常系数齐次微分方程<ol>
<li>形式：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_225419.jpg" alt></li>
</ol>
</li>
<li>二阶线性常系数非齐次微分方程<ol>
<li>形式：<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_225537.jpg" alt></li>
</ol>
</li>
</ol>
<h2 id="二阶线性微分方程的解法"><a href="#二阶线性微分方程的解法" class="headerlink" title="二阶线性微分方程的解法"></a>二阶线性微分方程的解法</h2><h3 id="二阶常系数齐次线性微分方程"><a href="#二阶常系数齐次线性微分方程" class="headerlink" title="二阶常系数齐次线性微分方程"></a>二阶常系数齐次线性微分方程</h3><ol>
<li>方程形式：y’’+py’+qy=0(p q为常数)</li>
<li>解法：<ol>
<li>写出特征方程 λ^2+pλ+q=0</li>
<li><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_230730.jpg" alt></li>
</ol>
</li>
</ol>
<h3 id="二阶常系数非齐次线性微分方程"><a href="#二阶常系数非齐次线性微分方程" class="headerlink" title="二阶常系数非齐次线性微分方程"></a>二阶常系数非齐次线性微分方程</h3><ol>
<li>方程形式:y’’+py’+qy=f(x)</li>
<li><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_230855.jpg" alt>时的特解<ol>
<li><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_231235.jpg" alt></li>
<li>k=0:<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_231505.jpg" alt></li>
<li>k=1:<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_231522.jpg" alt></li>
<li>k=2:<img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-19_231548.jpg" alt></li>
<li>通解=特征方程的解+f(x)的特解</li>
</ol>
</li>
</ol>
<h3 id="欧拉方程"><a href="#欧拉方程" class="headerlink" title="欧拉方程"></a>欧拉方程</h3><p>略</p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>3-MyBatis关联映射之一对一映射</title>
    <url>/2020/03/18/3-MyBatis%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84%E4%B9%8B%E4%B8%80%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h2><p>在某网络购物系统中，一个用户只能拥有一个购物车，用户与购物车的关系可以设计为一对一关系</p>
<a id="more"></a>
<p>域模型<br>![](<a href="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-7-7" target="_blank" rel="noopener">https://gitee.com/LYmystery/PicGo/raw/master/image/2020-7-7</a> 184414.png)</p>
<p>数据库表<br>![](<a href="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-7-7" target="_blank" rel="noopener">https://gitee.com/LYmystery/PicGo/raw/master/image/2020-7-7</a> 184427.png)</p>
<h2 id="两个实体"><a href="#两个实体" class="headerlink" title="两个实体"></a>两个实体</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String userName;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="keyword">private</span> ShoppingCart shoppingCart;</span><br><span class="line">	.....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShoppingCart</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> userId;</span><br><span class="line">	.......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他类，文件"><a href="#其他类，文件" class="headerlink" title="其他类，文件"></a>其他类，文件</h2><p>ShoppingCartMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ShoppingCartMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertShoppingCart</span><span class="params">(ShoppingCart shoppingCart)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ShoppingCartMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace:映射器接口的全名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.ShoppingCartMapper"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.ShoppingCart"</span> <span class="attr">id</span>=<span class="string">"shoppingCartMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"cart_id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">property</span>=<span class="string">"price"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertShoppingCart"</span>&gt;</span></span><br><span class="line">		insert into shopping_cart(price,user_id) value(#&#123;price&#125;,#&#123;userId&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findShoppingCartByUserId"</span> <span class="attr">resultMap</span>=<span class="string">"shoppingCartMap"</span>&gt;</span></span><br><span class="line">		select * from shopping_cart where user_id = #&#123;uid&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>UserMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="comment">// 关联查询映射</span></span><br><span class="line"><span class="comment">//	public List&lt;User&gt; findUserAndShoppingCartById(int id);</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserAndShoppingCartById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserAndShoppingCartById2</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserAndShoppingCartById3</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserAndShoppingCartById4</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace:映射器接口的全名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 结果映射 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span> <span class="attr">parameterType</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">    	insert into user(user_name,password) value(#&#123;userName&#125;,#&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 一对一关联映射 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 一：自动映射（给字段起别名） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserAndShoppingCartById"</span> <span class="attr">resultType</span>=<span class="string">"net.onest.entity.User"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 连接查询 --&gt;</span></span><br><span class="line">        select u.id, u.user_name userName, u.password,</span><br><span class="line">        s.cart_id "shoppingCart.id",</span><br><span class="line">        s.price "shoppingCart.price"</span><br><span class="line">        from user u</span><br><span class="line">        left outer join shopping_cart s</span><br><span class="line">        on u.id = s.user_id</span><br><span class="line">        where u.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 二：使用结果映射（resultMap） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userAndShoppingCartMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"cart_id"</span> <span class="attr">property</span>=<span class="string">"shoppingCart.id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">property</span>=<span class="string">"shoppingCart.price"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserAndShoppingCartById2"</span> <span class="attr">resultMap</span>=<span class="string">"userAndShoppingCartMap"</span>&gt;</span></span><br><span class="line">        select u.id, u.user_name, u.password, s.cart_id, s.price from user u</span><br><span class="line">        left outer join shopping_cart s on u.id = s.user_id</span><br><span class="line">        where u.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 三：使用resultMap+association --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--映射复杂类型--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userAndShoppingCartMap3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"shoppingCart"</span> <span class="attr">resultMap</span>=<span class="string">"net.onest.mapper.ShoppingCartMapper.shoppingCartMap"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;association property="shoppingCart" &gt;</span></span><br><span class="line"><span class="comment">			&lt;id column="cart_id" property="id" /&gt;</span></span><br><span class="line"><span class="comment">			&lt;result column="price" property="price" /&gt;</span></span><br><span class="line"><span class="comment">		&lt;/association&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserAndShoppingCartById3"</span> <span class="attr">resultMap</span>=<span class="string">"userAndShoppingCartMap3"</span>&gt;</span></span><br><span class="line">        select u.id, u.user_name, u.password, s.cart_id, s.price from user u</span><br><span class="line">        left outer join shopping_cart s on u.id = s.user_id</span><br><span class="line">        where u.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 四：嵌套查询（多次查询） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userAndShoppingCartMap4"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 不能指定resultMap</span></span><br><span class="line"><span class="comment">            select:另一个查询的statement id</span></span><br><span class="line"><span class="comment">            column：等号左边是嵌套查询的参数,等号右边是当前查询的结果</span></span><br><span class="line"><span class="comment">            fetchType="lazy":延迟检索  "eager"积极加载 --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"shoppingCart"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">select</span>=<span class="string">"net.onest.mapper.ShoppingCartMapper.findShoppingCartByUserId"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">column</span>=<span class="string">"&#123;uid=id&#125;"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fetchType</span>=<span class="string">"eager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserAndShoppingCartById4"</span> <span class="attr">resultMap</span>=<span class="string">"userAndShoppingCartMap4"</span>&gt;</span></span><br><span class="line">        select * from user u where u.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tset</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//打开SqlSession</span></span><br><span class="line">		SqlSession sqlSession = MyBatisUtil.openSqlSession();</span><br><span class="line">		<span class="comment">//得到了映射器接口实现类的对象</span></span><br><span class="line">		UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//		List&lt;User&gt; users =  userMapper.findAllUsers();</span></span><br><span class="line"><span class="comment">//		System.out.println(users);</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//1.添加用户及购物车</span></span><br><span class="line"><span class="comment">//		User user = new User();</span></span><br><span class="line"><span class="comment">//		user.setUserName("ll");</span></span><br><span class="line"><span class="comment">//		user.setPassword("156");</span></span><br><span class="line"><span class="comment">//		userMapper.insertUser(user);</span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//		ShoppingCart shoppingCart = new ShoppingCart();</span></span><br><span class="line"><span class="comment">//		shoppingCart.setPrice(445.2);</span></span><br><span class="line"><span class="comment">//		shoppingCart.setUserId(user.getId());</span></span><br><span class="line"><span class="comment">//		ShoppingCartMapper shoppingCartMapper = sqlSession.getMapper(ShoppingCartMapper.class);</span></span><br><span class="line"><span class="comment">//		shoppingCartMapper.insertShoppingCart(shoppingCart);</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//关联查询</span></span><br><span class="line"><span class="comment">//		User user = userMapper.findUserAndShoppingCartById(1);</span></span><br><span class="line"><span class="comment">//		User user = userMapper.findUserAndShoppingCartById2(1);</span></span><br><span class="line"><span class="comment">//		User user = userMapper.findUserAndShoppingCartById3(1);</span></span><br><span class="line">		List&lt;User&gt; users = userMapper.findUserAndShoppingCartById4(<span class="number">1</span>);</span><br><span class="line">		System.out.println(users.get(<span class="number">0</span>).toString());</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		u.getShoppingCart();</span></span><br><span class="line"><span class="comment">//		System.out.println(userMapper.findUserAndShoppingCartById(1));</span></span><br><span class="line">		</span><br><span class="line">		sqlSession.commit();</span><br><span class="line">		<span class="comment">//关闭session</span></span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="一对一关联映射缺点"><a href="#一对一关联映射缺点" class="headerlink" title="一对一关联映射缺点"></a>一对一关联映射缺点</h2><ol>
<li>嵌套查询会多执行SQL，当查询N条数据时，就会出现N+1次查询问题</li>
<li>为了解决N+1次查询问题，可以设置延迟加载策略，将association元素的fetchType属性设置为lazy</li>
<li>MyBatis主配置文件中有两个延时加载相关settings设置<ol>
<li>lazyLoadingEnabled，延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。可通过设置fetchType 属性来覆盖该项的开关状态</li>
<li>aggressiveLazyLoading，当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属性会按需加载<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>设置为延迟加载的对象，默认情况下，当调用该对象的equals、hashCode、toString、clone方法时，就会加载该对象的全部数据<h2 id="对比四种关联映射方式"><a href="#对比四种关联映射方式" class="headerlink" title="对比四种关联映射方式"></a>对比四种关联映射方式</h2></li>
</ol>
</li>
<li>前面的三种方式都属于“关联的嵌套结果映射“,即通过一次SQL查询根据表或指定的属性映射到不同的对象中</li>
<li>最后一种方式属于“关联的嵌套查询”，利用简单的SQL语句，通过多次查询得到想要的结果，可实现延迟加载效果</li>
</ol>
]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2-MyBatis的CRUD操作</title>
    <url>/2020/03/18/2-MyBatis%E7%9A%84CRUD%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="动态代理机制"><a href="#动态代理机制" class="headerlink" title="动态代理机制"></a>动态代理机制</h2><p>略</p>
<h2 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h2><h3 id="单条插入："><a href="#单条插入：" class="headerlink" title="单条插入："></a>单条插入：</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"com.mybatis.entity.User"</span>&gt;</span></span><br><span class="line">	insert into USER(id,user_name,password) values(#&#123;id&#125;,#&#123;userName&#125;,#&#123;password&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中</p>
<ol>
<li>id属性：命名空间中的唯一标识符，为Mapper接口中的方法名</li>
<li>parameterType：指定了方法的参数类型，为<strong>可选项</strong>可以省略</li>
<li>#{id}是JavaBean对象的属性名</li>
<li>insert方法的返回值num是执行插入语句所<strong>影响的行数</strong></li>
</ol>
<h3 id="使用JDBC方式返回主键自增的值"><a href="#使用JDBC方式返回主键自增的值" class="headerlink" title="使用JDBC方式返回主键自增的值"></a>使用JDBC方式返回主键自增的值</h3><p>执行插入操作以后返回表中的主键值，id值可为null</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"com.mybatis.entity.User"</span> "<span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">	insert into USER(id,user_name,password) values(#&#123;id&#125;,#&#123;userName&#125;,#&#123;password&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用user.getId()才能获取主键值，inset的返回值是影响的条数</p>
<a id="more"></a>

<h3 id="使用selectKey返回主键的值-mysql一般不需要"><a href="#使用selectKey返回主键的值-mysql一般不需要" class="headerlink" title="使用selectKey返回主键的值(mysql一般不需要)"></a>使用selectKey返回主键的值(mysql一般不需要)</h3><p>对于一些不提供主键自增功能的数据库，如Oracle，需要使用selectKey标签来获取主键的值</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">	insert into USER(id,user_name,password values(#&#123;id&#125;,#&#123;userName&#125;,#&#123;password&#125;)</span><br><span class="line">	<span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span> <span class="attr">order</span>=<span class="string">"AFTER"</span>&gt;</span></span><br><span class="line">		SELECT LAST_INSERT_ID()</span><br><span class="line">	<span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>keyProperty属性表示主键所对应的属性名</li>
<li>resultType属性用于设置返回值类型</li>
<li>在MySQL中order属性设置为after，表示当前记录的主键值在insert语句执行成功后才能获取到，Oracle中设置为before</li>
<li>selectKey元素中的内容是一个独立的SQL语句，在MySQL中SELECT LAST_INSERT_ID()用于获取数据库中最后插入的数据的主键值</li>
<li>在Oracle中应该使用SELECT SEQ_ID.nextval from dual用来获取序列中的一个值</li>
</ol>
<h2 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h2><h3 id="查询所有"><a href="#查询所有" class="headerlink" title="查询所有"></a>查询所有</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsers"</span>  <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="查询单个对象"><a href="#查询单个对象" class="headerlink" title="查询单个对象"></a>查询单个对象</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 结果映射 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用别名方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserById"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不使用别名方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span> = <span class="string">"findUserById"</span> <span class="attr">resultType</span>=<span class="string">"net.onest.entity.User"</span>&gt;</span></span><br><span class="line">    select id, user_name userName, password from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用用户名和密码进行查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByUserAndPsd"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user where userName=#&#123;arg0&#125; and password=#&#123;arg0&#125;</span><br><span class="line">	select * from user where userName=#&#123;param0&#125; and password=#&#123;param1&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="多条件查询"><a href="#多条件查询" class="headerlink" title="多条件查询"></a>多条件查询</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List <span class="title">findUserByUserAndPsd</span><span class="params">(@Param(<span class="string">"userName"</span>)</span> String userName,@<span class="title">Param</span><span class="params">(<span class="string">"password"</span>)</span> String password)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByUserAndPsd"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user where userName=#&#123;userName&#125; and password=#&#123;password&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findLike"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">	select * from user where user_name like "%"#&#123;name&#125;"%"</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateById</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateById"</span>&gt;</span></span><br><span class="line">	update user set user_name = #&#123;userName&#125;,password = #&#123;password&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteById"</span>&gt;</span></span><br><span class="line">	delete from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法之主从复合句2</title>
    <url>/2020/03/17/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%90%88%E5%8F%A52/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="同位语从句"><a href="#同位语从句" class="headerlink" title="同位语从句"></a>同位语从句</h2><ol>
<li>In the long run, there is no doubt that everyone would be much better-off if smoking were banned altogether.—&gt;从长远来看，毫无疑问如果吸烟被禁止每个人将会变得更好<ol>
<li>in the long run 从长远来看</li>
<li>run n.态势，趋势，类</li>
<li>the common run of 普通类别</li>
<li>better-off 更好的</li>
<li>ban=forbid=prohibit</li>
<li>altogether=totally</li>
</ol>
</li>
<li>However, the conventional view that education should be one of the very highest priorities for promoting rapid economic development in poor countries is wrong.—&gt;然而，传统的观点，教育对于促进经济快速发展应该是有最高优先权之一的，而这种观点在贫穷国家是错误的<ol>
<li>conventional=traditional 传统的</li>
<li>priority n.优先权</li>
<li>prior a.优先的</li>
<li>promote v.促进，推进</li>
</ol>
</li>
<li>Yet the fact remains that the merger movement must be watched.—&gt;然而事实就是合并动作必须被关注<ol>
<li>ramain 保持，剩下来</li>
<li>watch v.关注</li>
</ol>
</li>
<li>When reports came into London zoo that a wild puma had been spotted forty-five miles south of London, they were not taken seriously.—&gt;当伦敦动物园接到报告说，在伦敦以南45英里处发现一只美洲狮时，它们并没有受到重视<ol>
<li>spot n.斑点污点，在现场 v.发现</li>
<li>tourist spot 旅游景点</li>
<li>on the spot 当下，立场；在现场</li>
<li>take serious 认真对待</li>
</ol>
</li>
</ol>
<a id="more"></a>
<h2 id="定语从句"><a href="#定语从句" class="headerlink" title="定语从句"></a>定语从句</h2><h3 id="只用that不用which"><a href="#只用that不用which" class="headerlink" title="只用that不用which"></a>只用that不用which</h3><ol>
<li>先行词被序数词修饰时，或被最高级修饰时；</li>
<li>先行词有人又有物；</li>
<li>先行词有一定的定冠词：The only，the same，the last， the one等词时；</li>
<li>先行词是：something，anything，nothing，none，nobody，little，much，all等补丁代词时；</li>
<li>主句中已有who/which时，为避免重复用that；</li>
</ol>
<h3 id="只用which不用that"><a href="#只用which不用that" class="headerlink" title="只用which不用that"></a>只用which不用that</h3><ol>
<li>先行词后有介词。</li>
<li>非限定性定语从句。</li>
<li>those+复数名词用which</li>
<li>先行词本身是that，后用which</li>
</ol>
<h3 id="句子"><a href="#句子" class="headerlink" title="句子"></a>句子</h3><ol>
<li>School remains a place where intellect is mistrusted.—&gt;学校是一个知识分子不被信任的地方<ol>
<li>intellect n.知识分子</li>
<li>intelligence n.智商</li>
<li>intelligent a.聪明的</li>
</ol>
</li>
<li>During the past generation, the American middle-class family that once could count on hard work and fair play to keep itself financially secure has been transformed by economic risk and new realities.—&gt;在过去的几十年里，美国的中产阶级家庭曾经依靠努力工作和公平竞争来保证自己的财务安全，但现在经济风险和新的现实已经改变了这种状况。<ol>
<li>generation n.一代人，产生</li>
<li>transform v.改变，转变</li>
</ol>
</li>
<li>The other reason why costs are so high is the restrictive guild-like ownership structure of the business.—&gt;另一个花费很高的原因是限制协会所有制商业结构<ol>
<li>cost 成本，花费</li>
<li>restrictive a.限制性的</li>
<li>ownership n.所有制</li>
<li>guild-like 像协会一样</li>
<li>business n.商业，事务，行业，职业</li>
</ol>
</li>
<li>Large numbers of physicians seem unconcerned with the pain their patients are needlessly and predictably suffering.—&gt;大量的医生不关心需要帮助和可能遭受的病人的疼痛<ol>
<li>physicians n.内科医生</li>
<li>physicist n.物理学家  physics n.物理学</li>
<li>surgeon n.外科医生</li>
</ol>
</li>
<li>But the regular time it takes to get a doctoral degree in the humanities is nine years.—&gt;但是花费在人文社科方面获得博士学位的时间是九年<ol>
<li>humanities n.人文社科</li>
<li>humanity=human</li>
<li>regular a.常规的，正规的</li>
<li>doctoral degree 博士学位</li>
</ol>
</li>
<li>The Greeks assumed that the structure of language had some connection with the process of thought, which took root in Europe long before people realized how diverse languages could be.—&gt;希腊人认为语言的结构与思维过程有某种联系，这种联系在人们意识到语言的多样性之前就已经在欧洲扎下了根。<ol>
<li>the Greeks 希腊人</li>
<li>assume 假设</li>
<li>had some connection with 与…有某种联系<ol>
<li>some+数字 =about</li>
<li>some  许多</li>
<li>some 某</li>
</ol>
</li>
<li>take root in 扎根于</li>
<li>the process of thought 思维过程</li>
<li>diverse 多种多样的</li>
</ol>
</li>
<li>Many consumers seem to have been influenced by stock-market swings, which investors now view as a necessary ingredient to a sustained boom.—&gt;许多消费者似乎被股票市场波动所影响，这使得投资者认为股市波是动持续繁荣的必须因素<ol>
<li>stock n.股票</li>
<li>swing 波动</li>
<li>ingredient 元素，因素</li>
<li>sustain v.持续   <ol>
<li>sustainable a.可持续的</li>
<li>sustained a.持续的</li>
</ol>
</li>
<li>boom 繁荣，激增 = prosperity</li>
</ol>
</li>
<li>As Nature has pointed out before, there are some legitimate concerns about how science prizes—both new and old—are distributed.—&gt;正如《自然》杂志之前指出的那样，对于新老科学奖项的分配存在一些合理的担忧<ol>
<li>point out 指出</li>
<li>legitimate 合理的，合法的</li>
<li>prize n.奖</li>
</ol>
</li>
<li>This trend began during the Second World War, when several governments came to the conclusion that the specific demands that a government wants to make of its scientific establishment cannot generally be foreseen in detail.—&gt;这一趋势开始于第二次世界大战期间，当时几个国家的政府得出结论，认为一个政府对其科学机构的具体要求一般是无法详细预见的<ol>
<li>come to the conclusion 得出结论</li>
<li>specific 具体的<ol>
<li>concrete  n.混凝土 a.具体的，实在的</li>
</ol>
</li>
<li>make demand of … 对…提出需求</li>
<li>in detail 详细的</li>
</ol>
</li>
<li>Because the ultimate stakeholders are patients, the health research community should actively recruit to its cause not only well-known personalities such as Stephen Cooper, who has made courageous statements about the value of animal research, but all who receive medical treatment.—&gt;因为最终的利益相关者是患者，所以卫生研究界不仅应该积极争取斯蒂芬•库珀(Stephen Cooper)等知名人士的支持，而且应该争取所有接受治疗的人的支持。库珀曾就动物研究的价值发表过勇敢的言论。<ol>
<li>ultimate 最终的</li>
<li>community<ol>
<li>n.社区—&gt;普通人</li>
<li>界—&gt;专业人</li>
<li>群落—&gt;动植物</li>
</ol>
</li>
<li>recruit 招募</li>
<li>cause 事业</li>
<li>made courageous statements about 关于…做出大胆评论</li>
<li>medical treatment医学治疗<ol>
<li>treatment 对待，款待</li>
</ol>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>1-Mybatis框架</title>
    <url>/2020/03/17/1-Mybatis%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Mybatis使用流程"><a href="#Mybatis使用流程" class="headerlink" title="Mybatis使用流程"></a>Mybatis使用流程</h2><ol>
<li>导入jar包</li>
<li>编写mybatis主配置文件xml</li>
<li>创建实体类和映射接口（注意是接口）</li>
<li>编写mybatis的sql映射文件</li>
<li>主配置文件与SQL映射文件相关联</li>
<li>进行编码</li>
</ol>
<a id="more"></a>

<h2 id="MyBatis主配置文件"><a href="#MyBatis主配置文件" class="headerlink" title="MyBatis主配置文件"></a>MyBatis主配置文件</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 通用设置：延迟加载、缓存、日志显示方式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 输出SQL语句，STDOUT_LOGGING控制台显示 --&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- logImpl设置用来指定 MyBatis 所用日志的具体实现，未指定时将自动查找 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 数据库环境 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 数据库事务的管理方式和连接数据库参数 --&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- JDBC这种方式是直接使用了JDBC的事务提交和回滚设置 --&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- MANAGED(托管)让容器来管理事务的整个生命周期(比如 Spring) --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- POOLED：这是JDBC连接对象的数据库连接池的实现,用来避免创建新的连接实例 --&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- UNPOOLED: 每次被请求时简单打开和关闭连接 --&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- JNDI：这个数据源的实现是为了使用如Spring或应用服务器这类的容器 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/mybatis_demo?characterEncoding=utf-8"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 添加映射文件位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加单个映射文件 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;mapper resource="net/onest/mapper/UserMapper.xml"/&gt; --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 使用映射器接口的完全限定类名 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;mapper class="org.mybatis.builder.AuthorMapper"/&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加整个包中的映射文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"net.onest.mapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="MyBatis主要的类层次结构"><a href="#MyBatis主要的类层次结构" class="headerlink" title="MyBatis主要的类层次结构"></a>MyBatis主要的类层次结构</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtil</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory factory;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream is =</span><br><span class="line">				Resources.getResourceAsStream(<span class="string">"mybatis.xml"</span>);</span><br><span class="line">			factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line">			is.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">openSqlSession</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> factory.openSession();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="MyBatis映射文件"><a href="#MyBatis映射文件" class="headerlink" title="MyBatis映射文件"></a>MyBatis映射文件</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- namespace:映射器接口的完全限定名,方法为：insert，update，delete，select --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"net.onest.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 结果映射 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">id</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">property</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 映射select语句 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- resultType是映射的类 ， resultMap 必须在上面声明映射结果--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;select id="findAllUsers"  resultType="net.onest.entity.User"&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsers"</span>  <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">           select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 插入操作 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- useGeneratedKeys和keyProperties属性，用来获取数据库中的主键的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span> <span class="attr">parameterType</span>=<span class="string">"net.onest.entity.User"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        insert into user(id, user_name, password)</span><br><span class="line">        values(#&#123;id&#125;, #&#123;userName&#125;, #&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="映射器接口类-实体User类"><a href="#映射器接口类-实体User类" class="headerlink" title="映射器接口类,实体User类"></a>映射器接口类,实体User类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> net.onest.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.onest.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUsers</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> net.onest.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String userName;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> net.onest.ui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.onest.entity.User;</span><br><span class="line"><span class="keyword">import</span> net.onest.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> net.onest.util.MyBatisUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//第一种方式（传统方式）</span></span><br><span class="line">		<span class="comment">//打开SqlSession</span></span><br><span class="line"><span class="comment">//		SqlSession sqlSession = MyBatisUtil.openSqlSession();</span></span><br><span class="line"><span class="comment">//		//参数为映射文件中的namespace+id</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//		User user = new User();</span></span><br><span class="line"><span class="comment">//		user.setUserName("pp");</span></span><br><span class="line"><span class="comment">//		user.setPassword("456");</span></span><br><span class="line"><span class="comment">//		sqlSession.insert("net.onest.mapper.UserMapper.insertUser", user);</span></span><br><span class="line"><span class="comment">//		sqlSession.commit();</span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//		List&lt;User&gt; users = sqlSession.selectList("net.onest.mapper.UserMapper.findAllUsers");</span></span><br><span class="line"><span class="comment">//		System.out.println(users);</span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//		//关闭SqlSession</span></span><br><span class="line"><span class="comment">//		sqlSession.close();</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//第二种方式（推荐使用）</span></span><br><span class="line">		<span class="comment">//打开SqlSession</span></span><br><span class="line">		SqlSession sqlSession = MyBatisUtil.openSqlSession();</span><br><span class="line">		<span class="comment">//得到了映射器接口实现类的对象</span></span><br><span class="line">		UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		User user = new User();</span></span><br><span class="line"><span class="comment">//		user.setUserName("zj");</span></span><br><span class="line"><span class="comment">//		user.setPassword("456");</span></span><br><span class="line"><span class="comment">//		userMapper.insertUser(user);</span></span><br><span class="line"><span class="comment">//		sqlSession.commit();</span></span><br><span class="line">		</span><br><span class="line">		List&lt;User&gt; users =  userMapper.findAllUsers();</span><br><span class="line">		System.out.println(users);</span><br><span class="line">		<span class="comment">//关闭session</span></span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="MyBatis主要的类层次结构-1"><a href="#MyBatis主要的类层次结构-1" class="headerlink" title="MyBatis主要的类层次结构"></a>MyBatis主要的类层次结构</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-17_113645.jpg" alt></p>
<h2 id="SqlSession的工作流程"><a href="#SqlSession的工作流程" class="headerlink" title="SqlSession的工作流程"></a>SqlSession的工作流程</h2><ol>
<li>开启一个数据库访问会话—创建SqlSession对象：MyBatis封装了对数据库的访问，把对数据库的会话和事务控制放到了SqlSession对象中。<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-17_114424.jpg" alt></li>
<li>为SqlSession传递一个映射的SQL语句的StatementId和参数，然后返回结果：<ol>
<li>SqlSession根据Statement ID, 在MyBatis配置对象</li>
<li>Configuration中获取到对应的MappedStatement对象</li>
<li>调用MyBatis执行器来执行具体的操作。</li>
</ol>
</li>
<li>MyBatis在初始化的时候，会将MyBatis的配置信息全部加载到内存中，使用Configuration实例来维护。</li>
<li>映射文件加载到内存中会生成n个对应的MappedStatement对象</li>
</ol>
]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>考研数学必记公式3.16-3.22</title>
    <url>/2020/03/16/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6%E5%BF%85%E8%AE%B0%E5%85%AC%E5%BC%8F3-16-3-22/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="3月16需背诵公式及性质"><a href="#3月16需背诵公式及性质" class="headerlink" title="3月16需背诵公式及性质"></a>3月16需背诵公式及性质</h2><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19001.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19002.jpg" alt></p>
<h2 id="3月17需背诵公式及性质"><a href="#3月17需背诵公式及性质" class="headerlink" title="3月17需背诵公式及性质"></a>3月17需背诵公式及性质</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19003.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19004.jpg" alt></p>
<h2 id="3月18需背诵公式及性质"><a href="#3月18需背诵公式及性质" class="headerlink" title="3月18需背诵公式及性质"></a>3月18需背诵公式及性质</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19005.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19006.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19007.jpg" alt></p>
<h2 id="3月19需背诵公式及性质"><a href="#3月19需背诵公式及性质" class="headerlink" title="3月19需背诵公式及性质"></a>3月19需背诵公式及性质</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19008.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-19009.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-190010.jpg" alt></p>
<h2 id="3月20需背诵公式及性质"><a href="#3月20需背诵公式及性质" class="headerlink" title="3月20需背诵公式及性质"></a>3月20需背诵公式及性质</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-190011.jpg" alt></p>
<h2 id="3月21需背诵公式及性质"><a href="#3月21需背诵公式及性质" class="headerlink" title="3月21需背诵公式及性质"></a>3月21需背诵公式及性质</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-190012.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-190013.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/20207-7-190014.jpg" alt></p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语词汇41-52</title>
    <url>/2020/03/12/%E8%8B%B1%E8%AF%AD%E8%AF%8D%E6%B1%8741-52/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="词汇11个"><a href="#词汇11个" class="headerlink" title="词汇11个"></a>词汇11个</h2><ol start="41">
<li>abuzz 嗡嗡的（象声词）<ol>
<li>be abuzz with… 对…议论纷纷的</li>
<li>Washington has been abuzz with stories about disarray inside the White House.<ol>
<li>disarray 混乱的</li>
<li>story 新闻报道</li>
<li>has  有，<strong>使得</strong></li>
</ol>
</li>
<li>A move has intellectual-property lawyers abuzz.<ol>
<li>move 举措</li>
<li>intellectual-property 知识产权</li>
</ol>
</li>
</ol>
</li>
<li>oblige v.有责任，有义务<ol>
<li>be obliged to do sth 有责任有义务做某事</li>
<li>be/feel obliged to sth/sb 感谢，感激</li>
<li>oblige sb to do sth=force sb to do sth 强迫某人做某事</li>
</ol>
</li>
<li>effect n.影响，作用<ol>
<li>in effect=in fact=in practice=actually</li>
<li>have/pose/exert an effect on  对…有影响</li>
<li>影响：influence；impact; <strong>fallout</strong></li>
<li><strong>to the effect 大意是说</strong></li>
</ol>
</li>
<li>with it 随之<ol>
<li>This move brings with it the greater rewards and benefits for the society.</li>
<li>随之，这一举措为社会带来了更大的回报和利益。<a id="more"></a></li>
</ol>
</li>
<li>in the wake of 跟随 随着<ol>
<li>A emerges in the wake of B   A在B之后出现</li>
<li>A follows B</li>
<li>A tracks the emergence of B  A跟踪了B的出现</li>
<li>A rises following in the wake of B  在B之后上升</li>
</ol>
</li>
<li>long before 早在…之前<ol>
<li>before long 不久之后</li>
<li>口诀：long在前，早在…之前；long在后，不久之后</li>
</ol>
</li>
<li>overshadow v.使…黯然失色，夺去…光彩，比…更显眼 （=dwarf）<ol>
<li>shadow n.阴影 v.遮蔽</li>
<li>A is dwarfed by B=A is overshadowed by B   A被B弄的黯然失色</li>
</ol>
</li>
<li>entitle v.授予，给予 =grant  <strong>n.情报（=information）</strong><ol>
<li>Sb. be entitled to sth. 某人被授予某物</li>
<li>be entitled to do sth. 有权享有…；有做某事的资格</li>
</ol>
</li>
<li>intelligence n.聪明才智<ol>
<li>intelligent a.聪明的，智力的 smart</li>
<li>intellectual a.知识的</li>
<li>intellectual property 知识产权</li>
</ol>
</li>
<li>initiatives n.主动性 ，创始，举措，措施<ol>
<li>intellectual property 知识产权</li>
<li>subjective initiative 主观能动性；</li>
<li>take initiatives to do sth. 采取措施做某事</li>
<li>采取措施：<ol>
<li>take measures to do</li>
<li>take moves to do</li>
<li>take steps to do</li>
<li>take actions to so sth.</li>
<li>these well-meaning medical initiatives translate into better care.这些善意的医疗举措转化为更好的医疗服务。</li>
</ol>
</li>
</ol>
</li>
<li>vulnerable a.易受攻击的，易受…的攻击；易受伤害的；有弱点的<ol>
<li>容易受…的影响<ol>
<li>be vulnerable to…</li>
<li>be susceptible to…</li>
<li>be subject to…</li>
<li>be immune to…不受…影响</li>
</ol>
</li>
<li>vulnerability n.弱点，缺陷<ol>
<li>weak point</li>
<li>weakness</li>
<li>shortcoming</li>
<li>drawback</li>
<li>deficiency</li>
<li>defect</li>
<li>flaw</li>
<li>disadvantage</li>
<li>handicap</li>
</ol>
</li>
<li>Encouraging kids to reject the life of the mind leaves them vulnerable to exploitation and control.  鼓励孩子们去拒绝精神生活会使他们容易遭受剥削和控制。</li>
</ol>
</li>
<li>shake v.握手 <strong>摇摆</strong></li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语词汇31-40</title>
    <url>/2020/03/12/%E8%8B%B1%E8%AF%AD%E8%AF%8D%E6%B1%8731-40/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="词汇10个"><a href="#词汇10个" class="headerlink" title="词汇10个"></a>词汇10个</h2><p>upsetting 令人沮丧的</p>
<p>triumph v.胜利，凯旋<br><br>A triumph over B…A比B好，A由于B<br><br>Talking triump over speaking,spontaneity（即兴） over crafting(精心雕琢).<br><br>spontaneity speaking 即兴演讲</p>
<ol start="31">
<li>despite prep.尽管，虽然<ol>
<li>in spite of </li>
<li>+n/v-ing/名词短语</li>
</ol>
</li>
<li>discipline v.训练，惩罚（punish，penalize） n.学科，纪律，惩罚（punishment，penalty）<ol>
<li>intellectual discipline 知识学科</li>
<li>at a loss 慌然失措</li>
</ol>
</li>
<li>alter v.改变，转变<ol>
<li>近义词：change; transform; transfer; modify; convert; shift; switch; vary</li>
<li>形近词：alternate v.交替；轮流  alternative a.可供选择的；交替的  alternatively adv.二者择一地</li>
</ol>
</li>
<li>cultivate v.培养，种植<ol>
<li>culture 文化的</li>
<li>cultivate good habits 培养好习惯</li>
<li>raise<ol>
<li>种植  corn玉米</li>
<li>提出  a challage</li>
<li>提升  salary/wage</li>
<li>引起  our concern</li>
<li>养育  a baby</li>
<li>喂养  cattle</li>
<li>集资  money/fund<a id="more"></a></li>
</ol>
</li>
</ol>
</li>
<li>object v.反对，拒绝(+to) n.目标，目的；物体，对象；宾语<ol>
<li>反对：disagree，disapprove，oppose</li>
<li>目标：goal，aim，target，purpose，objective</li>
<li>resist(拒绝)：refuse（confuse 困惑的），reject，decline，deny</li>
</ol>
</li>
<li>concept n.概念，观念=notion<ol>
<li>conceive v.孕育；构思；设想；(+of)</li>
<li>conceive of a noval idea 构思一个新颖的观点</li>
<li>conception n.孕育，构思</li>
</ol>
</li>
<li>parallel n.平行线，类似的事物 a.平行的 v.使…平行(v.+ed)<ol>
<li>upsetting parallel 令人沮丧的类似事物</li>
<li>be parallel to… 与…相类似=be similar to…=be analogous</li>
<li>run parallel to… 与…平行</li>
<li>run parallel with… 与…并驾齐驱</li>
<li>unparalleded=matchless=incomparable 不可比拟的，无与伦比的</li>
<li>unique 独一无二的</li>
</ol>
</li>
<li>succeed v.成功<ol>
<li>success n.成功</li>
<li>successful a.成功的</li>
<li>successive a.连续的；继承的</li>
<li>succession n.连续；继位；继承权  a succession of 一系列</li>
<li>a host of=a series of=an array of=a train of一系列</li>
</ol>
</li>
<li>relieve v.减轻，释放<ol>
<li>relieve sb of sth 让sb从sth中解脱出来</li>
</ol>
</li>
<li>respect <strong>n.方面</strong> v.尊敬<ol>
<li>in respect of…关于，涉及</li>
<li>关于：about；concerning；regarding；with regard to；with respect to</li>
<li><strong>respectful adj. 恭敬的；有礼貌的；</strong></li>
<li><strong>respectable adj. 值得尊敬的</strong></li>
<li><strong>respective adj. 分别的；各自的</strong></li>
<li>perspective n. 观点；角度</li>
<li>from my perspective “从我的角度来看，就我而言”</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语词汇21-30</title>
    <url>/2020/03/12/%E8%8B%B1%E8%AF%AD%E8%AF%8D%E6%B1%8721-30/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="词汇10个"><a href="#词汇10个" class="headerlink" title="词汇10个"></a>词汇10个</h2><ol start="21">
<li>conduct v.指挥，引导，实施 n.行为，指导，实施<ol>
<li>conduct a experiment/research</li>
<li>the code of conduct 行为准则</li>
<li>moral conduct/rule/principle 道德准则</li>
<li>In a move, the federal circuit said it would use a particular case to conduct a broad review of business-method patents.<ol>
<li>move n.举措</li>
<li>the federal circuit 联邦巡回法院</li>
<li>broad 广泛的 abroad 在国外</li>
<li>review审查，审阅  peer review 同行审查</li>
</ol>
</li>
<li>Your outline should smoothly conduct you from one point to the next, but do not permit it to railroad you.<ol>
<li>outline 提纲 deadline 截止日期</li>
<li>railroad n.铁路 <strong>v.强迫，使…仓促行事</strong></li>
</ol>
</li>
<li>Ericsson realized he would have more opportunity to conduct his own research if he switched to psychology.<ol>
<li>switch n.开关  v.转换，转向，改变</li>
<li>dedicate A to B 将A致力于B</li>
</ol>
</li>
</ol>
</li>
<li>observe v.观察，看到，<strong>遵守，服从</strong><ol>
<li>observer n.观察者</li>
<li>observe the laws and regulations 遵守法律法规</li>
<li>follow/obey/conform/adhere to 符合遵守</li>
<li>ex- 向外  im-向里</li>
<li>export 出口  import 进口</li>
<li>explict 清楚的，明朗的  implict 含蓄的，不清楚的（implication n.内涵，含义）</li>
<li>清楚的：clear obvious manifest conspicuous exact definite</li>
<li>不清楚的：unclear vague obscured ambiguous<a id="more"></a></li>
</ol>
</li>
<li>establish v.确立，建立<ol>
<li>well-establish 建立好的，完善的    well-brand 知名品牌   well-evidence 确证</li>
<li>establish the deadline 截止日期</li>
<li>establish a company/firm/enterprise 创业</li>
<li>establish oneself in…立足于/定居于</li>
<li>establishment n.机构，组织  organization institution</li>
</ol>
</li>
<li>wonder v.想知道，对…好奇，对…疑惑 n.惊讶，奇迹(miracle)<ol>
<li>wander v.徘徊，游荡</li>
<li>It is no/little/small wonder that …怪不得，难怪</li>
<li>work wonder 创造奇迹</li>
</ol>
</li>
<li>approach n.方法，途径  v.接近，着手处理<ol>
<li>way（in the way）</li>
<li>manner(in this manner)</li>
<li>method(with this method)</li>
<li>means(by means of)</li>
<li>fashion(in this fashion)</li>
<li><strong>mean v.意味着 n.方法 adj.吝啬的，平均的</strong></li>
<li>average a.平均的 普通的（=ordinary=common=plain）</li>
<li>in the long run 从长远看</li>
<li>the common run of people 普通人</li>
<li>not… any but =only</li>
<li>not… any more than… 对于两者否定</li>
</ol>
</li>
<li>grant v.授予，给予 n.津贴，补助金（subsidy）<ol>
<li>grant sb sth—grant sth to sb</li>
<li>confer sth on sb 授予</li>
<li>sb be entitle of sth 被授予</li>
<li>grant himself permission to be human 人非圣贤</li>
<li>grant my application/request</li>
<li>take sth for granted 把…视为理所当然</li>
</ol>
</li>
<li>position n.位置，主场，地位，<strong>职位</strong><ol>
<li>form my position = for my part = I think</li>
<li>leading position 主导地位</li>
<li>apply for the position 求职</li>
<li>resign from the position 辞职</li>
<li>pose n.姿势 v.构成，形成 </li>
<li>oppose v.反对 opposite 相反的</li>
<li>propose n.建议，提出，求赠</li>
<li>dispose v.处理 提出（put forward=come up with）</li>
<li>A pose a threat to B 构成威胁</li>
</ol>
</li>
<li>relate v.使…有联系 叙述，涉及<ol>
<li>relation n.关系，叙述   relationship（关系）</li>
<li><strong>relative a.相对的 n.亲戚</strong></li>
<li>A 与 B 相关：<ol>
<li>A be related with/to B</li>
<li>A be associated with B</li>
<li>A be correlated with B</li>
<li>A be linked with B</li>
<li>A be connected with B</li>
<li>A have to do with B</li>
<li>A be bound up with B</li>
<li>A be relevant to B</li>
</ol>
</li>
<li>A 与 B 无关：（以上be not）<ol>
<li>A have nothing to do with B</li>
<li>A be irrelevant to B</li>
<li>A have no concern with B</li>
</ol>
</li>
</ol>
</li>
<li>alleviate v.减轻，舒缓<ol>
<li>alleviate the pressure/stress from work and life.缓解压力</li>
<li>近义词：ease release moderate relieve</li>
<li>alleviate pain 止痛</li>
<li>alleviate poverty 扶贫</li>
</ol>
</li>
<li>otherwise conj.否则，要不然  adv.另一个，否则<ol>
<li>or otherwise 或反之</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>8.1-Hibernate检索策略</title>
    <url>/2020/03/11/8-1-Hibernate%E6%A3%80%E7%B4%A2%E7%AD%96%E7%95%A5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="三种检索策略"><a href="#三种检索策略" class="headerlink" title="三种检索策略"></a>三种检索策略</h2><ol>
<li>立即检索：立即加载检索方法指定的对象。<ol>
<li>加载多于需要的对象白白浪费内存空间；</li>
<li>select 语句数量多，频繁访问数据库，影响系统性能。</li>
</ol>
</li>
<li>延迟检索：延迟加载检索方法指定的对象。<ol>
<li>避免多加载应用程序不需要访问的数据对象。</li>
</ol>
</li>
<li>迫切左外连接：利用SQL外连接查询功能加载检索方法指定对象。<ol>
<li>减少执行select语句的数量，减少数据库访问，提高系统性能。</li>
</ol>
</li>
</ol>
<a id="more"></a>

<h2 id="类级别和关联级别可选的检索策略"><a href="#类级别和关联级别可选的检索策略" class="headerlink" title="类级别和关联级别可选的检索策略"></a>类级别和关联级别可选的检索策略</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-11_105703.jpg" alt></p>
<h2 id="类级别检索策略"><a href="#类级别检索策略" class="headerlink" title="类级别检索策略"></a>类级别检索策略</h2><p>立即检索（加载）：映射配置文件中<class>元素的lazy 属性设置为 false。</class></p>
<p><code>&lt;class name=&quot;User&quot; table=&quot;user&quot; lazy=&quot;false&quot;&gt;</code></p>
<p>延迟检索（加载）：映射配置文件中<class>元素的lazy 属性设置为 true。</class></p>
<p><code>&lt;class name=&quot;User&quot; table=&quot;user&quot; lazy=&quot;true&quot;&gt;</code></p>
<h3 id="立即检索"><a href="#立即检索" class="headerlink" title="立即检索"></a>立即检索</h3><p><code>User user = session.load(User.class, new Integer(1));</code></p>
<h3 id="延迟检索"><a href="#延迟检索" class="headerlink" title="延迟检索"></a>延迟检索</h3><ol>
<li>创建 User 的代理类实例（代理类是 Hibernate 动态生成的User的扩展类）；</li>
<li>Hibernate 创建的 User 代理类的实例<strong>仅仅初始化了OID 属性</strong>，其他属性均为 null；</li>
<li>当程序第一次访问代理类实例时（比如user.getX()），Hibernate会初始化代理类实例，执行 select 语句；</li>
<li>如果程序访问 User 的 getId() 方法时，Hibernate并不会初始化代理类实例，因为 id 值已经存在。</li>
<li>类级别的检索策略<strong>只会影响到 Session 的 load() 方法</strong>，对get() 和其它查询不起作用。</li>
<li>延迟加载对 load() 方法的影响：<ol>
<li>如果数据库中不存在对应的对象不会抛出异常，只有在调用 user.getXX() 时才会抛异常；</li>
<li>代理类实例只能在当前 Session 范围内初始化；</li>
<li><strong>Hibernate.initialize()</strong> 方法可以显示初始化代理类实例。</li>
</ol>
</li>
</ol>
<h3 id="关联级别检索策略"><a href="#关联级别检索策略" class="headerlink" title="关联级别检索策略"></a>关联级别检索策略</h3><p>User.hbm.xml 中<set>元素 lazy 和 outer-join 属性。</set></p>
<p>在映射文件中用<strong><set></set></strong>元素来配置一对多和多对多关联关系。<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-11_105818.jpg" alt></p>
<p>outer-join属性：auto、true、false</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-11_105927.jpg" alt></p>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>英语词汇11-20</title>
    <url>/2020/03/10/%E8%8B%B1%E8%AF%AD%E8%AF%8D%E6%B1%8711-20/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="词汇10个"><a href="#词汇10个" class="headerlink" title="词汇10个"></a>词汇10个</h2><ol start="11">
<li>lead v.领导，引导，领先 导致 n.领头，带队<ol>
<li>lead sb to do sth 引导某人做某事</li>
<li><strong>lead sb on 误导某人</strong></li>
<li>take the lead 带头</li>
<li>leadership 领导能力，领导地位</li>
<li>misleading 误导性的</li>
<li>leading 最重要的，卓越的</li>
<li><strong>plead for 恳求，请求</strong></li>
</ol>
</li>
<li>sector n.部门，部分，行业<ol>
<li>financial sector/department 金融部门</li>
<li>bank sector 银行部门</li>
<li>bank industry 银行业</li>
<li>bank world 世界银行</li>
<li>public sector 公有部门</li>
<li>private sector 私有部门</li>
</ol>
</li>
<li>account n.解释，描述，数量，账户，账目  v.解释，说明，导致，占比<ol>
<li>accountable 可解释的，有责任的 accountability=responsibility(责任，义务）</li>
<li>accounting n.会计，会计学   civil servant 公务员</li>
<li>accounting firm/company 会计事务所</li>
<li>accounting and finance 会计与金融</li>
<li>account for <ol>
<li>占据（比例）=make up=take uo=occupy +x%</li>
<li>解释说明</li>
<li>导致 lead to=result in=give rise to</li>
</ol>
</li>
<li>take into account 考虑</li>
<li>leave sth out of account</li>
<li>on account for 因为由于 =because of=due to=owing to</li>
<li>by all accounts 从各个方面来说，据大家所知</li>
<li>The first thing I would like to take into account is sth = Firstly</li>
<li>In most countries, the cost of crude oil now accounts for a smaller share of the price of petrol than it did in the 1970s.—&gt;在大多数国家，原油成本在汽油价格中所占的份额比1970年代要小。</li>
<li>crude 粗糙的，天然的，未加工的</li>
<li>share v.分享 n.股份，份额（distribution）shared a.共有的<a id="more"></a></li>
</ol>
</li>
<li>concern v.涉及，关系到，担忧 n.担忧，关注<ol>
<li>concern about 关心，担忧</li>
<li>concern oneself/with 关心</li>
<li>be concern with/about 关心担忧</li>
<li>concerning(prep.) = about=regarding(prep.)=with regard to</li>
<li>be concerned in 与…有关联 =be correlated with=be ralated with=be connected with=be associated</li>
<li>assciation 协会，联盟，联系</li>
<li>the Student’s Union/assciation 学生会</li>
<li>postgraduate 研究生—-master degree 硕士学位</li>
<li>undergraduate 本科生—-undergraduate degree 本科学位</li>
<li>doctoral 博士生——doctor degree 博士学位</li>
</ol>
</li>
<li>structure v.构造，建造 n.结构，构造，建筑<ol>
<li>restructure 重建，重组</li>
<li>language structure 语言结构</li>
<li>ownership structure 所有制结构</li>
<li>the structure of paper/thesis 论文结构</li>
<li>structural 结构的</li>
<li>infrastructure 基础设施</li>
</ol>
</li>
<li>content n.内容，目录，满意 v.使满足，使满意 adj.满足的，满意的<ol>
<li>be content with sth 对…满意=be content to do sth</li>
<li>self-contented a.自满的</li>
<li>contention n.争论</li>
<li>contend v.声称，主张，竞争</li>
<li>contact n.v.联系  in contact with sb 和…联系</li>
<li>contract n.合同，契约</li>
<li>contrast n.差异，差别 v.对比，对照</li>
<li>conpare v.</li>
<li>comparison n.比较，对比</li>
</ol>
</li>
<li>define v.下定义，阐明<ol>
<li>definition n.</li>
<li>The defining term of intelligence in human still seems to be the IQ scores.—&gt;在人类术语定义中，智商仍被看做IQ分数</li>
<li>in the long term 从长远看</li>
<li>a short-term plan 短期规划</li>
</ol>
</li>
<li>identify v.识别，辨别，确认<ol>
<li>identify n.身份</li>
<li>identify with sb 认同某人，与…产生共鸣</li>
<li>recognize v.识别</li>
</ol>
</li>
<li>physical a.身体的，物理的，物质的<ol>
<li>bodily a.身体的</li>
<li>mental 精神的</li>
<li>psychological 心理的</li>
<li>physical health/fitess 身体健康</li>
<li>physics 物理学家   physician （内科）医生  physicist 物理学家</li>
<li>surgeon （外科）医生  philosopher 哲学家  dentist 牙医</li>
<li>psychology 心理学家  therapist 治疗师  therapy n.治疗</li>
</ol>
</li>
<li>figure v.计算，估计，推测  n.人物，数字，体型<ol>
<li>figure out 计算出，弄清楚</li>
<li>public figure = celebrity 名人</li>
<li>Overall, Europe’s wholesale market for food and drink is growing, but the figures,when added together, mask two opposing trends.<ol>
<li>overall 整体上</li>
<li>wholesale 批发 retail 零售</li>
<li>mask n.面具 v.覆盖</li>
<li>oppose v.反对 </li>
<li>disposable surgeon mask 医用外科口罩</li>
</ol>
</li>
<li>It’s not obvious how the capacity to visualize objects and to figure out numerical patterns suits one to answer the questions.<ol>
<li>capacity 容量，性能</li>
<li>visualize 设想</li>
<li>suit v.适合 suit sb to do=mask sb to do</li>
</ol>
</li>
<li>Although the figure may vary, analysts do agree on another matter: that the number of the homeless is increasing.<ol>
<li>matter n.物质，事件</li>
</ol>
</li>
<li>Americans no longer expect public figures, whether in speech or in writing.</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语词汇1-10</title>
    <url>/2020/03/09/%E8%8B%B1%E8%AF%AD%E8%AF%8D%E6%B1%871-10/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>抚养，赡养：raise，feed，support</p>
<p>表否定的词：rarely，hardly，scarely，seldom，little，few</p>
<p>缺点，弱点：<br>    1. weak point<br>    2. shortcoming<br>    3. drawback<br>    4. flaw<br>    5. vulnerability<br>    6. weakness<br>    7. disadvantage<br>    8. handicap<br>    9. defect<br>    10. deficiency</p>
<p>have a far-reaching influence on sth 深远的影响</p>
<h2 id="感知考研词汇：以考研英语中常出现的“人”为例："><a href="#感知考研词汇：以考研英语中常出现的“人”为例：" class="headerlink" title="感知考研词汇：以考研英语中常出现的“人”为例："></a>感知考研词汇：以考研英语中常出现的“人”为例：</h2><ol>
<li>advocate<ol>
<li>v.倡导，主张</li>
<li>n.倡导者，主张者</li>
</ol>
</li>
<li>concertgoer<ol>
<li>n.音乐迷</li>
<li>concert 音乐会</li>
<li>playgoer 戏迷</li>
<li>fans n.粉丝</li>
</ol>
</li>
<li>arbiter<ol>
<li>n.仲裁人，裁判</li>
</ol>
</li>
<li>critic<ol>
<li>n.批评者，评论家</li>
<li>criticize v.批评</li>
<li>critical adj.批评性的</li>
</ol>
</li>
<li>conservative<ol>
<li>n.保守党</li>
<li>adj.保守的</li>
</ol>
</li>
<li>descendant<ol>
<li>n.后代，子孙</li>
<li>adj.祖传的</li>
<li>offspring n.后代</li>
</ol>
</li>
<li>benefactor<ol>
<li>n.捐款人</li>
<li>donater 捐赠人  donatee 受赠人<a id="more"></a></li>
</ol>
</li>
<li>entrepreneur<ol>
<li>n.企业家</li>
</ol>
</li>
<li>candidate<ol>
<li>n.候选人</li>
</ol>
</li>
<li>headhunter<ol>
<li>n.猎头</li>
</ol>
</li>
<li>celebrity<ol>
<li>n.名人（明星），名誉</li>
<li>celebrate v.庆祝</li>
</ol>
</li>
<li>kin<ol>
<li>n.亲戚</li>
<li>kinship n.亲情</li>
<li>relative 亲戚</li>
</ol>
</li>
<li>claimant<ol>
<li>n.原告</li>
<li>defendant n.被告</li>
<li>claim v.宣称，索赔</li>
<li>proclaim n.宣告，公布</li>
</ol>
</li>
<li>panel<ol>
<li>n.控制面板，专门小组</li>
<li>panel dicussion 讨论小组</li>
</ol>
</li>
</ol>
<h2 id="词汇10个"><a href="#词汇10个" class="headerlink" title="词汇10个"></a>词汇10个</h2><ol>
<li>enhance v.提高，提升，促进，增强<ol>
<li>enhance reputation 提升名誉  enhance efficiency提升效率  enhance awareness提升意识</li>
<li>同义词：promote，upgrade，boost（自夸，自吹自擂）</li>
<li>promote v.促进，促销，<strong>推销</strong>，晋升</li>
<li>promotion n.促升，推销，营销，晋升</li>
<li>market n.市场 v.市场营销</li>
</ol>
</li>
<li>overlook v.忽视<ol>
<li>同义词：ignore，neglect</li>
<li>oversee v.监督，监管（supervise）</li>
<li>overate=overstate 高估</li>
<li>高估————–低估</li>
<li>overestimate—–underestimate</li>
<li>overmeasure——undermeasure（measure 措施，衡量）</li>
<li>overvalue——–undervalue，underrate</li>
</ol>
</li>
<li>state n.状态，多家，洲 v.陈述，阐述<ol>
<li>statement 声明，陈述，清单</li>
<li>the current state of affirs 当前事态</li>
<li>keep a positive physical/mental state</li>
<li>overstate v.夸大，夸张的描述  understate v.保守的说</li>
<li>restate v.重申</li>
<li>stateman n.政治家</li>
<li>estate n.财产，房地产（=property）</li>
<li>status n.地位，情形，状况<ol>
<li>political status 政治地位</li>
<li>financial status 经济地位</li>
<li>legal status 法律地位</li>
</ol>
</li>
</ol>
</li>
<li>manifest v.表明<ol>
<li>manifestation n.表明，显示，表现</li>
<li>同义词：show，demonstrate（演示，显示），suggest，illustrate（说明，阐明）</li>
</ol>
</li>
<li>assert v.声称，坚持，断言<ol>
<li>assertion n.声称，断言    make a startling assertion 做了一个惊人的断言  (startle v.惊吓)</li>
<li>同义词：argue，believe，advocate，insist，deem(认为)，contend(认为)，hold，claim</li>
</ol>
</li>
<li>peer n.同龄人，同辈人，同等地位的人  <strong>v.盯着，凝视</strong><ol>
<li>peer review 同行评审</li>
<li>peer into(盯着) = gaze at = stare at = glare at(瞪着)</li>
</ol>
</li>
<li>issue n.问题，争端 v.发行，颁布，发表<ol>
<li>tissue n.(生物的)组织</li>
<li>The authority(权威，当局) is support to issue and carry out the corresponding(相应的) laws and regulations to control the adverse(不利的) trend</li>
</ol>
</li>
<li>claim v.声称，主张，<strong>索赔</strong>，提出要求<ol>
<li>proclaim v.宣布，声明</li>
<li><strong>acclaim v.称赞，欢呼，为…喝彩</strong></li>
<li>claim for sth 索取某物</li>
<li>claim compensate 索赔  （compensate 赔偿）</li>
<li>disclaim v.放弃(give up/quit/abandon)，否认(deny)，拒绝(refuse,reject,decline(婉拒))</li>
<li>deny-deniable-undeniably</li>
</ol>
</li>
<li>patent v.授予…专利 adj.专利的 n.专利(权)<ol>
<li>Over the past decade, thousands of patents have been granted for what are called business methods.—&gt;在过去的十年里，成千上万的专利被授予所谓的商业方法。</li>
<li>what are called 所谓的</li>
<li>grant v.授予（专利），同意，给予 n.补助金，拨款</li>
<li>take sb/sth for granted 认为…是理所当然的</li>
<li>sb take it for granted that 某人认为…是理所当然的</li>
</ol>
</li>
<li>subject n.学科，课题，主语，<strong>主旨，研究对象</strong>   <strong>v.隶属于，服从于，使…遭受</strong><ol>
<li>object n.客体，目标 v.反对</li>
<li>subjective 主观的  objective 客观的</li>
<li>be subjective to 易受…影响</li>
<li>sth is subjective to groundless doubts 某事易受无根据怀疑的影响</li>
<li>be susceptiable to == be vulnerable to  易受…影响</li>
</ol>
</li>
<li>fire n.火 v.点燃，解雇<ol>
<li>hire 租用，雇佣</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>考研数学必记公式3.9-3.14</title>
    <url>/2020/03/08/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6%E5%BF%85%E8%AE%B0%E5%85%AC%E5%BC%8F3-9-3-14/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="3-9必记公式"><a href="#3-9必记公式" class="headerlink" title="3.9必记公式"></a>3.9必记公式</h2><p>定积分定义：</p>
<a id="more"></a>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-12_171327.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_220948.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221018.jpg" alt></p>
<p>定积分的一些其他性质：</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-12_144730.jpg" alt></p>
<h2 id="3-10必记公式"><a href="#3-10必记公式" class="headerlink" title="3.10必记公式"></a>3.10必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221034.jpg" alt></p>
<h2 id="3-11必记公式"><a href="#3-11必记公式" class="headerlink" title="3.11必记公式"></a>3.11必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221052.jpg" alt></p>
<h2 id="3-12必记公式"><a href="#3-12必记公式" class="headerlink" title="3.12必记公式"></a>3.12必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221110.jpg" alt></p>
<h2 id="3-13必记公式"><a href="#3-13必记公式" class="headerlink" title="3.13必记公式"></a>3.13必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221129.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221146.jpg" alt></p>
<h2 id="3-14必记公式"><a href="#3-14必记公式" class="headerlink" title="3.14必记公式"></a>3.14必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221208.jpg" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-08_221221.jpg" alt></p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法之主从复合句1</title>
    <url>/2020/03/08/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%90%88%E5%8F%A51/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>v + sth + as + sth 把…看做…<br>sb + v + that从句  sb觉得..</p>
<h2 id="主语从句"><a href="#主语从句" class="headerlink" title="主语从句"></a>主语从句</h2><ol>
<li>That the plates are moving is now beyond dispute.—-&gt;毋庸置疑现在陆板块在移动<ol>
<li>plate n.盘子，大陆板块</li>
<li>dispute v.争议</li>
<li>beyond dispute=beyond doubt 毋庸置疑的</li>
<li>beyond words 溢于言表</li>
<li>beyond our control 失控</li>
<li>beyond the comprehension 无法理解的  comprehension n.理解，包含</li>
<li>the year 2020 and beyond 2020年及以后</li>
</ol>
</li>
<li>Where to turn for expert information is question facing many people today.—-&gt;向哪儿寻求专门的信息是今天摆在大家免检的问题<ol>
<li>turn for 寻求，为了</li>
<li>expert n.专家  adj.专门的，熟练的</li>
<li>face 摆在…面前，物+face+人，人+be faced with+物</li>
</ol>
</li>
<li>Whether the results will be valuable, meaningless, or even misleading depends partly upon the tool itself but largely upon the user.—-&gt;结果是否是有价值的，无意义的或甚至误导的部分取决于工具本身而大部分取决于使用者<ol>
<li>depend on/upon = rely on/upon = rest on = lean on </li>
</ol>
</li>
<li>It may be said that the measure of the worth of any social institution is its effect in enlarging and improving experience.—-&gt;可以说，任何社会机构在丰富经验上的作用是值得衡量的<ol>
<li>measure n.措施，<strong>衡量</strong></li>
<li>institution n.体系，机构，学校</li>
<li>effect n.影响，作用</li>
<li>effective adj.有作用的</li>
<li>efficiency n.效率，功效</li>
<li>efficient adj.有效率的</li>
<li>experience n.经历，经验</li>
<li>A of B of C—-&gt;C的B的A<a id="more"></a></li>
</ol>
</li>
<li>Furthermore, it is obvious that the strength of a country’s economy is directly bound<br>up with the efficiency of its agriculture and industry, and that this in turn rests upon<br>the efforts of scientists and technologists of all kinds.—-&gt;此外，很明显国家的经济力量是直接与工农业效率紧密联系的，工农业的效率反过来又依赖各行各业的科学家和技术工人的努力<ol>
<li>furthermore=moreover 此外，而且</li>
<li>strength n.力量，力气，strengthen v.加强</li>
<li>bound up with 与…密切联系，bound n.界限</li>
<li>in turn 依次轮流，反过来</li>
</ol>
</li>
<li>常用的表达还有：<ol>
<li>It is important/vital/essential/crucial/necessary/natural/strange/surprising/possible/better that…</li>
<li>It is clear/obvious that…</li>
<li>It is possible/likely that…</li>
<li>It is certain that…—-&gt;确定的是…</li>
<li>It is fortunate that…—-&gt;幸运的是…</li>
<li>It is a fact that…</li>
<li>It is a piece of good news that…</li>
<li>It is a good thing that…</li>
<li>It is a shame that…—-&gt;…真是太不像话了</li>
<li>It is an honor that…—-&gt;…是一种荣誉</li>
<li>It is common knowledge that…—-&gt;…是一种常识</li>
<li>It is a miracle that…—-&gt;奇迹是…</li>
<li>It is a pity/no wonder that…—-&gt;难怪…</li>
<li>It seems that…—-&gt;似乎是…</li>
<li>It happens that…—-&gt;碰巧/恰巧…</li>
<li>It turns out that…—-&gt;结果证明是…</li>
</ol>
</li>
</ol>
<h2 id="宾语从句"><a href="#宾语从句" class="headerlink" title="宾语从句"></a>宾语从句</h2><ol start="7">
<li>The researches suggest that capuchin monkeys, like humans, are guided by social<br>emotions.—-&gt;研究表明，像人一样的猴子被社会情绪指导<ol>
<li>suggest v.暗示表明，建议</li>
<li>unlike 不像</li>
<li>dislike 不喜欢</li>
<li>likely 可能的</li>
<li>unlikely 不可能的</li>
</ol>
</li>
<li>At the same time these computers record which hours are busiest and which employees are the most efficient, allowing personnel and staffing assignments to be made accordingly.—-&gt;同时，这些计算机记录下哪些时间是最忙的，哪些员工是最有效率的，这样就能有所根据的做出全体员工的分配<ol>
<li>record 记录</li>
<li>personnel n.人事部门，全体人员</li>
<li>assignment n.分配，任务，作业</li>
<li>according adj.有所根据的</li>
<li>后缀-ee表被动，-er表主动：employee雇员，employer雇工</li>
<li>retiree 退休人员，retire v.退休</li>
<li>donatee受赠人，donater捐赠人</li>
<li>payee 收款人，payer付款人</li>
</ol>
</li>
<li>The Biotechnology Industry Organization (BIO), a trade group, assured members that this was just a “preliminary step” in a longer battle.—-&gt;生物科技工业组织，一个贸易团体，向成员确保这仅仅是长战役中的初步步骤<ol>
<li>assure v.确保 assure sb sth 确保某人某事</li>
<li>preliminary adj.初始的，初步的</li>
<li>battle n.战斗，战争</li>
</ol>
</li>
<li>“The test of any democratic society,” he wrote in a Wall Street Journal column, “lies not in how well it can control expression but in whether it gives freedom of thought and expression the widest possible latitude.”—-&gt;他在《华尔街日报》的一片专栏中写道：民主社会的考验不在于它能在多大程度上控制言论而在于它是否能在可能广泛的范围中给与思想和言论的自由<ol>
<li>democratic 民主的，domestic 国内的</li>
<li>how well 在多大程度上，表程度</li>
<li>latitude 纬度，longitude 经度</li>
<li>attitude 态度，altitude 高度</li>
<li>gratitude 感恩，感谢</li>
</ol>
</li>
<li>Hearing allegations of cruelty to animals in research settings, many are perplexed that anyone would deliberately harm an animal.—-&gt;听到研究室对待动物残忍的断言，许多人很困惑：任何人将会故意伤害动物<ol>
<li>allegation 断言，宣称</li>
<li>cruelty 残忍的</li>
<li>setting 环境，实验室</li>
<li>perplex 迷惑的=confuse</li>
<li>deliberately 故意的，深思熟虑的</li>
<li>deliberation n.谨慎，从容</li>
</ol>
</li>
<li>We must make it clear that the parties involved are to make every effort to curb the<br>pollution.—-&gt;我们必须明确表示，相关部门将尽力控制污染<ol>
<li>party 相关部门，政党</li>
<li>involve 涉及</li>
<li>make every effort to 尽力做某事</li>
<li>spare no efforts to do n不遗余力做某事</li>
<li>curb 控制=control</li>
</ol>
</li>
<li>The kind of activity makes it less likely that the court’s decisions will be accepted as<br>impartial judgments.—-&gt;这种活动使法院的决定将会被公平判决所接受变得不大可能<ol>
<li>court n.法院</li>
<li>impartial 不偏不倚的（=fair=bias=unbiased）</li>
<li>partial 偏见的（=bias）</li>
</ol>
</li>
</ol>
<h2 id="表语从句"><a href="#表语从句" class="headerlink" title="表语从句"></a>表语从句</h2><ol start="13">
<li>This may be because some people do not have the genes necessary to generate particular smell receptors in the nose.—-&gt;这可能因为一些人没有必要基因在鼻子中去生成特殊气味接收器<ol>
<li>receptor 接收器</li>
<li>receiver 接收者，收音机</li>
<li>recipient 受助者，受体</li>
</ol>
</li>
<li>It is as though 20 years of ever tougher reforms of the job search and benefit administration system never happened.—-&gt;这好像20年来求职和有益于管理体系的艰难改革从未发生过<ol>
<li>as though/if 似乎好像</li>
<li>ever+adj.比较级 表加强语气</li>
<li>tough adj.艰难的，严格的</li>
<li>tough girl 女汉子</li>
<li>tough guy 难缠的家伙</li>
<li>benefit 有益于，福利，救助金</li>
<li>（津贴，福利）<strong>allowance，subsidy，grant，bonus，pension，entitlement，compensation</strong></li>
</ol>
</li>
<li>One more reason not to lose sleep over the rise in oil prices is that, unlike the rises in the 1970, it has not occurred against the background of general commodity price inflation and global excess demand.—-&gt;不应因油价上涨而失眠的另一个原因是，不像在1970年上涨的那样，它并没有发生在商品价格普遍上涨的背景下通货膨胀和全球需求过剩。<ol>
<li>one more 再一个</li>
<li>lose sleep over <strong>担忧</strong></li>
<li>against the background of <strong>在…背景之下</strong></li>
<li>general 普通的（=common）</li>
<li>commodity 货物（=goods）</li>
<li>inflate 膨胀</li>
<li>excess adj.过量的，n.过量</li>
<li>excessive adj.过多的，极度的</li>
<li>excessively=extremely=very</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>考研英语</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>8-Hibernate检索方式</title>
    <url>/2020/03/06/8-Hibernate%E6%A3%80%E7%B4%A2%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="3种检索方式"><a href="#3种检索方式" class="headerlink" title="3种检索方式"></a>3种检索方式</h2><ul>
<li>HQL检索方式：使用面向对象的HQL查询语言。（使用最广的，最常用的）</li>
<li>QBC检索方式：使用QBC（Query By Criteria）API来检索对象。这种API封装了基于字符串形式的查询语句，提供了更加面向对象的接口。</li>
<li>本地SQL检索方式：使用本地数据库的SQL查询语句。（简单来说就是普通的sql语句查找，只不过调用NativeQuery接口）</li>
</ul>
<h2 id="HQL检索方式"><a href="#HQL检索方式" class="headerlink" title="HQL检索方式"></a>HQL检索方式</h2><ol>
<li>HQL语句中<strong>关键字大小写无关</strong>，但习惯将关键字小写。</li>
<li>from 关键字后面<strong>是类名不是数据库表名</strong>，类名需<strong>区分大小写</strong>。</li>
<li>where 子句中给出的是<strong>类的属性名而不是数据库表字段名</strong>，其中属性名<strong>必须区分大小写</strong>。</li>
</ol>
<a id="more"></a>

<p>查询返回结果</p>
<ul>
<li>list()：返回List类型的查询结果，返回所有满足条件的对象。</li>
<li>uniqueResult()：返回单个对象</li>
</ul>
<p>where子句支持的各种运算符。</p>
<table>
<thead>
<tr>
<th align="center">程序中指定的连接类型</th>
<th align="center">HQL运算符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">比较运算符</td>
<td align="center">=、&lt;&gt;、&gt;=、&lt;=、&gt;、&lt;、is null、is not null</td>
</tr>
<tr>
<td align="center">范围运算符</td>
<td align="center">in、not in、between…and、not between…and</td>
</tr>
<tr>
<td align="center">字符串模式匹配运算符</td>
<td align="center">like</td>
</tr>
<tr>
<td align="center">逻辑运算符</td>
<td align="center">and、or、not</td>
</tr>
</tbody></table>
<p>HQL缺点：</p>
<ul>
<li>代码更加零乱，可读性降低；</li>
<li>难以进行性能优化；</li>
<li>引入额外的安全风险。</li>
</ul>
<p>HQL子查询：</p>
<ol>
<li>size()，获得集合中元素的个数；</li>
<li>maxIndex()，对于建立索引的集合，获得最大索引值；</li>
<li>minIndex()，对于建立索引的集合，获得最小索引值；</li>
<li>elements()，获得集合中所有元素。</li>
</ol>
<h3 id="检索所有记录"><a href="#检索所有记录" class="headerlink" title="检索所有记录"></a>检索所有记录</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"select u from User u"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>
<h3 id="多态查询：查询出当前类以及所有子类的实例。"><a href="#多态查询：查询出当前类以及所有子类的实例。" class="headerlink" title="多态查询：查询出当前类以及所有子类的实例。"></a>多态查询：查询出当前类以及所有子类的实例。</h3><p>Employee 有两个子类：HourlyEmployee 和SalariedEmployee。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Query query = session.createQuery(<span class="string">"from Employee"</span>);</span><br><span class="line">List employeeList = query.list();</span><br></pre></td></tr></table></figure>

<h3 id="检索单独字段"><a href="#检索单独字段" class="headerlink" title="检索单独字段"></a>检索单独字段</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"select u.userName from User u"</span>;<span class="comment">//返回所有userName，其中涉及别名u</span></span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="检索多个字段，list-返回结果中List元素类型为Object数组"><a href="#检索多个字段，list-返回结果中List元素类型为Object数组" class="headerlink" title="检索多个字段，list()返回结果中List元素类型为Object数组"></a>检索多个字段，list()返回结果中List元素类型为Object数组</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"select u.userName, u.password from User u"</span>; </span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;Object[]&gt; userList = query.list();</span><br><span class="line">Iterator&lt;Object[]&gt; it = userList.iterator();</span><br><span class="line"><span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">	Object[] val = it.next();</span><br><span class="line">    System.out.println(val[<span class="number">0</span>]);</span><br><span class="line">    System.out.println(val[<span class="number">1</span>] + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询多个字段，并将list-返回结果中List元素改为User对象引用，需在User中添加相应的构造方法"><a href="#查询多个字段，并将list-返回结果中List元素改为User对象引用，需在User中添加相应的构造方法" class="headerlink" title="查询多个字段，并将list()返回结果中List元素改为User对象引用，需在User中添加相应的构造方法"></a>查询多个字段，并将list()返回结果中List元素改为User对象引用，需在User中添加相应的构造方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"select new User(u.userName, u.password) from User u"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u where u.userName='zs3'"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="返回单个对象"><a href="#返回单个对象" class="headerlink" title="返回单个对象"></a>返回单个对象</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u where u.userName='zs3'"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">User user = (User) query.uniqueResult();</span><br><span class="line">System.out.println(user);</span><br></pre></td></tr></table></figure>

<h3 id="group-by-子句"><a href="#group-by-子句" class="headerlink" title="group by 子句"></a>group by 子句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u Order by u.userName"</span>;</span><br><span class="line">String hql = <span class="string">"from User u Order by u.userName desc"</span>;</span><br><span class="line">String hql = <span class="string">"from User u Order by u.userName, u.id desc"</span>;<span class="comment">//降序</span></span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="order-by子句"><a href="#order-by子句" class="headerlink" title="order by子句"></a>order by子句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u group by u.age having u.id &lt; 5"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;User&gt; userList = query.getResultList();</span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="having子句"><a href="#having子句" class="headerlink" title="having子句"></a>having子句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u group by u.age having u.id &lt; 5"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List&lt;User&gt; userList = query.getResultList();</span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="参数绑定"><a href="#参数绑定" class="headerlink" title="参数绑定"></a>参数绑定</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u where u.userName=?"</span>;</span><br><span class="line">String hql = <span class="string">"from User u where u.userName=:userName"</span>;<span class="comment">//对应setProperties</span></span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line"></span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setUserName(<span class="string">"zs5"</span>);</span><br><span class="line">query.setProperties(user);<span class="comment">//用于把命名参数与一个对象的属性值绑定，并且参数名称要与对象属性名称一致。</span></span><br><span class="line"></span><br><span class="line">query.setParameter(<span class="number">0</span>, user);<span class="comment">//setParameter() 参数位置从0开始</span></span><br><span class="line"></span><br><span class="line">query.setParameter(<span class="number">0</span>, <span class="string">"zs6"</span>);</span><br><span class="line"></span><br><span class="line">query.setParameter(<span class="string">"userName"</span>,<span class="string">"zs6"</span>);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="delete语句"><a href="#delete语句" class="headerlink" title="delete语句"></a>delete语句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"delete from Users where id = ?"</span>;</span><br><span class="line">Query queryDelete = session.createQuery(hql);</span><br><span class="line">queryDelete.setParameter(<span class="string">"id"</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> num = queryDelete.executeUpdate();</span><br><span class="line">System.out.println(num);</span><br></pre></td></tr></table></figure>

<h3 id="update语句"><a href="#update语句" class="headerlink" title="update语句"></a>update语句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"update User set userName=:name where id=:id"</span>;</span><br><span class="line">Query queryUpdate = session.createQuery(hql);</span><br><span class="line">queryUpdate.setParameter(<span class="string">"name"</span>, <span class="string">"lucy"</span>);</span><br><span class="line">queryUpdate.setParameter(<span class="string">"id"</span>, <span class="keyword">new</span> Integer(<span class="number">2</span>));</span><br><span class="line"><span class="keyword">int</span> row = queryUpdate.executeUpdate();</span><br><span class="line">System.out.println(row);</span><br></pre></td></tr></table></figure>

<h3 id="where子句中嵌入子查询"><a href="#where子句中嵌入子查询" class="headerlink" title="where子句中嵌入子查询"></a>where子句中嵌入子查询</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User u where (select count(o) from u.orderSet o) &gt; 0"</span>;<span class="comment">//此处where不能是count(orderSet)&gt;0,因为orderSet是集合</span></span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">List userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String hql = <span class="string">"from User"</span>;</span><br><span class="line">Query query = session.createQuery(hql);</span><br><span class="line">query.setFirstResult(<span class="number">0</span>);<span class="comment">//设定从哪个对象开始检索。</span></span><br><span class="line">query.setMaxResults(<span class="number">3</span>);<span class="comment">//设定一次检索对象的数目。</span></span><br><span class="line">List&lt;User&gt; userList = query.list();</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="引用查询"><a href="#引用查询" class="headerlink" title="引用查询"></a>引用查询</h3><p>在O/R映射xml文件中：<code>&lt;query name=&quot;findUser&quot;&gt;from User&lt;/query&gt;</code><br>java:<code>Query query = session.createNamedQuery(&quot;findUser&quot;,User.class);</code></p>
<h2 id="QBC检索方式"><a href="#QBC检索方式" class="headerlink" title="QBC检索方式"></a>QBC检索方式</h2><p>看作是传统SQL的对象化表示</p>
<p>Restrictions类:</p>
<table>
<thead>
<tr>
<th align="left">运算类型</th>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.eq</td>
<td align="left">等于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.ne</td>
<td align="left">不等于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.gt</td>
<td align="left">大于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.ge</td>
<td align="left">大于等于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.lt</td>
<td align="left">小于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.le</td>
<td align="left">小于等于</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.isNull</td>
<td align="left">等于空值</td>
</tr>
<tr>
<td align="left">比较运算符</td>
<td align="left">Restrictions.isNotNull</td>
<td align="left">非空值</td>
</tr>
<tr>
<td align="left">范围运算符</td>
<td align="left">Restrictions.in</td>
<td align="left">等于列表中的某个值</td>
</tr>
<tr>
<td align="left">范围运算符</td>
<td align="left">Restrictions.not(Restrictions.in)</td>
<td align="left">不等于列表中的任意值</td>
</tr>
<tr>
<td align="left">范围运算符</td>
<td align="left">Restrictions.between</td>
<td align="left">大于等于值1小于等于值2</td>
</tr>
<tr>
<td align="left">字符串模糊匹配</td>
<td align="left">Restrictions.like</td>
<td align="left">字符串模糊匹配 like</td>
</tr>
<tr>
<td align="left">逻辑运算符</td>
<td align="left">Restrictions.and</td>
<td align="left">逻辑与</td>
</tr>
<tr>
<td align="left">逻辑运算符</td>
<td align="left">Restrictions.or</td>
<td align="left">逻辑或</td>
</tr>
<tr>
<td align="left">逻辑运算符</td>
<td align="left">Restrictions.not</td>
<td align="left">逻辑非</td>
</tr>
<tr>
<td align="left">### 检索姓名为 zs8 的所有用户</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.创建Criteria对象</span></span><br><span class="line">Criteria criteria=session.createCriteria(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="comment">//2.设置条件</span></span><br><span class="line">Criterion c1= Restrictions.eq(<span class="string">"userName"</span>, <span class="string">"zs8"</span>);</span><br><span class="line">Criterion c2= Restrictions.eq(<span class="string">"password"</span>, <span class="string">"1238"</span>);<span class="comment">//多项查询</span></span><br><span class="line">Criterion criterion=Restrictions.and(c1,c2);</span><br><span class="line"></span><br><span class="line">Criterion c1= Restrictions.between(<span class="string">"id"</span>,<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">            </span><br><span class="line"><span class="comment">//3.加到对象中去</span></span><br><span class="line">criteria.add(c1);</span><br><span class="line"></span><br><span class="line">criteria.add(criterion);</span><br><span class="line"><span class="comment">//4.执行查询</span></span><br><span class="line">List result = criteria.list();</span><br><span class="line">System.out.println(result);</span><br></pre></td></tr></table></figure>


<h2 id="本地SQL检索方式"><a href="#本地SQL检索方式" class="headerlink" title="本地SQL检索方式"></a>本地SQL检索方式</h2><p>一般的数据库语句(与hibernate无关，只是提供了一个接口)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String sql=<span class="string">"select * from  user8"</span>;</span><br><span class="line">NativeQuery query = session.createNativeQuery(sql, User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">List list = query.list();</span><br><span class="line">System.out.println(list);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>考研数学必记公式3.2-3.7</title>
    <url>/2020/03/05/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6%E5%BF%85%E8%AE%B0%E5%85%AC%E5%BC%8F3-2-3-7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="3-2必记公式"><a href="#3-2必记公式" class="headerlink" title="3.2必记公式"></a>3.2必记公式</h2><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222447.png" alt></p>
<h2 id="3-3必记公式"><a href="#3-3必记公式" class="headerlink" title="3.3必记公式"></a>3.3必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222507.png" alt><br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-06_171310.png" alt></p>
<h2 id="3-4必记公式"><a href="#3-4必记公式" class="headerlink" title="3.4必记公式"></a>3.4必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222521.png" alt></p>
<h2 id="3-5必记公式"><a href="#3-5必记公式" class="headerlink" title="3.5必记公式"></a>3.5必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222532.png" alt></p>
<h2 id="3-6必记公式"><a href="#3-6必记公式" class="headerlink" title="3.6必记公式"></a>3.6必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222544.png" alt></p>
<h2 id="3-7必记公式"><a href="#3-7必记公式" class="headerlink" title="3.7必记公式"></a>3.7必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222558.png" alt></p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>考研数学必记公式2.24-2.29</title>
    <url>/2020/03/05/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6%E5%BF%85%E8%AE%B0%E5%85%AC%E5%BC%8F2-24-2-29/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="2-24必记公式"><a href="#2-24必记公式" class="headerlink" title="2.24必记公式"></a>2.24必记公式</h2><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222028.png" alt></p>
<h2 id="2-25必记公式"><a href="#2-25必记公式" class="headerlink" title="2.25必记公式"></a>2.25必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222045.png" alt></p>
<h2 id="2-26必记公式"><a href="#2-26必记公式" class="headerlink" title="2.26必记公式"></a>2.26必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222057.png" alt></p>
<h2 id="2-27必记公式"><a href="#2-27必记公式" class="headerlink" title="2.27必记公式"></a>2.27必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222112.png" alt></p>
<h2 id="2-28必记公式"><a href="#2-28必记公式" class="headerlink" title="2.28必记公式"></a>2.28必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222124.png" alt></p>
<h2 id="2-29必记公式"><a href="#2-29必记公式" class="headerlink" title="2.29必记公式"></a>2.29必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_222133.png" alt></p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>考研数学必记公式2.17-2.22</title>
    <url>/2020/03/05/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6%E5%BF%85%E8%AE%B0%E5%85%AC%E5%BC%8F2-17-2-22/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="2-17必记公式"><a href="#2-17必记公式" class="headerlink" title="2.17必记公式"></a>2.17必记公式</h2><a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221648.png" alt></p>
<h2 id="2-18必记公式"><a href="#2-18必记公式" class="headerlink" title="2.18必记公式"></a>2.18必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221720.png" alt></p>
<h2 id="2-19必记公式"><a href="#2-19必记公式" class="headerlink" title="2.19必记公式"></a>2.19必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221737.png" alt></p>
<h2 id="2-20必记公式"><a href="#2-20必记公式" class="headerlink" title="2.20必记公式"></a>2.20必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221803.png" alt></p>
<h2 id="2-21必记公式"><a href="#2-21必记公式" class="headerlink" title="2.21必记公式"></a>2.21必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221825.png" alt></p>
<h2 id="2-22必记公式"><a href="#2-22必记公式" class="headerlink" title="2.22必记公式"></a>2.22必记公式</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-05_221842.png" alt></p>
]]></content>
      <categories>
        <category>考研数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql中的4中外键形式</title>
    <url>/2020/03/05/mysql%E4%B8%AD%E7%9A%844%E4%B8%AD%E5%A4%96%E9%94%AE%E5%BD%A2%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>使用Navicat for mysql设计外键的时候，删除时和更新时两列有四个值可以选择：</p>
<ol>
<li>CASCADE<ul>
<li>父表delete、update的时候，子表会delete、update掉关联记录；</li>
</ul>
</li>
<li>NO ACTION<ul>
<li>父表delete、update的时候，子表会将关联记录的外键字段所在列设为null，所以注意在设计子表时外键不能设为not null；</li>
</ul>
</li>
<li>RESTRICT<ul>
<li>如果想要删除父表的记录时，而在子表中有关联该父表的记录，则不允许删除父表中的记录；</li>
</ul>
</li>
<li>SET NULL<ul>
<li>同 RESTRICT，也是首先先检查外键；</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernate小例子</title>
    <url>/2020/03/04/Hibernate%E5%B0%8F%E4%BE%8B%E5%AD%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h2><p>高考录取之后，要给录取的学生分配相关信息，需要一个学生管理系统，已知基本信心包含姓名、学号，学生还有年龄，需要给学生制作一卡通，一卡通中包含基本信息和银行卡号，还要给学生分配班级，开学后学生选课后保存选课信息。</p>
<ol>
<li>实现保存班级、保存学生信息及一卡通信息</li>
<li>学生选课后保存选课信息</li>
<li>通过查询一个学生能够找到一卡通，也能通过一卡通定位到学生</li>
<li>通过查询一个学生能够知道他所在班级，通过班级能找到这个班的所有学生</li>
<li>通过找学生能够找到所选择的课程，通过课程能找到选修这门课的所有学生</li>
</ol>
<a id="more"></a>

<h2 id="整理出相关信息并列表如下"><a href="#整理出相关信息并列表如下" class="headerlink" title="整理出相关信息并列表如下"></a>整理出相关信息并列表如下</h2><p>Student表</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Id</td>
<td align="center">int</td>
<td align="center">自增字段</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">string</td>
<td align="center">姓名</td>
</tr>
<tr>
<td align="center">number</td>
<td align="center">string</td>
<td align="center">学号</td>
</tr>
<tr>
<td align="center">age</td>
<td align="center">int</td>
<td align="center">年龄</td>
</tr>
<tr>
<td align="center">classId</td>
<td align="center">int</td>
<td align="center">班级id</td>
</tr>
</tbody></table>
<p>IdCard表</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Id</td>
<td align="center">int</td>
<td align="center">自增字段</td>
</tr>
<tr>
<td align="center">bankNo</td>
<td align="center">string</td>
<td align="center">银行卡号</td>
</tr>
<tr>
<td align="center">StudentId</td>
<td align="center">int</td>
<td align="center">学生id</td>
</tr>
</tbody></table>
<p>BaseClass表(不使用Class,与关键字class冲突)</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Id</td>
<td align="center">int</td>
<td align="center">自增字段</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">string</td>
<td align="center">班级名</td>
</tr>
</tbody></table>
<p>Course表</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Id</td>
<td align="center">int</td>
<td align="center">自增字段</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">string</td>
<td align="center">课程名</td>
</tr>
</tbody></table>
<p>StudentCourse表</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">studentId</td>
<td align="center">int</td>
<td align="center">学生id</td>
</tr>
<tr>
<td align="center">courseId</td>
<td align="center">int</td>
<td align="center">课程id</td>
</tr>
</tbody></table>
<h2 id="研究关联映射类型"><a href="#研究关联映射类型" class="headerlink" title="研究关联映射类型"></a>研究关联映射类型</h2><ul>
<li><p>学生和一卡通：一对一</p>
<ul>
<li>学生类中添加加一卡通属性</li>
<li>一卡通类中添加学生属性</li>
<li>一卡通类中添加学生id外键</li>
<li>相对应的xml文件添加<code>&lt;one-to-one name=&quot;&quot; property-ref=&quot;&quot; cascade=&quot;&quot; &gt;&lt;/one-to-one&gt;</code></li>
</ul>
</li>
<li><p>学生和班级：多对一</p>
<ul>
<li><p>学生表中添加班级id外键</p>
</li>
<li><p>在班级类中添加set集合<code>Set&lt;Student&gt; students = new HashSet&lt;&gt;(0);</code></p>
</li>
<li><p>相对应的在各自的xml文件中添加<br><code>&lt;many-to-one name=&quot;&quot; column=&quot;&quot;&gt;&lt;/many-to-one&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>学生和课程：多对多</p>
<ul>
<li>在学生类中添加<code>Set&lt;Course&gt; courses = new HashSet&lt;&gt;()</code></li>
<li>在课程类中添加<code>Set&lt;Student&gt; students = new HashSet&lt;&gt;();</code></li>
<li>衍生出StudentCourse表，添加相对应外键</li>
<li>在各自的xml文件添加<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">table</span>=<span class="string">""</span> <span class="attr">inverse</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"studentId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">""</span> <span class="attr">column</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="创建数据库student-management-system"><a href="#创建数据库student-management-system" class="headerlink" title="创建数据库student_management_system"></a>创建数据库student_management_system</h2></li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`class`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`class`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">2</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`course`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`course`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`idcard`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`idcard`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`bankNo`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`studentId`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`studentId`</span> (<span class="string">`studentId`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`idcard_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`studentId`</span>) <span class="keyword">REFERENCES</span> <span class="string">`student`</span> (<span class="string">`id`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">4</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`student`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`number`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`age`</span> <span class="built_in">int</span>(<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`classId`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`classId`</span> (<span class="string">`classId`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`student_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`classId`</span>) <span class="keyword">REFERENCES</span> <span class="string">`class`</span> (<span class="string">`id`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">4</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`studentcourse`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`studentcourse`</span> (</span><br><span class="line">  <span class="string">`studentId`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`courseId`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`studentId`</span> (<span class="string">`studentId`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`courseId`</span> (<span class="string">`courseId`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`studentcourse_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`studentId`</span>) <span class="keyword">REFERENCES</span> <span class="string">`student`</span> (<span class="string">`id`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span>,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`studentcourse_ibfk_2`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`courseId`</span>) <span class="keyword">REFERENCES</span> <span class="string">`course`</span> (<span class="string">`id`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>

<h2 id="eclipse创建4个类及其相对应的xml文件-注解方式有时间再写"><a href="#eclipse创建4个类及其相对应的xml文件-注解方式有时间再写" class="headerlink" title="eclipse创建4个类及其相对应的xml文件(注解方式有时间再写)"></a>eclipse创建4个类及其相对应的xml文件(注解方式有时间再写)</h2><p>注：</p>
<ul>
<li>以下由于在运行过程中出现找不到属性得相关问题，所以一律采取xml中class写完整路径</li>
<li>hibernate.cfg.xml中的映射路径是<br><code>&lt;mapping resource=&quot;com/studentmanagementsystem/entity/Student.hbm.xml&quot; /&gt;</code><br>而不是<br><code>&lt;mapping class=&quot;com.studentmanagementsystem.entity.Student.hbm.xml&quot; /&gt;</code></li>
</ul>
<p>Student.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String number;</span><br><span class="line">	<span class="keyword">private</span> Integer age;</span><br><span class="line">	<span class="keyword">private</span> BaseClass baseClass;</span><br><span class="line">	<span class="keyword">private</span> IdCard idCard;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;Course&gt; courses = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Student.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.studentmanagement.entity.Student"</span> <span class="attr">table</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"number"</span> <span class="attr">column</span>=<span class="string">"number"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"idCard"</span> <span class="attr">property-ref</span>=<span class="string">"student"</span> <span class="attr">cascade</span>=<span class="string">"all"</span> &gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"baseClass"</span> <span class="attr">column</span>=<span class="string">"classId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"courses"</span> <span class="attr">table</span>=<span class="string">"studentcourse"</span> <span class="attr">inverse</span>=<span class="string">"false"</span> <span class="attr">cascade</span>=<span class="string">"all"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"studentId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.studentmanagement.entity.Course"</span> <span class="attr">column</span>=<span class="string">"courseId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>IdCard.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IdCard</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String bankNo;</span><br><span class="line">	<span class="keyword">private</span> Student student;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IdCard.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.studentmanagement.entity.IdCard"</span> <span class="attr">table</span>=<span class="string">"idcard"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"bankNo"</span> <span class="attr">column</span>=<span class="string">"bankNo"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"student"</span> <span class="attr">column</span>=<span class="string">"studentId"</span> <span class="attr">unique</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>BaseClass.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;Student&gt; students = <span class="keyword">new</span> HashSet&lt;&gt;(<span class="number">0</span>);</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BaseClass.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.studentmanagement.entity.BaseClass"</span> <span class="attr">table</span>=<span class="string">"class"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"classId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"com.studentmanagement.entity.Student"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Course.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;Student&gt; students = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Course.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.studentmanagement.entity.Course"</span> <span class="attr">table</span>=<span class="string">"course"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span> <span class="attr">table</span>=<span class="string">"studentcourse"</span> <span class="attr">inverse</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"courseId"</span> &gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.studentmanagement.entity.Student"</span> <span class="attr">column</span>=<span class="string">"studentId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>简单测试类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Session session = HibernateUtil.openSession();</span><br><span class="line">		Transaction tx = session.beginTransaction();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">// 1.保存班级信息</span></span><br><span class="line">			saveClass(session);</span><br><span class="line">			<span class="comment">// 删除班级信息</span></span><br><span class="line">			<span class="comment">// deleteClass(session);</span></span><br><span class="line">			<span class="comment">// 保存课程信息</span></span><br><span class="line">			<span class="comment">// saveCourse(session);</span></span><br><span class="line">			<span class="comment">// saveStudentCourse(session);</span></span><br><span class="line"><span class="comment">//			 Student student = session.get(Student.class, new Integer(1));</span></span><br><span class="line"><span class="comment">//			 System.out.println(student.getIdCard().getBankNo());</span></span><br><span class="line"><span class="comment">//			 System.out.println(student.getCourses().toString());</span></span><br><span class="line"><span class="comment">//			 System.out.println(student.getBaseClass().getName());</span></span><br><span class="line"></span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			session.close();</span><br><span class="line">			HibernateUtil.closeSessionFactory();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveStudentCourse</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">		Course course1 = session.get(Course<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">		Student student1 = session.get(Student<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">		student1.getCourses().add(course1);</span><br><span class="line">		session.save(student1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveCourse</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">		Course course = <span class="keyword">new</span> Course();</span><br><span class="line">		course.setName(<span class="string">"java"</span>);</span><br><span class="line">		Course course2 = <span class="keyword">new</span> Course();</span><br><span class="line">		course2.setName(<span class="string">"h5"</span>);</span><br><span class="line">		session.save(course);</span><br><span class="line">		session.save(course2);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteClass</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">		BaseClass baseClass = session.get(BaseClass<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">		session.delete(baseClass);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveClass</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">		BaseClass baseClass = <span class="keyword">new</span> BaseClass();</span><br><span class="line">		baseClass.setName(<span class="string">"测试一班"</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">			Student student = <span class="keyword">new</span> Student();</span><br><span class="line">			student.setAge(<span class="number">20</span>);</span><br><span class="line">			student.setNumber(<span class="string">"no"</span> + i + <span class="number">1</span>);</span><br><span class="line">			student.setName(<span class="string">"学生"</span> + i + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">			IdCard idCard = <span class="keyword">new</span> IdCard();</span><br><span class="line">			idCard.setBankNo(<span class="string">"bankNo"</span> + i + <span class="number">1</span>);</span><br><span class="line">			idCard.setStudent(student);</span><br><span class="line"></span><br><span class="line">			student.setIdCard(idCard);</span><br><span class="line"></span><br><span class="line">			baseClass.getStudents().add(student);</span><br><span class="line">		&#125;</span><br><span class="line">		session.save(baseClass);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-Hibernate操作持久化对象</title>
    <url>/2020/03/04/7-Hibernate%E6%93%8D%E4%BD%9C%E6%8C%81%E4%B9%85%E5%8C%96%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Session缓存"><a href="#Session缓存" class="headerlink" title="Session缓存"></a>Session缓存</h2><p>java生命周期中当对象<strong>空引用</strong>或<strong>隔离引用</strong>时会清理缓存</p>
<h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p>缓存介于应用程序和永久性存储源之间，其作用是降低应用程序直接读写永久性存储源的频率，从而提高应用的运行效率。</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-04_090616.png" alt></p>
<p>缓存内的数据是永久性存储源中的数据的复制，应用程序在运行时从缓存读写数据，在特定的时刻或事件同步缓存和永久性存储源的数据。</p>
<a id="more"></a>

<h3 id="Session缓存的工作过程"><a href="#Session缓存的工作过程" class="headerlink" title="Session缓存的工作过程"></a>Session缓存的工作过程</h3><ul>
<li>当 Session 执行查询方法时，先从 Session 缓存中读取据，如果缓存中有则直接读取，如果缓存中没有，从数据库中查询并加载到Session 缓存中，再从缓存中读取。</li>
<li>当 Session 执行 save()、update() 方法时，将对象持久化到数据库中并将对象加载到 Session 缓存中。<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/2020-03-04_091148.png" alt></li>
</ul>
<h3 id="session实现缓存过程"><a href="#session实现缓存过程" class="headerlink" title="session实现缓存过程"></a>session实现缓存过程</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/Animation.gif" alt></p>
<h3 id="Session清理缓存"><a href="#Session清理缓存" class="headerlink" title="Session清理缓存"></a>Session清理缓存</h3><p>Session在某一时间点按照缓存中对象的属性变化来同步更新数据库的这一过程被称为 Session 清理缓存</p>
<p>缓存清理的时间点：</p>
<ul>
<li>当调用 transaction.commit() 方法时，会先清理缓存，再向数据库提交事务；</li>
<li>当显式调用 Session.flush() 方法时，会清理缓存；</li>
<li>当调用 Session 的查询（不包括 load() 和 get() )方法时，如果缓存中对象的属性有变化则清理缓存。<h3 id="Session对象快照"><a href="#Session对象快照" class="headerlink" title="Session对象快照"></a>Session对象快照</h3><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/session_fuction.gif" alt><h3 id="Session清理缓存的模式"><a href="#Session清理缓存的模式" class="headerlink" title="Session清理缓存的模式"></a>Session清理缓存的模式</h3>setHibernateFlushMode() 用于设定 Session 清理缓存的模式。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">清理缓存模式</th>
<th align="center">Session的查询方法</th>
<th align="center">commit()</th>
<th align="center">flush()</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FlushMode.ALWAYS</td>
<td align="center">清理</td>
<td align="center">清理</td>
<td align="center">清理</td>
</tr>
<tr>
<td align="center">FlushMode.AUTO</td>
<td align="center">缓存中对象的属性有变化时清理，没变化不清理</td>
<td align="center">清理</td>
<td align="center">清理</td>
</tr>
<tr>
<td align="center">FlushMode.COMMIT</td>
<td align="center">不清理</td>
<td align="center">清理</td>
<td align="center">清理</td>
</tr>
<tr>
<td align="center">FlushMode.MANUAL</td>
<td align="center">不清理</td>
<td align="center">不清理</td>
<td align="center">清理</td>
</tr>
<tr>
<td align="center">FlushMode.NEVER</td>
<td align="center"><del>已过时，被MANUAL取代</del></td>
<td align="center"><del>~</del></td>
<td align="center"><del>~</del></td>
</tr>
</tbody></table>
<h3 id="Session缓存的作用"><a href="#Session缓存的作用" class="headerlink" title="Session缓存的作用"></a>Session缓存的作用</h3><ul>
<li>减少数据库访问次数，提高数据访问的效率；</li>
<li>保证缓存中的对象与数据库中相关的记录同步；</li>
<li>当缓存中的持久化对象存在循环关联关系时，Session会保证不出现死循环，以及由死循环引起的堆栈溢出异常。</li>
</ul>
<h2 id="Hibernate对象的生命周期"><a href="#Hibernate对象的生命周期" class="headerlink" title="Hibernate对象的生命周期"></a>Hibernate对象的生命周期</h2><p>Hibernate实体对象生命周期的4种状态</p>
<ul>
<li>Transient(临时状态) ： 刚刚被 new 关键字创建，还没有被持久化，不在Session的缓存中。<ul>
<li>在数据库中<strong>不存在</strong>与之相对应的记录</li>
</ul>
</li>
<li>Persistent(持久化状态) ： 已经被持久化，并加入到 Session 缓存中。<ul>
<li>在数据库中<strong>存在</strong>与之相对应的记录</li>
</ul>
</li>
<li>Detached(游离状态) ： 已经被持久化，但不再处于 Session 缓存中。<ul>
<li>在数据库中<strong>可能存在</strong>与之相对应的记录(前提是没有其他Session实例删除该记录)</li>
</ul>
</li>
<li>Removed(删除状态) ： Session 已经计划将其从数据库删除，并且不再处于 Session 缓存中。<ul>
<li>数据库中<strong>存在</strong>与之对应的记录(已经计划从数据库中删除)</li>
</ul>
</li>
</ul>
<p><img src="/2020/03/04/7-Hibernate%E6%93%8D%E4%BD%9C%E6%8C%81%E4%B9%85%E5%8C%96%E5%AF%B9%E8%B1%A1/2020-03-04_104323.png" alt></p>
<h2 id="Hibernate操作持久化对象"><a href="#Hibernate操作持久化对象" class="headerlink" title="Hibernate操作持久化对象"></a>Hibernate操作持久化对象</h2><h3 id="Session的save-方法"><a href="#Session的save-方法" class="headerlink" title="Session的save()方法"></a>Session的save()方法</h3><ol>
<li>把对象加入缓存中，使其变成持久化对象；</li>
<li>根据映射文件配置的标识符生成器为对象分配一个 OID</li>
<li>计划执行一个 insert，把对象当前属性值组装到 insert 语句中</li>
<li>事务提交后（transaction.commit()）永久的将数据保存到数据库</li>
</ol>
<h3 id="Session的update-方法"><a href="#Session的update-方法" class="headerlink" title="Session的update()方法"></a>Session的update()方法</h3><ol>
<li>把游离对象重新加入 Session 缓存中，使其变为持久化对象；</li>
<li>计划执行一个 update，将对象当前属性组装到 update 语句，执行 update 语句；</li>
<li>事务提交后（transaction.commit()）永久的将数据保存到数据库；</li>
<li>不管对象属性有没有改变都会执行update （通过设置<class>的select-before-update=true改变）。</class></li>
</ol>
<h3 id="Session的saveOrUpdate-方法"><a href="#Session的saveOrUpdate-方法" class="headerlink" title="Session的saveOrUpdate()方法"></a>Session的saveOrUpdate()方法</h3><ul>
<li>如果参数是临时对象—save()</li>
<li>如果参数是游离对象—update()</li>
<li>如果参数是持久化对象—返回</li>
</ul>
<h4 id="Hibernate-如何区分临时对象"><a href="#Hibernate-如何区分临时对象" class="headerlink" title="Hibernate 如何区分临时对象"></a>Hibernate 如何区分临时对象</h4><ul>
<li>对象的 OID 为 null；</li>
<li>如果映射文件中设置了 <id> 的 unsaved-value 属性，并且对象的 id 值与 unsaved-value 设置的值相等。</id></li>
</ul>
<h3 id="Session的delete-方法"><a href="#Session的delete-方法" class="headerlink" title="Session的delete()方法"></a>Session的delete()方法</h3><ol>
<li>检查传入的参数是否是持久化对象，如果是持久化对象将其移出 Session 缓存；</li>
<li>计划执行一个 delete，但是并不立即执行；</li>
<li>当 Session 清理缓存时才执行 delete，比如执行 Session.flush()。<h3 id="Session的load-和get-方法"><a href="#Session的load-和get-方法" class="headerlink" title="Session的load()和get()方法"></a>Session的load()和get()方法</h3></li>
</ol>
<ul>
<li>load() 与 get() 方法都是根据 OID 加载持久化对象。</li>
<li>load() 与 get() 方法的不同点：<ul>
<li>如果数据库中不存在与 OID 对应的记录：<ul>
<li>load() 会抛出 ObjectNotFoundException 异常；</li>
<li>get() 会返回 null。</li>
</ul>
</li>
<li>默认加载策略：<ul>
<li>load() 使用类的延迟加载策略；(在表头查询时较为罕见)</li>
<li>get() 使用类的立即加载策略。</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>教资过，真开心</title>
    <url>/2020/03/03/%E6%95%99%E8%B5%84%E8%BF%87%EF%BC%8C%E7%9C%9F%E5%BC%80%E5%BF%83/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>今天无疑是新型冠状肺炎疫情期间对于我来说最开心幸福的一天了</p>
<p>早上起床，就开始上课，迷迷糊糊上到了11.15，鬼知道其中我经历了什么（两眼不停打架，嘻嘻也许是昨晚睡太迟了）</p>
<p>哈哈 </p>
<p>怎么能是昨晚睡太迟，明明每天都这样【手动狗头】</p>
<p>一直到12.30吃完饭，我才想起来还有教资面试成绩这回事。</p>
<p>那个时候真的是有点想上厕所的样子（我妈把我喂的太饱了  嘻嘻）</p>
<p>然后就是上厕所，打开夸克，输入河北教育考试院—-中小学教师资格证—-成绩查询，进入那内心颤抖的页面</p>
<a id="more"></a>

<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_1.png" alt></p>
<p>输入个人信息，妈的，竟然提示我未查到相关信息（心里一万个草泥马在奔腾），期间未截图</p>
<p>之后打开微博，刷新页面，看到好多人都出分了，也有一部分像我这样苦逼的查不到（这期间我一直在想，是不是真过不了了…）</p>
<p>…</p>
<p>怀着怀疑好奇忐忑的心情，鼓起勇气，再次打开那熟悉的页面：<a href="http://ntce.neea.edu.cn/ntce_ms/query_15831648.html" target="_blank" rel="noopener">链接</a></p>
<p>输入信息，卧槽，我看到了什么，我屮艸芔茻，结果呢可想而知：</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_2.png" alt></p>
<p>给个表情记录下那时的欣喜：</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/haha.jpg" alt></p>
<p>之后就忍不住查查历史成绩，哎，真的是，好险啊，再不过我就si了</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_3.png" alt></p>
<p>于是乎看见微博中教师资格证合格证还能查询，于是就又打开那熟悉的浏览器，此刻心情也是极度开心啊</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_4.png" alt></p>
<p>接下来就是这个最惊喜的页面了，哈哈</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_5.jpg" alt></p>
<p>最后就等着这个了：哈哈哈</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/NTCE_6.jpeg" alt></p>
]]></content>
      <categories>
        <category>教师资格证</category>
      </categories>
      <tags>
        <tag>生活</tag>
      </tags>
  </entry>
  <entry>
    <title>6-SpringMVC-JSTL</title>
    <url>/2020/03/03/6-SpringMVC-JSTL/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h2><p>使用标签库，需要在JSP页面顶端配置：</p>
<p><code>&lt;%@ taglib uri=&quot;http://www.springframework.org/tags/form&quot; prefix=&quot;form&quot;%&gt;</code></p>
<p>常见标签有：</p>
<ul>
<li>Form标签    input标签，radiobutton标签，checkbox标签</li>
<li>Select标签，password标签，textarea标签，hidden标签</li>
<li>Errors标签，HTML5标签</li>
</ul>
<a id="more"></a>

<p>form标签，将命令对象放置到PageContext中，默认名为“command”，并用其他子标签绑定属性值</p>
<p><strong>注：以下标签的path属性为相对应类的属性 要一一对应</strong></p>
<p><code>&lt;form:form commandName=&quot;pro&quot; action=&quot;add&quot; method=&quot;post&quot;&gt;&lt;/form:form&gt;</code></p>
<ul>
<li><p>input标签————<code>&lt;form:input path=&quot;name&quot; /&gt;</code></p>
</li>
<li><p>password标签———<code>&lt;form:password path=&quot;code&quot; value=&quot;123&quot; /&gt;</code>其中value是指定的</p>
</li>
<li><p>radiobutton标签</p>
<ul>
<li><p>方式1：</p>
  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:radiobutton</span> <span class="attr">path</span>=<span class="string">"area"</span> <span class="attr">value</span>=<span class="string">"large"</span> /&gt;</span>大</span><br><span class="line"><span class="tag">&lt;<span class="name">form:radiobutton</span> <span class="attr">path</span>=<span class="string">"area"</span> <span class="attr">value</span>=<span class="string">"small"</span> /&gt;</span>小</span><br></pre></td></tr></table></figure></li>
<li><p>方式2：</p>
  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:radiobuttons</span> <span class="attr">path</span>=<span class="string">"size"</span> <span class="attr">items</span>=<span class="string">"$&#123;sizes &#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>方式3：</p>
  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:radiobuttons</span> <span class="attr">path</span>=<span class="string">"province"</span> <span class="attr">items</span>=<span class="string">"$&#123;provinces &#125;"</span> <span class="attr">itemLabel</span>=<span class="string">"id"</span> <span class="attr">itemValue</span>=<span class="string">"name"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>checkbox标签</p>
<ul>
<li>用法同radiobutton标签</li>
<li>绑定数据时，有3种方式：<ul>
<li>绑定的值是boolean类型，值为true，则复选框被选中<br><code>&lt;form:checkbox path=&quot;sold&quot; /&gt;</code></li>
<li>绑定的值的类型是array或者java.util.Collection，集合中有的值，对应的复选框被选中</li>
<li>对于其它绑定的类型，绑定的值相等，则对应复选框被选中<br><code>&lt;form:checkboxes items=&quot;${colors }&quot; path=&quot;color&quot; /&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>select标签</p>
<ul>
<li>方式1：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:select</span> <span class="attr">path</span>=<span class="string">"skills"</span><span class="attr">items</span>=<span class="string">"$&#123;skills&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>方式2：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:select</span> <span class="attr">path</span>=<span class="string">"province"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form:option</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">label</span>=<span class="string">"请选择..."</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form:options</span> <span class="attr">items</span>=<span class="string">"$&#123;provinces &#125;"</span> <span class="attr">itemLabel</span>=<span class="string">"name"</span> <span class="attr">itemValue</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form:select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>textarea标签</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:textarea</span> <span class="attr">path</span>=<span class="string">"notes"</span> <span class="attr">rows</span>=<span class="string">"3"</span> <span class="attr">cols</span>=<span class="string">"20"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>hidden标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form:hidden</span> <span class="attr">path</span>=<span class="string">"id"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="贴上完整代码"><a href="#贴上完整代码" class="headerlink" title="贴上完整代码"></a>贴上完整代码</h2><p>Product.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String code;</span><br><span class="line">	<span class="keyword">private</span> String area;</span><br><span class="line">	<span class="keyword">private</span> String size;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> province;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> sold;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Province.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Province</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ProductController.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/product"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value = <span class="string">"add"</span>, method = RequestMethod.POST)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">(Product p)</span> </span>&#123;</span><br><span class="line">		System.out.println(p.getId());</span><br><span class="line">		System.out.println(p.getName());</span><br><span class="line">		System.out.println(p.getArea());</span><br><span class="line">		System.out.println(p.getCode());</span><br><span class="line">		System.out.println(p.getProvince());</span><br><span class="line">		System.out.println(p.getSize());</span><br><span class="line">		<span class="keyword">for</span> (String temp : p.getColor()) &#123;</span><br><span class="line">			System.out.println(temp);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value = <span class="string">"add"</span>, method = RequestMethod.GET)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toAdd</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">		Product p = <span class="keyword">new</span> Product();</span><br><span class="line">		p.setId(<span class="number">200</span>);</span><br><span class="line">		p.setName(<span class="string">"pc"</span>);</span><br><span class="line">		p.setCode(<span class="string">"abcde"</span>);</span><br><span class="line">		p.setSold(<span class="keyword">true</span>);</span><br><span class="line">		p.getColor().add(<span class="string">"red"</span>);<span class="comment">//指定颜色为red</span></span><br><span class="line">		p.setProvince(<span class="number">2</span>);</span><br><span class="line">		model.addAttribute(<span class="string">"pro"</span>, p);</span><br><span class="line">		</span><br><span class="line">		List&lt;String&gt; size = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		size.add(<span class="string">"xl"</span>);</span><br><span class="line">		size.add(<span class="string">"xxl"</span>);</span><br><span class="line">		size.add(<span class="string">"xxxl"</span>);</span><br><span class="line">		model.addAttribute(<span class="string">"sizes"</span>, size);</span><br><span class="line"></span><br><span class="line">		List&lt;Province&gt; pros = <span class="keyword">new</span> ArrayList&lt;Province&gt;();</span><br><span class="line">		Province p1 = <span class="keyword">new</span> Province();p1.setId(<span class="number">1</span>);p1.setName(<span class="string">"北京"</span>);</span><br><span class="line">		Province p2 = <span class="keyword">new</span> Province();p2.setId(<span class="number">2</span>);p2.setName(<span class="string">"河北"</span>);</span><br><span class="line">		Province p3 = <span class="keyword">new</span> Province();p3.setId(<span class="number">3</span>);p3.setName(<span class="string">"山东"</span>);</span><br><span class="line">		pros.add(p1);</span><br><span class="line">		pros.add(p2);</span><br><span class="line">		pros.add(p3);</span><br><span class="line">		model.addAttribute(<span class="string">"provinces"</span>, pros);</span><br><span class="line"></span><br><span class="line">		List&lt;String&gt; colors = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		colors.add(<span class="string">"red"</span>);</span><br><span class="line">		colors.add(<span class="string">"green"</span>);</span><br><span class="line">		colors.add(<span class="string">"blue"</span>);</span><br><span class="line">		model.addAttribute(<span class="string">"colors"</span>, colors);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"product"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>product.jsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://www.springframework.org/tags/form"</span> <span class="attr">prefix</span>=<span class="string">"form"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	传统方式的输入框：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"$&#123;pro.name &#125;"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	以下是spring提供的jstl：<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form:form</span> <span class="attr">commandName</span>=<span class="string">"pro"</span> <span class="attr">action</span>=<span class="string">"add"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">		id:<span class="tag">&lt;<span class="name">form:hidden</span> <span class="attr">path</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		name:<span class="tag">&lt;<span class="name">form:input</span> <span class="attr">path</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		code:<span class="tag">&lt;<span class="name">form:password</span> <span class="attr">path</span>=<span class="string">"code"</span> <span class="attr">value</span>=<span class="string">"123"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		area:<span class="tag">&lt;<span class="name">form:radiobutton</span> <span class="attr">path</span>=<span class="string">"area"</span> <span class="attr">value</span>=<span class="string">"large"</span> /&gt;</span>大</span><br><span class="line">		<span class="tag">&lt;<span class="name">form:radiobutton</span> <span class="attr">path</span>=<span class="string">"area"</span> <span class="attr">value</span>=<span class="string">"small"</span> /&gt;</span>小</span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		size:<span class="tag">&lt;<span class="name">form:radiobuttons</span> <span class="attr">path</span>=<span class="string">"size"</span> <span class="attr">items</span>=<span class="string">"$&#123;sizes &#125;"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		province:<span class="tag">&lt;<span class="name">form:radiobuttons</span> <span class="attr">path</span>=<span class="string">"province"</span> <span class="attr">items</span>=<span class="string">"$&#123;provinces &#125;"</span> <span class="attr">itemLabel</span>=<span class="string">"id"</span> <span class="attr">itemValue</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		sold:<span class="tag">&lt;<span class="name">form:checkbox</span> <span class="attr">path</span>=<span class="string">"sold"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		color:<span class="tag">&lt;<span class="name">form:checkboxes</span> <span class="attr">items</span>=<span class="string">"$&#123;colors &#125;"</span> <span class="attr">path</span>=<span class="string">"color"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		province:</span><br><span class="line">		<span class="tag">&lt;<span class="name">form:select</span> <span class="attr">path</span>=<span class="string">"province"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form:option</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">label</span>=<span class="string">"请选择..."</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form:options</span> <span class="attr">items</span>=<span class="string">"$&#123;provinces &#125;"</span> <span class="attr">itemLabel</span>=<span class="string">"name"</span> <span class="attr">itemValue</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form:select</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"add"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form:form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/result.png" alt></p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-Hibernate多对多关联映射</title>
    <url>/2020/03/03/6-Hibernate%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h2><p>在某高校选课系统中，一个学生可以同时选修多门课程，一门课程可以被若干个学生选修，像这样的多对多关联关系，应该如何实现？</p>
<a id="more"></a>

<p>域模型：<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/manytomany.png" alt></p>
<p>数据关系模型：<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/manytomany_data.png" alt></p>
<h2 id="多对多关联映射"><a href="#多对多关联映射" class="headerlink" title="多对多关联映射"></a>多对多关联映射</h2><h3 id="xml"><a href="#xml" class="headerlink" title="xml"></a>xml</h3><p>Student.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String studentNo;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;Course&gt; courseSet = <span class="keyword">new</span> HashSet&lt;Course&gt;();</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Course.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 课程名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> credit;  <span class="comment">// 学分</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Student&gt; studentSet = <span class="keyword">new</span> HashSet&lt;Student&gt;();</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Student.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"course"</span> <span class="attr">table</span>=<span class="string">"studentcourse"</span> <span class="attr">cascade</span>=<span class="string">"all"</span> <span class="attr">inverse</span>=<span class="string">"false"</span>&gt;</span><span class="comment">&lt;!-- inverse表示控制方，course是被控方 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"studentId"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"Course"</span> <span class="attr">column</span>=<span class="string">"courseId"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Course.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"student"</span> <span class="attr">table</span>=<span class="string">"studentcourse"</span> <span class="attr">inverse</span>=<span class="string">"true"</span>&gt;</span><span class="comment">&lt;!-- inverse表示控制方，course是主控方 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"courseId"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"Student"</span> <span class="attr">column</span>=<span class="string">"studentId"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        save();</span><br><span class="line">        getStudent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存学生和课程信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        	createCourses(session);//新建Course对象，保证course的唯一性</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 新建Student对象</span></span><br><span class="line">            Student student = <span class="keyword">new</span> Student();</span><br><span class="line">            student.setName(<span class="string">"张三"</span>);</span><br><span class="line">            student.setStudentNo(<span class="string">"123456"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 选出course对象</span></span><br><span class="line">            Course course = session.get(Course<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//建立关联</span></span><br><span class="line">            student.getCourse().add(course);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保存</span></span><br><span class="line">            session.save(student);</span><br><span class="line">            session.save(course);</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">createCourses</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">    	Course course = <span class="keyword">new</span> Course();</span><br><span class="line">        course.setName(<span class="string">"程序设计"</span>);</span><br><span class="line">        course.setCredit(<span class="number">3</span>);</span><br><span class="line">        session.save(course);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检索学生，并得到该学生选修的课程信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 通过OID检索对象</span></span><br><span class="line">            Student student = session.get(Student<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">            <span class="keyword">for</span>(Course cour : student.getCourse())&#123;</span><br><span class="line">                System.out.println(cour.getName());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><p>Student.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"student"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String studentNo;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;Course&gt; course = <span class="keyword">new</span> HashSet&lt;Course&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStudentNo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentNo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudentNo</span><span class="params">(String studentNum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentNo = studentNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToMany</span></span><br><span class="line">    <span class="meta">@JoinTable</span>(name=<span class="string">"studentcourse"</span>, <span class="comment">//指定关联表</span></span><br><span class="line">        joinColumns=<span class="meta">@JoinColumn</span>(name=<span class="string">"studentId"</span>),<span class="comment">//指向实体对应表的外键</span></span><br><span class="line">        inverseJoinColumns=<span class="meta">@JoinColumn</span>(name=<span class="string">"courseId"</span>))<span class="comment">//指向所关联的实体对应表的外键</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Course&gt; <span class="title">getCourse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCourse</span><span class="params">(Set&lt;Course&gt; course)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.course = course;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Course.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"course"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//课程名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> credit;<span class="comment">//学分</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Student&gt; student = <span class="keyword">new</span> HashSet&lt;Student&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCredit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> credit;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCredit</span><span class="params">(<span class="keyword">int</span> credit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.credit = credit;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ManyToMany</span>(mappedBy=<span class="string">"course"</span>)<span class="comment">//表示关联关系由Student维护</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Student&gt; <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudent</span><span class="params">(Set&lt;Student&gt; student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.student = student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类同上</p>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>5-Hibernate一对多关联映射</title>
    <url>/2020/02/28/5-Hibernate%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h2><p>通常情况下，在一些购物网站系统中，用户和订单之间的关系就是一对多关联关系，并且对于用户来说需要知道自己有哪些订单，对于商家来说需要知道某个订单属于哪个用户，思考这种情况该如何实现？</p>
<h2 id="数据库一对多关联"><a href="#数据库一对多关联" class="headerlink" title="数据库一对多关联"></a>数据库一对多关联</h2><a id="more"></a>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/DB_oneToMany.png" alt></p>
<h2 id="实现单向一对多关联-user—-gt-orders"><a href="#实现单向一对多关联-user—-gt-orders" class="headerlink" title="实现单向一对多关联(user—&gt;orders)"></a>实现单向一对多关联(user—&gt;orders)</h2><h3 id="使用Set集合，List集合，Map集合"><a href="#使用Set集合，List集合，Map集合" class="headerlink" title="使用Set集合，List集合，Map集合"></a>使用Set集合，List集合，Map集合</h3><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Set orderSet = <span class="keyword">new</span> HashSet&lt;Order&gt;();<span class="comment">//Set</span></span><br><span class="line">	<span class="keyword">private</span> List orderList = <span class="keyword">new</span> ArrayList&lt;Order&gt;();<span class="comment">//List</span></span><br><span class="line">    <span class="keyword">private</span> Map orderMap = <span class="keyword">new</span> HashMap&lt;String, Order&gt;();<span class="comment">//Map</span></span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>User.hbn.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.hibernate.entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User"</span> <span class="attr">table</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 映射与Order的一对多关系 key:指定Order中的外键列名 one-to-many中class:指定关联属性的类型--&gt;</span></span><br><span class="line">		     </span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"orderSet"</span> <span class="attr">cascade</span>=<span class="string">"delete"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- column 属性设定所关联类对应表的外键 --&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"userId"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Order"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">list</span> <span class="attr">name</span>=<span class="string">"orderList"</span> <span class="attr">cascade</span>=<span class="string">"delete"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"userId"</span>/&gt;</span></span><br><span class="line">		    <span class="comment">&lt;!-- 指定orders5表中某个用户的订单的顺序 --&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">index</span> <span class="attr">column</span>=<span class="string">"orderIndex"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Order"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">"orderMap"</span> <span class="attr">cascade</span>=<span class="string">"delete"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"userId"</span>/&gt;</span></span><br><span class="line">		    <span class="comment">&lt;!-- type的string也可换为java.lang.String，但不能是character --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">index</span> <span class="attr">column</span>=<span class="string">"orderKey"</span> <span class="attr">type</span>=<span class="string">"string"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Order"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Order.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Order.hbn.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.hibernate.entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Order"</span> <span class="attr">table</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"price"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试类略</p>
<h2 id="实现单向多对一关联-orders—-gt-user"><a href="#实现单向多对一关联-orders—-gt-user" class="headerlink" title="实现单向多对一关联(orders—&gt;user)"></a>实现单向多对一关联(orders—&gt;user)</h2><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Set orderSet = <span class="keyword">new</span> HashSet&lt;Order&gt;();</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>User.hbn.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.hibernate.entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User"</span> <span class="attr">table</span>=<span class="string">"user5"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 映射与Order的一对多关系 </span></span><br><span class="line"><span class="comment">		     key:指定Order中的外键列名</span></span><br><span class="line"><span class="comment">		     one-to-many中class:指定关联属性的类型--&gt;</span></span><br><span class="line">		     </span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"orderSet"</span> <span class="attr">cascade</span>=<span class="string">"delete"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"userId"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Order"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Order.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line">    <span class="keyword">private</span> User user;<span class="comment">//新添加一个User对象，实现映射</span></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Order.hbn.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.hibernate.entity"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Order"</span> <span class="attr">table</span>=<span class="string">"orders5"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"price"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 映射与User的多对一关联关系 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"userId"</span> <span class="attr">class</span>=<span class="string">"User"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试类略</p>
<h2 id="注解方式实现双向关联"><a href="#注解方式实现双向关联" class="headerlink" title="注解方式实现双向关联"></a>注解方式实现双向关联</h2><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Set orderSet = <span class="keyword">new</span> HashSet&lt;Order&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany</span>(cascade=CascadeType.ALL, mappedBy=<span class="string">"user"</span>, targetEntity=Order<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    //<span class="title">mappedBy</span>：表明是双向关联关系，并且与 <span class="title">user</span> 建立对应,此时不需要设置@<span class="title">JoinColumn</span>(<span class="title">name</span></span>=<span class="string">"userId"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * List对应的需要添加：@OrderColumn(name="orderIndex")：指定ORDER表中记录顺序的列名</span></span><br><span class="line"><span class="comment">     * Map对应的需要添加：@MapKeyColumn(name="orderKey") @MapkeyClass(String.class)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set <span class="title">getOrderSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> orderSet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrderSet</span><span class="params">(Set orderSet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.orderSet = orderSet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Order.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"orders"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(Double price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JoinColumn</span>(name=<span class="string">"userId"</span>)<span class="comment">//实现一找多</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//         saveUser();</span></span><br><span class="line"><span class="comment">//        addOrders();</span></span><br><span class="line"><span class="comment">//        getUser();</span></span><br><span class="line">        getOrder();</span><br><span class="line"><span class="comment">//         deleteUser();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 持久化User对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 新建对象</span></span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            user.setUserName(<span class="string">"张三"</span>);</span><br><span class="line">            user.setPassword(<span class="string">"111111"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 保存用户</span></span><br><span class="line">            session.save(user);</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 为已存在的user对象添加订单信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 检索user对象</span></span><br><span class="line">            User user = session.get(User<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//新建Order对象</span></span><br><span class="line">            Order order = <span class="keyword">new</span> Order();</span><br><span class="line">            order.setPrice(<span class="number">30.0</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//建立关联</span></span><br><span class="line"><span class="comment">//            user.getOrderSet().add(order);//user方不能维护关联关系</span></span><br><span class="line">            order.setUser(user);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 更新用户</span></span><br><span class="line">            session.save(order);</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检索用户对象，并获得所关联的订单信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 通过OID检索对象</span></span><br><span class="line">            User user = session.get(User<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">            System.out.println(user.getOrderSet().size());</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检索订单对象，并获得所关联的用户信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 通过OID检索对象</span></span><br><span class="line">            Order order = session.get(Order<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line">            System.out.println(order.getUser().getUserName());</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除用户，并级联删除所关联的订单信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Session session = <span class="keyword">null</span>;</span><br><span class="line">        Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 检索对象</span></span><br><span class="line">            User user = session.get(User<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Integer</span>(1))</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 删除对象</span></span><br><span class="line">            session.delete(user);</span><br><span class="line"></span><br><span class="line">            tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            session.close();<span class="comment">// 关闭session</span></span><br><span class="line">            HibernateUtil.closeSessionFactory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-SpringMVC2</title>
    <url>/2020/02/27/6-SpringMVC2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
  </entry>
  <entry>
    <title>5-SpringMVC1</title>
    <url>/2020/02/27/5-SpringMVC1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="程序搭建过程"><a href="#程序搭建过程" class="headerlink" title="程序搭建过程"></a>程序搭建过程</h2><ol>
<li>创建web工程，导入jar</li>
<li>配置xml文件 3个(web.xml，spring-mvc.xml，applicationContext.xml)<a id="more"></a>
web.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>springmvcdemo1<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span></span><br><span class="line">			classpath*:/applicationContext.xml</span><br><span class="line">		<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/WEB-INF/spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>spring-mvc.xml，与web.xml在同一目录下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/mvc </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/beans/spring-beans-4.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 自动扫描且只扫描@Controller --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.cakeonline"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 基于注解驱动的SpringMVC --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- mvc:annotation-driven enable-matrix-variables="true" / --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 定义JSP文件的位置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:jdbc</span>=<span class="string">"http://www.springframework.org/schema/jdbc"</span> <span class="attr">xmlns:jee</span>=<span class="string">"http://www.springframework.org/schema/jee"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span> <span class="attr">xmlns:task</span>=<span class="string">"http://www.springframework.org/schema/task"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.0.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>Spring公共配置 <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 配置Spring上下文的注解 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.cakeonline"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>编写JSP页面和Controller（@Controller,@RequestMapping,@PathVariable,@RequestParam）</li>
</ol>
<h2 id="Spring概述"><a href="#Spring概述" class="headerlink" title="Spring概述"></a>Spring概述</h2><h3 id="回顾MVC"><a href="#回顾MVC" class="headerlink" title="回顾MVC"></a>回顾MVC</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/MVC.png" alt></p>
<h3 id="SpringMVC体系结构"><a href="#SpringMVC体系结构" class="headerlink" title="SpringMVC体系结构"></a>SpringMVC体系结构</h3><p>SpringMVC是基于请求驱动，围绕一个核心Servlet 转发请求到对应的Controller而设计的</p>
<p>优点：</p>
<ol>
<li>是一个典型的MVC构架，易学易用</li>
<li>提供了清晰的角色划分，比如Controller、validator、handler mapping、view resolver等</li>
<li>业务代码可重用</li>
<li>可定制的数据绑定和验证，可定制的视图解决方案</li>
<li>提供了一套强大又使用简单的标签库</li>
<li>支持Restful风格</li>
</ol>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/mvc_architecture.png" alt></p>
<p>步骤：</p>
<ol>
<li>客户端发出请求，交给DispatcherServlet处理</li>
<li>DispatcherServlet根据请求信息及HandlerMapping的配置找到处理请求的处理器（Handler）</li>
<li>DispatcherServlet通过HandlerAdapter对Handler进行封装，再以统一的适配器接口调用Handler</li>
<li>处理器完成业务逻辑，返回一个ModelAndVIew给DispatcherServlet，ModelAndView包含视图逻辑名和模型数据信息</li>
<li>DispatcherServlet借由ViewResolver完成逻辑视图名到真实视图的解析工作</li>
<li>得到View真实视图后，DispatcherServlet就使用这个View对象对ModelAndView中的模型数据进行渲染</li>
<li>最终客户得到响应</li>
</ol>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/mvc_lifestyle.png" alt></p>
<h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><h3 id="DispatcherServlet"><a href="#DispatcherServlet" class="headerlink" title="DispatcherServlet"></a>DispatcherServlet</h3><ol>
<li><p>DispatcherServlet继承自HttpServlet，是整个SpringMVC中的前端控制器，主要负责流程控制</p>
</li>
<li><p>DispatcherServlet使用了专有的Bean来处理请求和渲染视图，可以在WebApplicationContext中进行配置，这些Bean包括：</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="left">Bean类型</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">HandlerMapping</td>
<td align="left">将传入请求映射到处理器</td>
</tr>
<tr>
<td align="left">HandlerAdapter</td>
<td align="left">将处理器包装为适配器，从而支持多种类型的处理器</td>
</tr>
<tr>
<td align="left">ViewResolver</td>
<td align="left">将逻辑视图名解析为具体的View</td>
</tr>
<tr>
<td align="left">LocaleResolver &amp; LocaleContextResolver</td>
<td align="left">解释客户端所在地区和其时区(本地化)，以便提供国际化的视图</td>
</tr>
<tr>
<td align="left">ThemeResolver</td>
<td align="left">解释Web程序可用主题，比如提供个性化布局</td>
</tr>
<tr>
<td align="left">MultipartResolver</td>
<td align="left">解释multi-part请求，比如表单里支持文件上传</td>
</tr>
</tbody></table>
<ol start="3">
<li>当一个请求传进来后，DispatcherServlet会按以下顺序处理：<ol>
<li>寻找 WebApplicationContext，并将 WebApplicationContext作为一个属性绑定到请求里，以便控制器或其他原件在后续中使用。默认会以DispatcherServlet.WEB_APPLICATION_CONTEXT_ATTRIBUTE 键绑定到请求里</li>
<li>将本地化解析器绑定到请求里，以便在处理这个请求时，原件可以解析到客户端的地区（为了渲染视图，准备日期等）</li>
<li>将主题解析其绑定到请求里，让原件（如视图）决定去使用哪一种主题</li>
<li>若指定一个multipart file解析器，会检查这个请求包含multiparts请求</li>
<li>寻找合适的 handler。如何找到这个 handler，执行与这个 handler 关联的执行链</li>
<li>如果返回一个 model，渲染相对应的视图</li>
</ol>
</li>
</ol>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><ol>
<li>@Controller表明被注解的类为控制器，该类不需要继承任何Controller的基类或者引用任意的ServletAPI，当然如果需要可以使用ServletAPI</li>
<li>spring-mvc.xml</li>
<li>Controller类<h4 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h4></li>
</ol>
<ul>
<li>@RequestMapping用于映射URL，该注解可以写在类级别上，也可以写在方法级别上</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"helloworld!"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"hi"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相对于该路径的，上面的方法映射的URL路径是：/user/hello，<strong>推荐使用</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"helloworld!"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"hi"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接映射方法注解上的路径，上面的方法映射的URL路径是：/hello</p>
<ul>
<li>@RequestMapping中，还可以使用method来限制请求的类型，执行不同操作</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"add"</span>, method=RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//数据库查询，查蛋糕类型，存入到request</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">"cake"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"add"</span>, method=RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//获取蛋糕的相关参数，插入数据库</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>URI模版是一个类似于URI的字符串，其中包含了一个或多个变量。当你将这些变量替换掉时，就变回了URI</li>
</ul>
<p>例：/cake/get/3</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/cake"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CakeController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"get/&#123;cakeId&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(@PathVariable <span class="keyword">int</span> cakeId)</span> </span>&#123;</span><br><span class="line">		System.out.println(cakeId);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h4><p>@RequestParam将请求参数绑定到方法参法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestParam(value = <span class="string">"name"</span>, required=<span class="keyword">true</span>, defaultValue=<span class="string">"1"</span>)</span> String name,</span></span><br><span class="line"><span class="function">			 @<span class="title">RequestParam</span><span class="params">(value=<span class="string">"pageNum"</span>, defaultValue=<span class="string">"1"</span>)</span><span class="keyword">int</span> pageNum) </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"helloworld!"</span>+name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"hi"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="RequestParam和-PathVariable的区别"><a href="#RequestParam和-PathVariable的区别" class="headerlink" title="@RequestParam和@PathVariable的区别"></a>@RequestParam和@PathVariable的区别</h4><ol>
<li>@RequestParam拿到的是传统的传参方式，例：form表单</li>
<li>@PathVariable页面请求路径中的参数，例：/user/login/zs</li>
</ol>
<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>SpringMVC中的拦截器是相当重要的，它的主要作用是拦截用户的请求并进行相应的处理，通常的还有如下作用：日志记录、权限检查、性能监控、通用行为</p>
<p>spring-mvc.xml中配置拦截器</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置拦截器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span> /&gt;</span>		<span class="comment">&lt;!-- 拦截所有请求 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/user/login"</span> /&gt;</span>			<span class="comment">&lt;!-- 不拦截/user/login请求 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.myschool.user.LoginTimeInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>	<span class="comment">&lt;!-- 拦截器类 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>LoginTimeInterceptor拦截器类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.myschool.user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.handler.HandlerInterceptorAdapter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginTimeInterceptor</span> <span class="keyword">extends</span> <span class="title">HandlerInterceptorAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"afterCompletion"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">			ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"postHandle"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"preHandle"</span>);</span><br><span class="line">		Calendar cal = Calendar.getInstance();</span><br><span class="line">        <span class="keyword">int</span> hour = cal.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">8</span> &lt;= hour &amp;&amp; hour &lt; <span class="number">17</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        	response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//		return true;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>SpringMVC提供了2种常用的方法来实现</p>
<ul>
<li>基于Servlet3.0的文件上传</li>
<li>基于Commons FileUpload的文件上传（最常用）</li>
</ul>
<p>介绍Commons Fileupload方法</p>
<ol>
<li>导入commons-fileupload.jar和commons-io.jar</li>
<li>在spring-mvc.xml中加入</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SpringMVC上传文件时，需要配置MultipartResolver处理器 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 指定所上传文件的总大小不能超过200KB。注意maxUploadSize属性的限制不是针对单个文件，而是所有文件的容量之和 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"200000"</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>index.jsp</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="meta-string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"upload1"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"upfile"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	=============================================</span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"upload2"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"upfile"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	=============================================</span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"upload3"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"upfile"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"upfile"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>UploadController类</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.upload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.FileCopyUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"upload1"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload1</span><span class="params">(@RequestParam(value=<span class="string">"title"</span>)</span> String title,</span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(value=<span class="string">"upfile"</span>)</span> MultipartFile file,</span></span><br><span class="line"><span class="function">            HttpServletRequest request)</span>&#123;</span><br><span class="line">		System.out.println(title);</span><br><span class="line">		String rootPath=request.getServletContext().getRealPath(<span class="string">"/"</span>);</span><br><span class="line">		<span class="keyword">if</span>(!file.isEmpty())&#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				InputStream is=file.getInputStream();</span><br><span class="line">				FileOutputStream fos=<span class="keyword">new</span> FileOutputStream(</span><br><span class="line">						rootPath+<span class="string">"/"</span>+<span class="string">"upload/"</span></span><br><span class="line">						+file.getOriginalFilename());</span><br><span class="line">				<span class="keyword">byte</span> []cache=<span class="keyword">new</span> <span class="keyword">byte</span>[is.available()];</span><br><span class="line">				fos.write(cache);</span><br><span class="line">				is.close();</span><br><span class="line">				fos.flush();</span><br><span class="line">				fos.close();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"upload2"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload2</span><span class="params">(@RequestParam(value=<span class="string">"title"</span>)</span> String title,</span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(value=<span class="string">"upfile"</span>)</span> MultipartFile file,</span></span><br><span class="line"><span class="function">            HttpServletRequest request)</span>&#123;</span><br><span class="line">		System.out.println(title);</span><br><span class="line">		String rootPath=request.getServletContext().getRealPath(<span class="string">"/"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			FileCopyUtils.copy(file.getBytes(), </span><br><span class="line">					<span class="keyword">new</span> File(rootPath+<span class="string">"/upload"</span>,file.getOriginalFilename()));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"upload3"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload3</span><span class="params">(@RequestParam(value=<span class="string">"title"</span>)</span> String title,</span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(value=<span class="string">"upfile"</span>)</span> MultipartFile []file,</span></span><br><span class="line"><span class="function">            HttpServletRequest request)</span>&#123;</span><br><span class="line">		System.out.println(title);</span><br><span class="line">		String rootPath=request.getServletContext().getRealPath(<span class="string">"/"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">for</span>(MultipartFile temp:file)</span><br><span class="line">				FileCopyUtils.copy(temp.getBytes(), </span><br><span class="line">						<span class="keyword">new</span> File(rootPath+<span class="string">"/upload"</span>,temp.getOriginalFilename()));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>4-AOP</title>
    <url>/2020/02/27/4-AOP/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><h3 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h3><p>代理对象与被代理对象必须实现同一个接口，在代理对象中实现日志等服务<br>问题：</p>
<ol>
<li>代理对象的一个接口只服务于一种类型的对象</li>
<li>如果要代理的方法很多，要为每种方法进行代理</li>
<li>静态代理在程序规模稍大时无法胜任</li>
</ol>
<h3 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h3><ul>
<li>InvocationHandler接口</li>
<li>关键：使用Proxy.newProxyInstance()静态方法建立一个代理对象(建立代理对象必须告知要代理的接口)</li>
<li>操作代理对象时会执行invoke()方法</li>
</ul>
<a id="more"></a>

<h2 id="AOP概述"><a href="#AOP概述" class="headerlink" title="AOP概述"></a>AOP概述</h2><p>AOP（ Aspect-Oriented Programming ，面向切面编程）</p>
<ul>
<li><p>提供了一种新的组织程序结构的思路</p>
</li>
<li><p>是对OOP的补充，而不是替代，经常和OOP一起使用</p>
</li>
<li><p>OOP的核心单位是类，而AOP则是切面</p>
</li>
<li><p>典型的例子包括日志、验证、事务管理等</p>
</li>
<li><p>优点：</p>
<ul>
<li>使开发人员集中关注于系统的核心业务逻辑</li>
<li>更利于创建松散的、可复用、可扩展的软件系统</li>
</ul>
</li>
<li><p>关注点：一个关注点可以是一个特定的问题、概念或者程序要达到的一个目标。比如日志记录等都是关注点。如果一个关注点的代码被多个类或方法引用，这个关注点就被称为横切关注点</p>
</li>
<li><p>切面：一个切面是对一个横切关注点的模块化</p>
</li>
<li><p>连接点：程序执行过程中的某个点，如方法调用或者抛出异常等</p>
</li>
<li><p>通知：在特定的连接点应该执行的动作，在多数AOP框架中，通知都是由拦截器实现的，Spring AOP也是如此（定义何时）</p>
<ul>
<li>通知（Advice）类型：<ul>
<li>前置通知(Before advice)：在某连接点之前执行的通知 </li>
<li>后置通知(After returning advice)：在某连接点正常完成后执行的通知</li>
<li>异常通知(After throwing advice)：在方法抛出异常退出时执行的通知</li>
<li>最终通知(After finally advice)：当某连接点退出的时候执行的通知</li>
<li>环绕通知(Around advice)：包围一个连接点的通知，这是最强大的一种通知类型</li>
</ul>
</li>
</ul>
</li>
<li><p>切入点：定义在哪些连接点处使用通知，在应用中一般通过指定类名、方法名或者匹配类名、方法名的正则表达式来指定切入点（何地）</p>
</li>
<li><p>目标对象：被切面所通知的对象</p>
</li>
<li><p>织入：将切面应用到目标对象，从而创建新的代理对象</p>
</li>
</ul>
<p>AOP示意图：<br><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/AOP.png" alt></p>
<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><ul>
<li>Spring AOP是由纯Java语言实现</li>
<li>Spring AOP和其他AOP框架不同，目的并不是提供最完整的AOP，目前仅支持方法执行上的连接点；但是他和Spring的IoC集成紧密，可以帮助解决企业应用中的常见问题</li>
<li>当Spring AOP不能满足我们的需求时，可以采用其他AOP框架，比如AspectJ，Spring框架可以很好的集成诸如AspectJ等框架，他们是互补的</li>
</ul>
<h3 id="实现：Spring-AOP提供了3种实现方式"><a href="#实现：Spring-AOP提供了3种实现方式" class="headerlink" title="实现：Spring AOP提供了3种实现方式"></a>实现：Spring AOP提供了3种实现方式</h3><ul>
<li>实现SpringAPI的传统方式<ul>
<li>步骤：编写通知，编写切点，Spring自动创建代理对象</li>
</ul>
</li>
<li>纯POJO类（Advice不用实现任何接口）<ul>
<li>一种基于Schema的XML配置，用<aop>标签<ul>
<li>通知不需要实现特定的接口</li>
<li>切面都集中在xml文件中，更加集中、清晰</li>
</ul>
</aop></li>
<li>一种基于注解驱动的切面<ul>
<li>@AspectJ 是一种使用普通Java类注解来声明AOP切面的方式</li>
<li>开启@AspectJ支持<ul>
<li>开启Java的配置方式：@EnableAspectJAutoProxy</li>
<li>开启Xml的配置方式：&lt;aop:aspectj-autoproxy /&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>使用AspectJ切面</li>
</ul>
<p>Spring AOP生成代理原理图：</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/SpringAOP.png" alt></p>
<h2 id="例子：实现用户的注册登录功能"><a href="#例子：实现用户的注册登录功能" class="headerlink" title="例子：实现用户的注册登录功能"></a>例子：实现用户的注册登录功能</h2><h3 id="代理法"><a href="#代理法" class="headerlink" title="代理法"></a>代理法</h3><p>bean.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"UserServiceImpl"</span> <span class="attr">class</span>=<span class="string">"com.user.UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Md5Advice"</span> <span class="attr">class</span>=<span class="string">"com.advice.Md5Advice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"LogAdvice"</span> <span class="attr">class</span>=<span class="string">"com.advice.LogAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"RegistExceptionAdvice"</span> <span class="attr">class</span>=<span class="string">"com.advice.RegistExceptionAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"TimeAdvice"</span> <span class="attr">class</span>=<span class="string">"com.advice.TimeAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"UserProxy"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.ProxyFactoryBean"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"proxyInterfaces"</span> <span class="attr">value</span>=<span class="string">"com.user.UserService"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"interceptorNames"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>Md5Advice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>LogAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>TimeAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"target"</span> <span class="attr">ref</span>=<span class="string">"UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>UserService:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(String name, String password)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserServiceImpl:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(String name, String password)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"密码是："</span>+password);</span><br><span class="line">		System.out.println(<span class="string">"业务逻辑：用户adi注册成功"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(name.equals(<span class="string">"adi"</span>) &amp;&amp; password.equals(<span class="string">"123"</span>))&#123;</span><br><span class="line">			System.out.println(<span class="string">"业务逻辑：用户adi登录成功"</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			System.out.println(<span class="string">"业务逻辑：用户adi登录失败"</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Md5Advice(前置通知):</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Md5Advice</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 前置通知</span></span><br><span class="line"><span class="comment">	 * arg0是调用的方法</span></span><br><span class="line"><span class="comment">	 * arg1是方法传进来的value值</span></span><br><span class="line"><span class="comment">	 * arg2是哪个类</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method arg0, Object[] arg1, Object arg2)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"----------前置通知开始----------"</span>);</span><br><span class="line">		System.out.println(arg0.getName());</span><br><span class="line">		System.out.println(arg1[<span class="number">1</span>]);</span><br><span class="line">		System.out.println(arg2.getClass().getName());</span><br><span class="line"><span class="comment">//		String newPwd = Md5Encode.getMD5(arg1[1].toString().getBytes());</span></span><br><span class="line"><span class="comment">//		arg1[1] = newPwd;//改变密码值</span></span><br><span class="line">		System.out.println(<span class="string">"----------前置通知结束----------"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LogAdvice（后置通知）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAdvice</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 后置通知</span></span><br><span class="line"><span class="comment">	 * arg0是方法返回值</span></span><br><span class="line"><span class="comment">	 * arg1是方法的名字</span></span><br><span class="line"><span class="comment">	 * arg2是方法的value值</span></span><br><span class="line"><span class="comment">	 * arg3是哪个类</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object arg0, Method arg1, Object[] arg2, Object arg3)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"----------后置通知开始----------"</span>);</span><br><span class="line">		System.out.println(arg0);</span><br><span class="line">		System.out.println(arg3);</span><br><span class="line">		System.out.println(arg2[<span class="number">0</span>]+<span class="string">"在"</span>+<span class="keyword">new</span> Date().toLocaleString()+<span class="string">"登录"</span>);</span><br><span class="line"><span class="comment">//		arg0=false;</span></span><br><span class="line">		System.out.println(<span class="string">"----------后置通知结束----------"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RegistExceptionAdvice（异常通知）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegistExceptionAdvice</span> <span class="keyword">implements</span> <span class="title">ThrowsAdvice</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 异常通知，可打印异常信息</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"异常通知发生异常"</span>+e.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TimeAdvice（环绕通知）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeAdvice</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 环绕通知，可以控制方法的进行，通常进行权限的设置</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(MethodInvocation arg0)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"方法开始执行时间："</span>+<span class="keyword">new</span> Date().toLocaleString());</span><br><span class="line">		</span><br><span class="line">		Object result = arg0.proceed();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"方法结束执行时间："</span>+<span class="keyword">new</span> Date().toLocaleString());</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Md5Encode(MD5加密工具类)：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Md5Encode</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getMD5</span><span class="params">(<span class="keyword">byte</span>[] source)</span> </span>&#123;</span><br><span class="line">		String s = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">char</span> hexDigits[] = &#123; <span class="comment">// 用来将字节转换成 16 进制表示的字符</span></span><br><span class="line">				<span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span> &#125;;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			java.security.MessageDigest md = java.security.MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">			md.update(source);</span><br><span class="line">			<span class="keyword">byte</span> tmp[] = md.digest(); <span class="comment">// MD5 的计算结果是一个 128 位的长整数，</span></span><br><span class="line">										<span class="comment">// 用字节表示就是 16 个字节</span></span><br><span class="line">			<span class="keyword">char</span> str[] = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">16</span> * <span class="number">2</span>]; <span class="comment">// 每个字节用 16 进制表示的话，使用两个字符，</span></span><br><span class="line">											<span class="comment">// 所以表示成 16 进制需要 32 个字符</span></span><br><span class="line">			<span class="keyword">int</span> k = <span class="number">0</span>; <span class="comment">// 表示转换结果中对应的字符位置</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) &#123; <span class="comment">// 从第一个字节开始，对 MD5 的每一个字节</span></span><br><span class="line">											<span class="comment">// 转换成 16 进制字符的转换</span></span><br><span class="line">				<span class="keyword">byte</span> byte0 = tmp[i]; <span class="comment">// 取第 i 个字节</span></span><br><span class="line">				str[k++] = hexDigits[byte0 &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>]; <span class="comment">// 取字节中高 4 位的数字转换,</span></span><br><span class="line">															<span class="comment">// &gt;&gt;&gt; 为逻辑右移，将符号位一起右移</span></span><br><span class="line">				str[k++] = hexDigits[byte0 &amp; <span class="number">0xf</span>]; <span class="comment">// 取字节中低 4 位的数字转换</span></span><br><span class="line">			&#125;</span><br><span class="line">			s = <span class="keyword">new</span> String(str); <span class="comment">// 换后的结果转换为字符串</span></span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test（测试类）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">		UserService us = (UserService)ctx.getBean(<span class="string">"UserProxy"</span>);</span><br><span class="line">		us.regist(<span class="string">"adi"</span>, <span class="string">"123"</span>);</span><br><span class="line"><span class="comment">//		boolean bool = us.login("adi", "123");</span></span><br><span class="line"><span class="comment">//		System.out.println(bool);</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="xml方法"><a href="#xml方法" class="headerlink" title="xml方法"></a>xml方法</h3><p>beans.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/beans/spring-beans-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop  </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 业务逻辑 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"UserServiceImpl"</span> <span class="attr">class</span>=<span class="string">"com.user.UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- advices --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MyAdvice"</span> <span class="attr">class</span>=<span class="string">"com.advices.MyAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;aop:pointcut expression="execution(* com.user.*.*(..))" id="mypc"/&gt; </span></span><br><span class="line"><span class="comment">			&lt;aop:aspect id="MyAspect" ref="MyAdvice" order="2"&gt; &lt;aop:before method="before" </span></span><br><span class="line"><span class="comment">			pointcut-ref="mypc"/&gt; &lt;/aop:aspect&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"MyAspect"</span> <span class="attr">ref</span>=<span class="string">"MyAdvice"</span> <span class="attr">order</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.user.*.*(..))"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturning"</span></span></span><br><span class="line"><span class="tag">				<span class="attr">pointcut</span>=<span class="string">"execution(* com.user.*.*(..))"</span> <span class="attr">returning</span>=<span class="string">"result"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"around"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.user.*.*(..))"</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--aop:after-throwing method="throwExMethod" pointcut="execution(* service.*.*(..))" </span></span><br><span class="line"><span class="comment">				throwing="ex"/ --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"after"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.user.*.*(..))"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MyAdvice.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"前置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(JoinPoint joinPoint, Object result)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"后置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"最终通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"环绕通知"</span>);</span><br><span class="line">		Object[] args = joinPoint.getArgs();</span><br><span class="line">		Object result = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			result = joinPoint.proceed(args);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"环绕通知"</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">throwMethod</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"异常通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"业务执行，登录成功"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">		UserService us = (UserService)ctx.getBean(<span class="string">"UserServiceImpl"</span>);</span><br><span class="line">		us.login(<span class="string">"adi"</span>, <span class="string">"123"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注解方法"><a href="#注解方法" class="headerlink" title="注解方法"></a>注解方法</h3><p>beans.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/beans/spring-beans-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop  </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 这部分是加入通知的代码 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MyAdvice.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// 声明AOP切面</span></span><br><span class="line"><span class="meta">@Order</span>(<span class="number">2</span>)<span class="comment">//控制执行顺序，数值越小先执行</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Before</span>(<span class="string">"execution(* com.user.*.*(..))"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"前置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@AfterReturning</span>(pointcut = <span class="string">"execution(* com.user.UserServiceImpl.*(..))"</span>, returning = <span class="string">"result"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(JoinPoint joinPoint, Object result)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"后置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@After</span>(<span class="string">"execution(* com.user.*.*(..))"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"最终通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Around</span>(<span class="string">"execution(* com.user.*.*(..))"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"环绕通知"</span>);</span><br><span class="line">		Object[] args = joinPoint.getArgs();</span><br><span class="line">		Object result = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			result = joinPoint.proceed(args);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"环绕通知"</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@AfterThrowing</span>(value = <span class="string">"execution(* com.user.*.*(..))"</span>, throwing = <span class="string">"ex"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">throwMethod</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"异常通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"UserServiceImpl"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String name, String password)</span> <span class="keyword">throws</span> RuntimeException</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"业务执行，登录成功"</span>);</span><br><span class="line"><span class="comment">//		int num = 10/0;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>3-SpringEL和数据验证</title>
    <url>/2020/02/27/3-SpringEL%E5%92%8C%E6%95%B0%E6%8D%AE%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="数据验证"><a href="#数据验证" class="headerlink" title="数据验证"></a>数据验证</h2><ul>
<li>数据验证不应该被限定在web层去处理，它应该在任何需要做数据验证的地方做验证</li>
<li>基于以上考虑，Spring设计了一个既方便又可以在所有层使用的Validator接口</li>
<li>Spring提供了Validator接口来进行对对象的验证，该接口实现2个方法<ul>
<li>supports(Class)-判断该validator是否能校验提供的class的实例</li>
<li>validate(Object, org.springframework.validation.Errors)- 校验给定的对象，如果有校验失败信息，将其放入Errors对象</li>
</ul>
</li>
<li>SpringMVC还支持声明式验证@Controller输入</li>
</ul>
<a id="more"></a>

<p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Date birthday;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Date <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> birthday;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserValidator.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserValidator</span> <span class="keyword">implements</span> <span class="title">Validator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(Class&lt;?&gt; arg0)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> User<span class="class">.<span class="keyword">class</span>.<span class="title">equals</span>(<span class="title">arg0</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Object arg0, Errors arg1)</span> </span>&#123;</span><br><span class="line">		ValidationUtils.rejectIfEmpty(arg1, <span class="string">"id"</span>, <span class="string">"id can't be null"</span>, <span class="string">"id不能为空"</span>);</span><br><span class="line">		User u=(User)arg0;</span><br><span class="line">		ValidationUtils.rejectIfEmpty(arg1, <span class="string">"name"</span>, <span class="string">"name.empty"</span>, <span class="string">"用户名不能为空"</span>);</span><br><span class="line">		<span class="keyword">if</span>(u.getBirthday().getTime()&gt;<span class="keyword">new</span> Date().getTime())&#123;</span><br><span class="line">			arg1.rejectValue(<span class="string">"birthday"</span>, <span class="string">"birthday.wrong"</span>, <span class="string">"出生日期不能晚于当前时间"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		User u=<span class="keyword">new</span> User();</span><br><span class="line">		u.setBirthday(<span class="keyword">new</span> Date(<span class="keyword">new</span> Date().getTime()+<span class="number">1000</span>));</span><br><span class="line">		</span><br><span class="line">		Errors e=<span class="keyword">new</span> BindException(u, <span class="string">"User"</span>);</span><br><span class="line">		Validator v=<span class="keyword">new</span> UserValidator();</span><br><span class="line">		v.validate(u, e);</span><br><span class="line">		List&lt;ObjectError&gt; list=e.getAllErrors();</span><br><span class="line">		<span class="keyword">for</span>(ObjectError temp:list)&#123;</span><br><span class="line">			System.out.println(temp.getCode());</span><br><span class="line">			System.out.println(temp.getDefaultMessage());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SpringEL"><a href="#SpringEL" class="headerlink" title="SpringEL"></a>SpringEL</h2><p>表达式的语法形式：#{&lt;表达式字符串&gt;}</p>
<h3 id="SpringEL方法"><a href="#SpringEL方法" class="headerlink" title="SpringEL方法"></a>SpringEL方法</h3><p>SpringEL允许开发者将一个对象的属性注入给另一个对象属性，也可以调用一个对象的方法，并将返回值注入给另一个对象的属性</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"item"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span></span>&#123;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;' tea'. toupperCase()&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> String upName;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123; mathutil. getLength()&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> itemLength;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123; mathutil. getArea(3)&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> itemArea;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"mathUtil"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mathutil</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLength</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getArea</span><span class="params">(<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Math. PI*r*r;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SpringEL构造"><a href="#SpringEL构造" class="headerlink" title="SpringEL构造"></a>SpringEL构造</h3><p>SpringEL允许开发者调用new关键字，实现构造方法调用，并实例化出对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computerl</span></span>&#123;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;new com.constructor.Memory1()&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> Memoryl memory1;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;new int[]&#123;1,2,3&#125;&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> [] count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SpringEL操作符"><a href="#SpringEL操作符" class="headerlink" title="SpringEL操作符"></a>SpringEL操作符</h3><p>SpringEL支持大多数的算数运算符、关系运算符、逻辑运算符、三元运算符等</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MathItem</span></span>&#123;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;3+5&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num1;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;3^3&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> num2;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;5&gt;4&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> num3;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;5+3&gt;4&amp;&amp;3&gt;2&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> num4;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;mathItem. num1&gt;mathItem. num2?' numl':' num2'&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> String num5;</span><br></pre></td></tr></table></figure>

<h3 id="SpringEL集合"><a href="#SpringEL集合" class="headerlink" title="SpringEL集合"></a>SpringEL集合</h3><ul>
<li>SpringEL支持对List、Properties、Map等集合的操作，还支持集合选择、集合投影等</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem. list&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> List list;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;datartem. list[1]&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String listValue;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem. map['2']&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String mapValue;</span><br></pre></td></tr></table></figure>

<ul>
<li>SpringEL集合选择<ul>
<li>.?[]可以设置筛选条件</li>
<li>.^[]获取第一个匹配项</li>
<li>.$[]获取最后一个匹配项</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem.students.?[stuId&gt;1]&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> List sublist;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem.map.?[key=='3']&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> Map subMap;</span><br></pre></td></tr></table></figure>

<ul>
<li>集合投影：  .![]可以选择特定属性</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem. students.![stuName]&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> List namelist;</span><br></pre></td></tr></table></figure>

<ul>
<li>SpringEL 集合选择和集合投影结合使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"#&#123;dataItem.students.?[stuId&gt;1].![stuName]&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> List nameList;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2-Spring-Beans和生命周期（对象实例化及属性注入-xml方式）</title>
    <url>/2020/02/27/2-Spring-Beans%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%88%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%8F%8A%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5-%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="xml配置的方式进行实例化"><a href="#xml配置的方式进行实例化" class="headerlink" title="xml配置的方式进行实例化"></a>xml配置的方式进行实例化</h2><h3 id="配置文件中bean标签的属性"><a href="#配置文件中bean标签的属性" class="headerlink" title="配置文件中bean标签的属性"></a>配置文件中bean标签的属性</h3><p>（1）id属性：起名称，id属性值名称任意命名 </p>
<ul>
<li>id属性值，不能包含特殊符号 </li>
<li>根据id值得到配置对象</li>
</ul>
<p>（2）class属性：创建对象所在类的全路径</p>
<p>（3）name属性：功能和id属性一样的，id属性值不能包含特殊符号，但是在name属性值里面可以包含特殊符号</p>
<p>（4）scope属性 </p>
<ul>
<li>singleton：默认值，单例 </li>
<li>prototype：多例</li>
</ul>
<a id="more"></a>

<h3 id="无参构造实例化对象"><a href="#无参构造实例化对象" class="headerlink" title="无参构造实例化对象"></a>无参构造实例化对象</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//phone类：</span></span><br><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"Phone......."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--applicationContext.xml配置文件--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入约束--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">class</span>=<span class="string">"com.test.vo.Phone"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试类</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//加载配置文件，创建对象</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        <span class="comment">//得到配置创建的对象</span></span><br><span class="line">        Phone Phone = (Phone) context.getBean(<span class="string">"phone"</span>);</span><br><span class="line">        <span class="comment">//调用对象方法</span></span><br><span class="line">        Phone.printTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：java类中默认有无参构造方法，若类中已声明了有参构造，则需手动声明无参构造方法。</p>
<h3 id="使用静态工厂进行创建"><a href="#使用静态工厂进行创建" class="headerlink" title="使用静态工厂进行创建"></a>使用静态工厂进行创建</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//静态工厂类</span></span><br><span class="line"><span class="keyword">package</span> com.test.utils;</span><br><span class="line"><span class="keyword">import</span> com.test.vo.Phone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态方法，返回Phone对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Phone <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Phone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//创建的对象为Phone类对象不变</span><br><span class="line">//配置文件改为：</span><br><span class="line"><span class="comment">&lt;!--applicationContext.xml配置文件--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入约束--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--class为静态工厂的路径，factory-method为工厂的方法--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phoneFa"</span> <span class="attr">class</span>=<span class="string">"com.test.utils.BeanFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getPhone"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试类</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        Phone Phone = (Phone) context.getBean(<span class="string">"phoneFa"</span>);</span><br><span class="line">        Phone.printTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用实例工厂进行创建"><a href="#使用实例工厂进行创建" class="headerlink" title="使用实例工厂进行创建"></a>使用实例工厂进行创建</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//实列工厂类：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanUFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//普通方法，返回Phone对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Phone <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Phone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">配置文件修改：</span><br><span class="line"><span class="comment">&lt;!-- 1.先创建工厂对象 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2.再创建Phone对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"BeanUFactory"</span> <span class="attr">class</span>=<span class="string">"com.test.utils.BeanUFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phoneUFa"</span> <span class="attr">factory-bean</span>=<span class="string">"BeanUFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getPhone"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试类：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        Phone Phone = (Phone) context.getBean(<span class="string">"phoneUFa"</span>);</span><br><span class="line">        Phone.printTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="属性注入"><a href="#属性注入" class="headerlink" title="属性注入"></a>属性注入</h2><h3 id="使用有参数构造方法注入属性："><a href="#使用有参数构造方法注入属性：" class="headerlink" title="使用有参数构造方法注入属性："></a>使用有参数构造方法注入属性：</h3><p>Phone类改写为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//显示声明无参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Phone</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">//有参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Phone</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(name+<span class="string">"Phone......."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>applicationContext.xml配置文件修改为：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入约束--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--class为静态工厂的路径，factory-method为工厂的方法--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phoneFa"</span> <span class="attr">class</span>=<span class="string">"com.test.utils.BeanFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getPhone"</span>&gt;</span></span><br><span class="line">   		<span class="comment">&lt;!--name为构造方法的参数名，value为要将其设置的值--&gt;</span></span><br><span class="line">   			<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"诺基亚"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        Phone Phone = (Phone) context.getBean(<span class="string">"phoneFa"</span>);</span><br><span class="line">        Phone.printTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><code>诺基亚Phone.......</code></p>
<h3 id="使用set方法注入属性："><a href="#使用set方法注入属性：" class="headerlink" title="使用set方法注入属性："></a>使用set方法注入属性：</h3><p>Phone类改写为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(name+<span class="string">"Phone......."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>applicationContext.xml配置文件修改为：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入约束--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--class为静态工厂的路径，factory-method为工厂的方法--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phoneFa"</span> <span class="attr">class</span>=<span class="string">"com.test.utils.BeanFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getPhone"</span>&gt;</span></span><br><span class="line">	   <span class="comment">&lt;!--name为要注入的属性的名称，value为要将其设置的值--&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"三星"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><code>三星Phone.......</code></p>
<h3 id="注入对象类型属性"><a href="#注入对象类型属性" class="headerlink" title="注入对象类型属性"></a>注入对象类型属性</h3><p>新建Person类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(String age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Phone类修改为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(person.getName()+<span class="string">"::"</span>+person.getAge()+<span class="string">"::"</span>+person.getSex());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置文件作如下修改：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.test.vo.Person"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"小王"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"man"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"11"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">class</span>=<span class="string">"com.test.vo.Phone"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 因注入的是对象写ref属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"person"</span> <span class="attr">ref</span>=<span class="string">"person"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试方法不变，结果为：</p>
<p><code>小王::11::man</code></p>
<h3 id="注入复杂类型属性"><a href="#注入复杂类型属性" class="headerlink" title="注入复杂类型属性"></a>注入复杂类型属性</h3><p>Phone类修改为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String arr[];</span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; map; </span><br><span class="line"></span><br><span class="line">    <span class="comment">//set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setArr</span><span class="params">(String[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.arr = arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMap</span><span class="params">(Map&lt;String, String&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.map = map;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"arr:"</span>+Arrays.toString(arr));</span><br><span class="line">        System.out.println(<span class="string">"list:"</span>+list);</span><br><span class="line">        System.out.println(<span class="string">"map:"</span>+map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置文件作如下修改：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">class</span>=<span class="string">"com.test.vo.Phone"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数组 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"arr"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>小米<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>中兴<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>华为<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- list集合 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- map集合 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"aa"</span> <span class="attr">value</span>=<span class="string">"lucy"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"bb"</span> <span class="attr">value</span>=<span class="string">"bob"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"cc"</span> <span class="attr">value</span>=<span class="string">"jerry"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">arr:[小米, 中兴, 华为]</span><br><span class="line">list:[1, 2, 3]</span><br><span class="line">map:&#123;aa&#x3D;lucy, bb&#x3D;bob, cc&#x3D;jerry&#125;</span><br></pre></td></tr></table></figure>

<p>转载自：<a href="https://blog.csdn.net/weixin_40425481/article/details/82183804" target="_blank" rel="noopener">链接</a></p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2-Spring-Beans和生命周期（对象实例化及属性注入-注解方式）</title>
    <url>/2020/02/27/2-Spring-Beans%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%88%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%8F%8A%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5-xml%E6%96%B9%E5%BC%8F%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>通过xml的方式进行对象的实列化或属性注入或许有一些繁琐，所以在开发中常用的方式更多是通过注解的方式实现对象实例化和属性注入的。</p>
<h2 id="使用注解创建对象"><a href="#使用注解创建对象" class="headerlink" title="使用注解创建对象"></a>使用注解创建对象</h2><p>Spring配置文件(beans.xml)：</p>
<a id="more"></a>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 开启注解扫描 ,到包里面扫描类、方法、属性上面是否有注解--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Person类对象代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用<span class="doctag">@Component</span>创建对象,对象名为person</span></span><br><span class="line"><span class="comment"> * 用<span class="doctag">@Scope</span>声明value为prototype，是创建多列对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span>(value=<span class="string">"person"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(value=<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"............person"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test测试代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">		Person person = (Person) context.getBean(<span class="string">"person"</span>);</span><br><span class="line">		person.add();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="注解注入属性"><a href="#注解注入属性" class="headerlink" title="注解注入属性"></a>注解注入属性</h2><h3 id="Autowired注解进行注入（例：经Dao注入到Service中）："><a href="#Autowired注解进行注入（例：经Dao注入到Service中）：" class="headerlink" title="@Autowired注解进行注入（例：经Dao注入到Service中）："></a>@Autowired注解进行注入（例：经Dao注入到Service中）：</h3><p>Daotest:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(value=<span class="string">"daotest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DaoTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printDao</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"............DaoTest"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ServiceTest:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>(value=<span class="string">"servicetest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceTest</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	DaoTest dao;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">".........Service"</span>);</span><br><span class="line">		dao.printDao();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类Test：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beanTest1.xml"</span>);</span><br><span class="line">		ServiceTest servicetest = (ServiceTest) context.getBean(<span class="string">"servicetest"</span>);</span><br><span class="line">		servicetest.printService();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Resource进行注入"><a href="#Resource进行注入" class="headerlink" title="@Resource进行注入"></a>@Resource进行注入</h3><p>则ServiceTest改为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>(value=<span class="string">"servicetest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceTest</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Resource</span>(name=<span class="string">"daotest"</span>)</span><br><span class="line">	DaoTest dao;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">".........Service"</span>);</span><br><span class="line">		dao.printDao();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两个注解的异同：</p>
<ul>
<li>异：<ul>
<li>@Autowried是Spring提供的注解，是按类型（byType）注入的。</li>
<li>@Resource是JEE提供的，是按名称（byName）注入的。</li>
</ul>
</li>
<li>同:<ul>
<li>都可以写在属性和setter方法上。</li>
<li>可以参考：<a href="https://blog.csdn.net/x_iya/article/details/73385486" target="_blank" rel="noopener">Spring注解@Resource和@Autowired区别对比</a></li>
</ul>
</li>
</ul>
<p>转载自：<a href="https://blog.csdn.net/weixin_40425481/article/details/82752832" target="_blank" rel="noopener">链接</a></p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2-Spring_Beans和生命周期</title>
    <url>/2020/02/27/2-Spring-Beans%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="实例化Bean"><a href="#实例化Bean" class="headerlink" title="实例化Bean"></a>实例化Bean</h2><ul>
<li>通过构造方法实例化：<br>当使用基于XML的元数据配置文件，可以这样来指定bean类：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;bean id=<span class="string">"exampleBean"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>&gt;</span><br><span class="line">&lt;bean name=<span class="string">"anotherExample"</span><span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBeanTwo"</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用静态工厂方法实例化：<ul>
<li>当采用静态工厂方法创建bean时，除了需要指定class属性外，还需要通过factory-method属性来指定创建bean实例的工厂方法</li>
<li>注意，此定义并未指定返回对象的类型，仅指定该类包含的工厂方法，此例中createInstance方法必须是静态的</li>
</ul>
</li>
</ul>
<a id="more"></a>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"clientService"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"examples.ClientService"</span></span></span><br><span class="line"><span class="tag"><span class="attr">factory-method</span>=<span class="string">"createlnstance"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientService</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ClientService clientService = <span class="keyword">new</span> ClientService();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">ClientService</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClientService <span class="title">createlnstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> clientService;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例工厂方法实例化：<ul>
<li>使用这种方式时，class属性必须为空，而factory-bean属性必须指定为当前(或其祖先)容器中包含工厂方法的bean的名称</li>
<li>bean的工厂方法必须通过factory-method属性来设定</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--工厂bean，包含reatelnstance0方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"'serviceLocator"</span><span class="attr">class</span>=<span class="string">"examples.DefaultServiceLocator"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--其他需要注入的依赖项--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--通过工厂bean 创建的bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"clientService"</span> <span class="attr">factory-bean</span>=<span class="string">"serviceLocator"</span> <span class="attr">factory-method</span>=<span class="string">"createClientServicelnstance"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/Spring_lifecycle.png" alt></p>
<table>
<thead>
<tr>
<th align="left">步骤</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1.实例化</td>
<td align="left">Spring实例化Bean</td>
</tr>
<tr>
<td align="left">2.设置属性</td>
<td align="left">Spring注入Bean的属性</td>
</tr>
<tr>
<td align="left">3.设置Bean名称，Bean工厂，应用上下文</td>
<td align="left">如果Bean实现了XXXAware接口，执行对应方法</td>
</tr>
<tr>
<td align="left">4.预处理(在初始化之前)</td>
<td align="left">调用BeanPostProcessor对象的postProcessBeforeInitialization()方法</td>
</tr>
<tr>
<td align="left">5.初始化Bean</td>
<td align="left">实现InitializingBean接口的afterPropertiesSet()方法。声明了初始化方法，将调用声明的</td>
</tr>
<tr>
<td align="left">6.预处理(在初始化之后)</td>
<td align="left">调用BeanPostProcessor对象的postProcessAfterInitialization()方法</td>
</tr>
<tr>
<td align="left">7.Bean已经准备好</td>
<td align="left">默认以单例的形式存在Spring容器中</td>
</tr>
<tr>
<td align="left">8.销毁Bean</td>
<td align="left">实现DisposableBean接口的destroy()方法。声明了销毁方法，将调用声明的</td>
</tr>
</tbody></table>
<h2 id="Bean的依赖注入"><a href="#Bean的依赖注入" class="headerlink" title="Bean的依赖注入"></a>Bean的依赖注入</h2><ul>
<li>Spring容器的工作就是创建Bean并注入他所依赖的Bean对象</li>
<li>Spring中的注入方式主要有2种：构造器注入和Setter方法注入<h3 id="构造器注入"><a href="#构造器注入" class="headerlink" title="构造器注入"></a>构造器注入</h3></li>
<li>基于构造器注入DI通过调用带参数的构造器来实现，每个参数代表着一个依赖关系</li>
<li>构造器参数通过参数类型进行匹配</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> IntelCpu intelCpu;</span><br><span class="line">	<span class="keyword">private</span> KingstonMemory kingstonMemory;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">()</span></span>&#123; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">(IntelCpu intelCpu, KingstonMemory kingstonMemory)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>. intelCpu=intelCpu; </span><br><span class="line">		<span class="keyword">this</span>. kingstonMemory=kingstonMemory;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"IntelCpu"</span> <span class="attr">class</span>=<span class="string">"constructdi.IntelCpu"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"KingstonMemory"</span> <span class="attr">class</span>=<span class="string">"constructdi.KingstonMemory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Computer"</span> <span class="attr">class</span>=<span class="string">"constructdi.Computer"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">"IntelCpu"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">"KingstonMemory"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>其他用法：<ul>
<li>使用type属性指定构造参数的类型</li>
<li>使用index属性指定构造参数的索引</li>
<li>使用name属性制定构造参数的名字</li>
</ul>
</li>
</ul>
<h3 id="Setter注入"><a href="#Setter注入" class="headerlink" title="Setter注入"></a>Setter注入</h3><p>在调用了无参构造方法或者无参静态工厂方法实例化bean之后，容器通过回调bean的setter方法可以完成依赖注入。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Intelcpu intelCpu; </span><br><span class="line">	<span class="keyword">private</span> KingstonMemory kingstonMemory; </span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIntelCpu</span><span class="params">(Intelcpu intelcpu)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>. intelcpu=intelcpu;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKingstonMemory</span><span class="params">(KingstonMemory kingstonMemory)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>. kingstonMemory=kingstonMemory;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">！--setter方法注入--</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"IntelCpu"</span> <span class="attr">class</span>=<span class="string">"setterdi.IntelCpu"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"KingstonMemory"</span> <span class="attr">class</span>=<span class="string">"setterdi.KingstonMemory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Computer"</span> <span class="attr">class</span>=<span class="string">"setterdi.Computer"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"intelCpu"</span> <span class="attr">ref</span>=<span class="string">"IntelCpu"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"kingstonMemory"</span> <span class="attr">ref</span>=<span class="string">"KingstonMemory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="基本Bean注入"><a href="#基本Bean注入" class="headerlink" title="基本Bean注入"></a>基本Bean注入</h3><h4 id="注入基本数据类型"><a href="#注入基本数据类型" class="headerlink" title="注入基本数据类型"></a>注入基本数据类型</h4><pre><code>- &lt;property name=&quot;xxx&quot; value=&quot;xxx&quot; /&gt;
- 可注入：
    - 字符串
    - 数值型数据
    - 布尔类型
- Spring根据字段属性来决定转换成正确的类型</code></pre><h4 id="注入Null"><a href="#注入Null" class="headerlink" title="注入Null"></a>注入Null</h4><pre><code>`&lt;property name=&quot;xxx&quot;&gt;&lt;null /&gt;&lt;/property&gt;`</code></pre><h4 id="注入引用数据类型"><a href="#注入引用数据类型" class="headerlink" title="注入引用数据类型"></a>注入引用数据类型</h4><pre><code>- 引用

    <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">ref</span>=<span class="string">"xxxBean"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"xxxBean"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

- 注入内部Bean

    - &lt;property name=&quot;xxx&quot;&gt;&lt;bean class=&quot;org.xxx.XxxBean&quot; /&gt;&lt;/property&gt;
    - 内部Bean不能复用，只能被注入</code></pre><h4 id="注入List类型和数组类型"><a href="#注入List类型和数组类型" class="headerlink" title="注入List类型和数组类型"></a>注入List类型和数组类型</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">“xxx”</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">“aa”</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">“bb”</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="注入Set类型"><a href="#注入Set类型" class="headerlink" title="注入Set类型"></a>注入Set类型</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span> =<span class="string">“aa”</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span> =<span class="string">“bb”</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="注入Map类型"><a href="#注入Map类型" class="headerlink" title="注入Map类型"></a>注入Map类型</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">“xxx”</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">“a”</span> <span class="attr">value-ref</span>=<span class="string">“aa”</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">“b”</span> <span class="attr">value-ref</span>=<span class="string">“bb”</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注：<br>每个<entry>都有一个键和值组成</entry></p>
<ol>
<li><p>key: 指定map项的键为String</p>
</li>
<li><p>key-ref: 指定map项的键为Spring上下文中其他Bean的引用</p>
</li>
<li><p>value: 指定map项的值为String</p>
</li>
<li><p>value-ref: 指定map项的值为Spring上下文中其他Bean的引用</p>
</li>
</ol>
<ul>
<li>注入Properties类型</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--与Map唯一不同的是其限制了键和值都是String--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">“a”</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">“b”</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="集合合并"><a href="#集合合并" class="headerlink" title="集合合并"></a>集合合并</h4><p>对于相同类型的集合，通过在子类中的merge属性，可以将集合合并。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"parent"</span> <span class="attr">abstract</span>=<span class="string">"tue"</span> <span class="attr">class</span>=<span class="string">"example. ComplexObject&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">		&lt;property name="</span><span class="attr">adminEmails</span>"&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"administrator"</span>&gt;</span>administrator@example.com<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"support"</span>&gt;</span>support@example.com<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"child"</span> <span class="attr">parent</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"adminEmails"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">props</span> <span class="attr">merge</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"sales"</span>&gt;</span>sales@example.com<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"support"</span>&gt;</span>support@example.co.uk<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="高级Bean注入"><a href="#高级Bean注入" class="headerlink" title="高级Bean注入"></a>高级Bean注入</h4><pre><code>- Spring容器可以自动装配相互协作bean的关联关系
- 自动装配有以下好处：
    - 自动装配可以显著得减少指定属性或者构造器参数的需求
    - 当对象发生变化时自动装配可以更新配置而不需要修改配置
- 自动装配的局限性和缺点：
    - Property和constructor-arg显示的依赖设置会覆盖自动装配（故意而为）
    - 自动装配没有显示编写精确
    - 在容器中可能存在多个bean的定义与自动装配的setter方法或者构造方法参数匹配，若bean定义不唯一，装配时会抛异常
- 使用外部属性文件
- 可以使用location属性处理单个属性文件
    - &lt;property name=&quot;location&quot; value=&quot;jdbc.properties&quot;/&gt;
- 处理多个属性文件用locations属性指定list</code></pre><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"locations"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>aa.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>bb.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<pre><code>- 使用${xxx.bbb}来获取值</code></pre>]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>1-Spring介绍和IOC&amp;DI</title>
    <url>/2020/02/27/1-Spring%E4%BB%8B%E7%BB%8D%E5%92%8CIOC-DI/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="IoC和DI"><a href="#IoC和DI" class="headerlink" title="IoC和DI"></a>IoC和DI</h2><h3 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h3><ul>
<li>IoC（Inversion of Control，控制反转）：<ul>
<li>设计原则，解耦组件之间的依赖关系</li>
</ul>
</li>
<li>DI（ DI(Dependency Injection ，依赖注入）<ul>
<li>具体的设计模式，体现了IoC的设计原则</li>
<li>因为DI是IoC最典型的实现，所以术语IoC与DI经常被混用</li>
</ul>
</li>
<li>应用IoC：<ul>
<li>由容器主动将资源推送到它所管理的组件里，组件要有接受资源的方式</li>
<li>查找的被动形式</li>
<li>好的获取资源的解决方案</li>
</ul>
</li>
</ul>
<a id="more"></a>

<h3 id="不同类型的依赖注入"><a href="#不同类型的依赖注入" class="headerlink" title="不同类型的依赖注入"></a>不同类型的依赖注入</h3><ul>
<li>主要的三种类型的DI（接口注入，setter注入，构造器注入）</li>
<li>流行程度最广的：setter注入<ul>
<li>有可能忘记注入，会抛出空指针</li>
<li>代码安全有可能存在问题，依赖会被修改</li>
</ul>
</li>
<li>构造器注入<ul>
<li>可避免setter注入的一些缺点</li>
<li>没有含义明确的方法名，对参数位置与数量有要求</li>
</ul>
</li>
</ul>
<h2 id="Spring框架实现IoC"><a href="#Spring框架实现IoC" class="headerlink" title="Spring框架实现IoC"></a>Spring框架实现IoC</h2><ol>
<li>Spring提供了IoC容器</li>
<li>Beans均由Spring IoC容器来管理和组装</li>
<li>Bean是一个由Spring IoC容器进行实例化、装配和管理的对象</li>
<li>Beans以及他们之间的依赖关系是通过容器使用配置元数据反应出来</li>
<li>配置元数据：（基于Xml的配置，基于注解的配置，基于Java的配置）</li>
</ol>
<h2 id="Spring容器"><a href="#Spring容器" class="headerlink" title="Spring容器"></a>Spring容器</h2><p>工作视图</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/IOC-DI.png" alt></p>
<p>org.springframework.beans和org.springframework.context包是Spring框架IoC容器的基础</p>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/IOC_base.png" alt></p>
<ul>
<li><p>BeanFactory</p>
<ul>
<li>BeanFactory提供了一个先进的配置机制能够管理任何类型的对象</li>
<li>BeanFactory负责对Bean对象的实例化、装配和生命周期的管理</li>
<li>BeanFactory的实现： <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">BeanFactory beanFactory = <span class="keyword">new</span> XmlBeanFactory(<span class="keyword">new</span> ClassPathResource(<span class="string">"beans.xml"</span>));<span class="comment">//创建该工厂需要传入一个Resource实例</span></span><br><span class="line">MyBean bean = (MyBean)factory.getBean(<span class="string">"myBean"</span>)<span class="comment">//获取Bean实例</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ApplicationContext</p>
<ul>
<li>ApplicationContext是BeanFactory的一个子接口</li>
<li>ApplicationContext添加了更多的企业特定的功能：</li>
<li>实现<ul>
<li>ClassPathXmlApplicationContext</li>
<li>FileSystemXmlApplicationContext</li>
<li>XmlWebApplicationContext</li>
<li>AnnotationConfigApplicationContext</li>
</ul>
</li>
</ul>
</li>
<li><p>区别</p>
<ul>
<li>BeanFactory提供了配置框架和基本功能，ApplicationContext则添加了更多的企业特定功能</li>
<li>ApplicationContext是BeanFactory的一个子接口，同时也是它的一个完整的超集</li>
<li>实例Bean的载入方式不同：<ul>
<li>BeanFactory延迟载入所有Bean，直到getBean()方法调用时才被创建</li>
<li>ApplicationContext启动后载入所有单实例Bean。通过预载入单实例Bean，确保当需要时可以使用</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>加速访问Github</title>
    <url>/2020/02/26/speed-github/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="说一下访问慢的原因"><a href="#说一下访问慢的原因" class="headerlink" title="说一下访问慢的原因"></a>说一下访问慢的原因</h1><ol>
<li>由于 github.com 网站位于美国旧金山,所以初始访问 github.com 时网络寻址会比较耗费时间,这是网站打开速度慢的其中一个原因.</li>
<li>最初用户从浏览器中输入 github.com 网址时,浏览器并不知道这个域名对应的真实 ip 地址,先问问自己电脑认识不认识这个域名的门牌号,如果本机不认识会接着往上问,当地运行商也不认识这个域名的话,继续问上级,直到问出来 github.com 的门牌号是 192.30.253.113 为止!如此繁琐的问路过程被称之为 DNS 寻址,如果问路的时间都占用很久,那么访问网站的速度自然会很慢.</li>
</ol>
<h2 id="主域名和多个子域名"><a href="#主域名和多个子域名" class="headerlink" title="主域名和多个子域名"></a>主域名和多个子域名</h2><p>正常来说,网站的主域名下会存在多个子域名,由这些域名组合在一起提供完整的服务.</p>
<p>而 github.com 也不例外,其中 github.com是一级域名,也是主域名,其他的域名基本上都是二级域名或者说次域名. 所以我们不仅要告诉本机 github.com 的主域名,还要把相关的子域名也告诉本机,帮人帮到底,送福送到西! 那到哪里去查询域名和 ip 的对应关系呢?</p>
<a id="more"></a>

<h2 id="推荐几个查询域名解析的网站"><a href="#推荐几个查询域名解析的网站" class="headerlink" title="推荐几个查询域名解析的网站"></a>推荐几个查询域名解析的网站</h2><ol>
<li><a href="https://www.ipaddress.com/" target="_blank" rel="noopener">https://www.ipaddress.com/</a></li>
<li><a href="http://tool.chinaz.com/dns/" target="_blank" rel="noopener">http://tool.chinaz.com/dns/</a></li>
</ol>
<h2 id="体验域名查询"><a href="#体验域名查询" class="headerlink" title="体验域名查询"></a>体验域名查询</h2><p>根据查到的相关域名信息,再次查询出这些域名对应的 ip 地址,于是整理出以下内容.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#github related website</span><br><span class="line">192.30.253.113 github.com</span><br><span class="line">199.232.5.194 github.global.ssl.fastly.net</span><br><span class="line">192.30.253.119 gist.github.com</span><br><span class="line">192.30.253.120 nodeload.github.com</span><br><span class="line">199.232.28.133 raw.github.com</span><br><span class="line">140.82.113.17 training.github.com</span><br><span class="line">192.30.253.113 www.github.com</span><br><span class="line">99.232.68.133 avatars0.githubusercontent.com</span><br><span class="line">199.232.68.133 avatars1.githubusercontent.com</span><br><span class="line">151.101.184.133 assets-cdn.github.com</span><br><span class="line">185.199.108.153 documentcloud.github.com</span><br><span class="line">185.199.108.153 help.github.com</span><br><span class="line">18.204.240.114 status.github.com</span><br></pre></td></tr></table></figure>
<h2 id="加快访问github的方法"><a href="#加快访问github的方法" class="headerlink" title="加快访问github的方法"></a>加快访问github的方法</h2><ol>
<li>VPN<ol>
<li>购买vpn，作为学生党就算了吧</li>
<li>使用一些免费的插件，这种就得自个搜（提醒：谷歌商店一大批免费的，哈哈哈）</li>
</ol>
</li>
<li>hosts<ol>
<li>记事本打开C:\Windows\System32\drivers\etc 路径下的hosts文件（映射文件）</li>
<li>找到上面推荐的解析网站  查询出自个机子适用的dns解析地址（也可以使用我整理好的）</li>
<li>保存退出（不能保存的请自行百度）</li>
<li>win+r 输入ipconfig /flushdns 刷新dns缓存</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>业余技术</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
  <entry>
    <title>4-Hibernate一对一关联映射</title>
    <url>/2020/02/26/4-Hibernate%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Hibernate一对一关联映射"><a href="#Hibernate一对一关联映射" class="headerlink" title="Hibernate一对一关联映射"></a>Hibernate一对一关联映射</h1><p>实体之间的联系：<br></p>
<ol>
<li>一对一联系（1:1）</li>
<li>一对多联系（1:n）</li>
<li>多对多联系（m:n）</li>
</ol>
<h2 id="一对一的关联映射（主键关联方式）"><a href="#一对一的关联映射（主键关联方式）" class="headerlink" title="一对一的关联映射（主键关联方式）"></a>一对一的关联映射（主键关联方式）</h2><p><strong>主键关联：</strong>原理是两张表的主键(ID)保持一致，在获取的时候根据两种表中的ID相同来作为关系判断的标准，这样的设计好处在于我们不用添加另外的字段来维护它们之间的关系。 </p>
<h3 id="xml方式"><a href="#xml方式" class="headerlink" title="xml方式"></a>xml方式</h3><a id="more"></a>

<p>实体类<br>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;<span class="comment">//主键</span></span><br><span class="line">	<span class="keyword">private</span> String userName;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="keyword">private</span> Person person;</span><br><span class="line">	……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Persion.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer id;<span class="comment">//主键和外键，外键依赖user的主键id</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String idNumber;</span><br><span class="line">	<span class="keyword">private</span> User user;</span><br><span class="line">	……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>User.hbm.xml</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="class"><span class="keyword">class</span> <span class="title">name</span></span>=<span class="string">"User"</span>&gt;</span><br><span class="line">	&lt;id name=<span class="string">"id"</span> &gt;</span><br><span class="line">		&lt;generator class="increment"&gt;&lt;/generator&gt;</span><br><span class="line">	&lt;/id&gt;</span><br><span class="line">	&lt;property name=<span class="string">"userName"</span>  /&gt;</span><br><span class="line">	&lt;property name=<span class="string">"password"</span>/&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 主键关联方式映射与Person的一对一关系 --&gt;</span><br><span class="line">	&lt;one-to-one name=<span class="string">"person"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"Person"</span> cascade=<span class="string">"all"</span>/&gt;</span><br><span class="line">&lt;/class&gt;</span><br></pre></td></tr></table></figure>
<p>Persion.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Person"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"foreign"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"property"</span>&gt;</span>user<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 主键关联方式映射与User的一对一关系 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">constrained</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idNumber"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Session session = <span class="keyword">null</span>;</span><br><span class="line">       Transaction tran = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           session = HibernateUtil.openSession();</span><br><span class="line">           tran = session.beginTransaction();<span class="comment">// 开启事务</span></span><br><span class="line"></span><br><span class="line">           <span class="comment">// 新建User对象</span></span><br><span class="line">           User user = <span class="keyword">new</span> User();</span><br><span class="line">           user.setUserName(<span class="string">"张三"</span>);</span><br><span class="line">           user.setPassword(<span class="string">"111111"</span>);</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//新建Person对象</span></span><br><span class="line">           Person person = <span class="keyword">new</span> Person();</span><br><span class="line">           person.setName(<span class="string">"张三"</span>);</span><br><span class="line">           person.setIdNumber(<span class="string">"100345199002031234"</span>);</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//建立联系</span></span><br><span class="line">           user.setPerson(person);</span><br><span class="line">           person.setUser(user);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 保存user并级联保存person</span></span><br><span class="line">           session.save(user);</span><br><span class="line"></span><br><span class="line">           tran.commit();<span class="comment">// 提交事务</span></span><br><span class="line"></span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           tran.rollback();<span class="comment">// 回滚事务</span></span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           session.close();<span class="comment">// 关闭session</span></span><br><span class="line">           HibernateUtil.closeSessionFactory();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="注释方法"><a href="#注释方法" class="headerlink" title="注释方法"></a>注释方法</h3><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="comment">//注解写在属性上使用的是反射机制</span></span><br><span class="line">	<span class="comment">//注解写在get方法上，是setget机制</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name=<span class="string">"my_gen"</span>, strategy=<span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToOne</span>(cascade=CascadeType.ALL)</span><br><span class="line">    <span class="meta">@PrimaryKeyJoinColumn</span>(name=<span class="string">"id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">getPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Persion.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//姓名</span></span><br><span class="line">    <span class="keyword">private</span> String idNumber;<span class="comment">//身份证号</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name=<span class="string">"my_gen"</span>, strategy = <span class="string">"foreign"</span>, parameters= &#123;<span class="meta">@Parameter</span>(name = <span class="string">"property"</span>, value = <span class="string">"user"</span>)&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIdNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> idNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIdNumber</span><span class="params">(String idNumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.idNumber = idNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@OneToOne</span>(mappedBy=<span class="string">"person"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类同上</p>
<p><strong>关于上述代码解释：</strong></p>
<ol>
<li>xml：<ol>
<li>通过<one-to-one> 元素配置。—–（主键表）<ol>
<li>ascade属性（级联属性）为 all：:对象所有操作进行级联操作  save,update,delete</li>
<li>ascade属性（级联属性）为 save-update :  执行保存和更改操作时进行级联操作</li>
<li>ascade属性（级联属性）为 delete :  执行删除操作时进行级联操作</li>
<li>ascade属性（级联属性）为 none : 对所有操作不进行级联操作       默认</li>
</ol>
</one-to-one></li>
<li>constrained 属性为 true，表明 PERSON 表ID为外键，参照主表USER—–（外键表）</li>
<li>外键表实体类配置文件中 OID 使用 foreign 生成策略。—–（外键表）</li>
</ol>
</li>
<li>注解：<ol>
<li>User端的person属性配置<ol>
<li>@OneToOne(cascade=CascadeType.ALL) ：指定一对一关联关系，并设置级联属性。</li>
<li>@PrimaryKeyJoinColumn(name=”ID”) ：指定Persion表主键列名。</li>
</ol>
</li>
<li>在Person端的id属性上配置主键生成策略为 foreign<br><ol>
<li><code>@GeneratedValue(generator=&quot;foreign&quot;)</code></li>
<li><code>@GenericGenerator(name=&quot;foreign&quot;,strategy=&quot;foreign&quot;,parameters={@Parameter(name=&quot;property&quot;,value=&quot;user&quot;)})</code></li>
</ol>
</li>
<li>在Person一端的user属性上配置一对一关联关系<br><br><code>@OneToOne(mappedBy=&quot;person&quot;)</code></li>
</ol>
</li>
</ol>
<h2 id="一对一的关联映射（唯一外键关联方式）"><a href="#一对一的关联映射（唯一外键关联方式）" class="headerlink" title="一对一的关联映射（唯一外键关联方式）"></a>一对一的关联映射（唯一外键关联方式）</h2><h3 id="xml方式-1"><a href="#xml方式-1" class="headerlink" title="xml方式"></a>xml方式</h3><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;<span class="comment">//主键，外键（外键依赖persion类的id）</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>User.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User"</span> <span class="attr">table</span>=<span class="string">"USER"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span>  /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 外键关联方式映射与Person的一对一关系 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"person"</span> <span class="attr">column</span>=<span class="string">"PERSONID"</span> <span class="attr">cascade</span>=<span class="string">"all"</span> <span class="attr">unique</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Persion.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;<span class="comment">//主键</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String idNumber;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Persion.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Person"</span> <span class="attr">table</span>=<span class="string">"PERSON"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idNumber"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 外键关联方式映射与User的一对一关系   property-ref:外键列对应的属性名 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">property-ref</span>=<span class="string">"person"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>测试类同上</p>
<h3 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h3><p>User.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"USER"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name=<span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToOne</span>(cascade=CascadeType.ALL)</span><br><span class="line">    <span class="meta">@JoinColumn</span>(name=<span class="string">"PERSONID"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">getPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Persion.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"PERSON"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//姓名</span></span><br><span class="line">    <span class="keyword">private</span> String idNumber;<span class="comment">//身份证号</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIdNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> idNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIdNumber</span><span class="params">(String idNumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.idNumber = idNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@OneToOne</span>(mappedBy=<span class="string">"person"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类同上</p>
<p><strong>关于上述代码解释：</strong></p>
<ol>
<li>xml<ol>
<li>通过<many-to-one> 元素配置。—–（外键表）<ol>
<li>column 属性指明外键列；</li>
<li>unique 属性设置为 true，表明唯一约束；</li>
<li>cascade 属性设置为 all，表明删除 USER 时同时删除PERSON</li>
<li><code>&lt;many-to-one name=&quot;person&quot; column=&quot;persionId&quot; cascade=&quot;all&quot; unique=&quot;true&quot;/&gt;</code></li>
</ol>
</many-to-one></li>
<li>通过<one-to-one> 元素配置。—–（主键表）<ol>
<li>property-ref 属性，表明建立了从User到Person的一对一关联关系</li>
<li><code>&lt;one-to-one name=&quot;user&quot; property-ref=&quot;person&quot;/&gt;</code></li>
</ol>
</one-to-one></li>
</ol>
</li>
<li>注解<ol>
<li>在User一端的person属性上配置。<ol>
<li>@OneToOne(cascade=CascadeType.ALL)</li>
<li>@JoinColumn(name=”PERSONID”)：指明USER表中的外键列名。</li>
</ol>
</li>
<li>在Person一端的user属性上配置。<ol>
<li>@OneToOne(mappedBy=”person”)</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="组合关系映射"><a href="#组合关系映射" class="headerlink" title="组合关系映射"></a>组合关系映射</h2><p>问题：</p>
<p>某单位职工档案管理系统的需求中，希望能够保存职工的各种联系方式，包括：家庭地址、工作地址、籍贯地址、<br>手机号、邮箱等，每个地址又需包含省、市、县、详细街道信息，应该如何实现？</p>
<table>
<thead>
<tr>
<th align="left">Contact</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">id : int</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">email : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">phoneNum : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeAddress : Address</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">workAddress : Address</td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Address</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">province : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">city : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">district : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">detail : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">数据库中只有一张contact表，如何添加？</td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Contact</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">id : int</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">email : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">phoneNum : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeProvince : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeCity ： String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeDistrict : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeDetail : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">workProvince : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">…</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="xml方式："><a href="#xml方式：" class="headerlink" title="xml方式："></a>xml方式：</h3><p>Contact.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Contact</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String phoneNum;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Address homeAddress;</span><br><span class="line">    <span class="keyword">private</span> Address workAddress;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Contact.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Contact"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"phoneNum"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"email"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- component映射组合关系 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"homeAddress"</span> <span class="attr">class</span>=<span class="string">"Address"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"province"</span> <span class="attr">column</span>=<span class="string">"HOMEPROVINCE"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"city"</span> <span class="attr">column</span>=<span class="string">"HOMECITY"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"district"</span> <span class="attr">column</span>=<span class="string">"HOMEDISTRICT"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"detail"</span> <span class="attr">column</span>=<span class="string">"HOMEDETAIL"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"workAddress"</span> <span class="attr">class</span>=<span class="string">"Address"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"province"</span> <span class="attr">column</span>=<span class="string">"WORKPROVINCE"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"city"</span> <span class="attr">column</span>=<span class="string">"WORKCITY"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"district"</span> <span class="attr">column</span>=<span class="string">"WORKDISTRICT"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"detail"</span> <span class="attr">column</span>=<span class="string">"WORKDETAIL"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Address.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;<span class="comment">//省</span></span><br><span class="line">    <span class="keyword">private</span> String city;<span class="comment">//市</span></span><br><span class="line">    <span class="keyword">private</span> String district;<span class="comment">//区</span></span><br><span class="line">    <span class="keyword">private</span> String detail;<span class="comment">//详细地址</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Test.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveContact</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Session session = <span class="keyword">null</span>;</span><br><span class="line">       Transaction tran = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           session = HibernateUtil.openSession();</span><br><span class="line">           tran = session.beginTransaction();</span><br><span class="line"></span><br><span class="line">           Contact contact = <span class="keyword">new</span> Contact();</span><br><span class="line">           contact.setPhoneNum(<span class="string">"12345678910"</span>);</span><br><span class="line">           contact.setEmail(<span class="string">"abcxxx@123.com"</span>);</span><br><span class="line">           </span><br><span class="line">           Address homeAddress = <span class="keyword">new</span> Address();</span><br><span class="line">           homeAddress.setProvince(<span class="string">"河北省"</span>);</span><br><span class="line">           homeAddress.setCity(<span class="string">"xx市"</span>);</span><br><span class="line">           homeAddress.setDistrict(<span class="string">"xx区"</span>);</span><br><span class="line">           homeAddress.setDetail(<span class="string">"xx路xx号"</span>);</span><br><span class="line">           </span><br><span class="line">           Address workAddress = <span class="keyword">new</span> Address();</span><br><span class="line">           workAddress.setProvince(<span class="string">"河北省"</span>);</span><br><span class="line">           workAddress.setCity(<span class="string">"xx市"</span>);</span><br><span class="line">           workAddress.setDistrict(<span class="string">"xx区"</span>);</span><br><span class="line">           workAddress.setDetail(<span class="string">"xx路xx号"</span>);</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//建立联系</span></span><br><span class="line">           contact.setHomeAddress(homeAddress);</span><br><span class="line">           contact.setWorkAddress(workAddress);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 保存contact同时保存地址信息</span></span><br><span class="line">           session.save(contact);</span><br><span class="line">           tran.commit();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           tran.rollback();</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;	</span><br><span class="line">           session.close();</span><br><span class="line">           HibernateUtil.closeSessionFactory();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="注解方式-1"><a href="#注解方式-1" class="headerlink" title="注解方式"></a>注解方式</h3><p>Contact.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Contact</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String phoneNum;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Address homeAddress;</span><br><span class="line">    <span class="keyword">private</span> Address workAddress;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)</span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhoneNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phoneNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhoneNum</span><span class="params">(String phoneNum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phoneNum = phoneNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Embedded</span></span><br><span class="line">    <span class="meta">@AttributeOverrides</span>(value=&#123;</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    name = <span class="string">"province"</span>, </span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"HOMEPROVINCE"</span>)),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    name = <span class="string">"city"</span>,</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"HOMECITY"</span>)),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"HOMEDISTRICT"</span>),</span><br><span class="line">                    name = <span class="string">"district"</span>),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"HOMEDETAIL"</span>),</span><br><span class="line">                    name = <span class="string">"detail"</span>)&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Address <span class="title">getHomeAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> homeAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHomeAddress</span><span class="params">(Address homeAddress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.homeAddress = homeAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Embedded</span>  <span class="comment">//注意与嵌入式类注解@Embeddable区分</span></span><br><span class="line">    <span class="meta">@AttributeOverrides</span>(value=&#123;</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    name = <span class="string">"province"</span>, </span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"WORKPROVINCE"</span>)),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    name = <span class="string">"city"</span>,</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"WORKCITY"</span>)),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"WORKDISTRICT"</span>),</span><br><span class="line">                    name = <span class="string">"district"</span>),</span><br><span class="line">            <span class="meta">@AttributeOverride</span>(</span><br><span class="line">                    column = <span class="meta">@Column</span>(name=<span class="string">"WORKDETAIL"</span>),</span><br><span class="line">                    name = <span class="string">"detail"</span>)&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Address <span class="title">getWorkAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> workAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWorkAddress</span><span class="params">(Address workAddress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.workAddress = workAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Address.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Embeddable</span>		<span class="comment">//指明为嵌入式类，不需要单独进行映射</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;<span class="comment">//省</span></span><br><span class="line">    <span class="keyword">private</span> String city;<span class="comment">//市</span></span><br><span class="line">    <span class="keyword">private</span> String district;<span class="comment">//区</span></span><br><span class="line">    <span class="keyword">private</span> String detail;<span class="comment">//详细地址</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类同上</p>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>3.Hibernate继承关系映射</title>
    <url>/2020/02/25/3-Hibernate%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong><font size="5" color="#ff0000">每个具体的类实现继承关系映射</font></strong></p>
<a id="more"></a>

<p><strong><font size="5" color="#ff0000">父类对应一个表的继承关系映射</font></strong></p>
<p><strong><font size="5" color="#ff0000">每个类对应一个表的继承关系映射</font></strong></p>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>2.Hibernate的单实体映射</title>
    <url>/2020/02/25/2-Hibernate%E7%9A%84%E5%8D%95%E5%AE%9E%E4%BD%93%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Hibernate的单实体映射"><a href="#Hibernate的单实体映射" class="headerlink" title="Hibernate的单实体映射"></a>Hibernate的单实体映射</h1><h2 id="单实体的属性映射"><a href="#单实体的属性映射" class="headerlink" title="单实体的属性映射"></a><font size="5" color="#ff0000">单实体的属性映射</font></h2><ol>
<li><p>setter 和 getter 方法优点：有效控制属性的访问权限。<br></p>
</li>
<li><p>property元素的 access 属性；field : 不需要getset方法，通过Java反射机制绕过hibernate直接访问属性值。<br><code>&lt;property name=&quot;userName&quot; access=&quot;field&quot; /&gt;</code></p>
</li>
<li><p>实体映射技巧：实体类属性与表字段不对称时，可以在 setter 和 getter 方法中加入程序逻辑<br><br> 例：User 类中没有 username 属性，而是改为了 firstName 和 lastName 两个属性</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  		<span class="keyword">return</span> firstName + <span class="string">" "</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">  		String[] strName = userName.split(<span class="string">" "</span>);</span><br><span class="line">  		<span class="keyword">this</span>.firstName = strName[<span class="number">0</span>];</span><br><span class="line">  		<span class="keyword">this</span>.lastName = strName[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
</li>
<li><p>特殊需求：<br>例：User 需要订单总额属性，但数据库表中没有这个字段，在property元素的 formula 属性设置查询语句</p>
 <property name="totalPrice" formula="(select sum(o.price) from orders as o where o.userId=id)"></property></li>
<li><p>控制持久化类的insert和update</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="left">映射属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;property&gt;元素的 insert 属性</td>
<td align="left">insert语句中是否包含该属性，默认值为true</td>
</tr>
<tr>
<td align="left">&lt;property&gt;元素的 update 属性</td>
<td align="left">update语句中是否包含该属性，默认值为true</td>
</tr>
<tr>
<td align="left">&lt;class&gt;元素的 mutable 属性</td>
<td align="left">等价于所有property节点的update属性，默认值为true</td>
</tr>
<tr>
<td align="left">&lt;class&gt;元素的 dynamic-insert 属性</td>
<td align="left">值为true等价于所有的property元素dynamic-insert属性为true</td>
</tr>
<tr>
<td align="left">&lt;class&gt;元素的 dynamic-update 属性</td>
<td align="left">值为true等价于所有的property元素dynamic-update属性为true</td>
</tr>
</tbody></table>
<p><em>注：</em><br><br>    1. 会过滤过值为null的属性<br><br>    2. 如果在一个表有很多字段的时候,在做初次insert的时候有比较多的字段为空值,或者经常update某少部分字段,应该在配置文件的<class>元素上将dynamic-insert和dynamic-update设置为true.其默认值都为false.<br><br>    3. dynamic-insert，dynamic-update，提升了数据库的效率，只对需要插入修改的数据进行变动<br></class></p>
<h2 id="单实体的对象标识符映射"><a href="#单实体的对象标识符映射" class="headerlink" title="单实体的对象标识符映射"></a><font size="5" color="#ff0000">单实体的对象标识符映射</font></h2><p>Java程序中区分不同对象：</p>
<ol>
<li>“==” 比较两个变量引用的内存地址是否相同；</li>
<li>equals可以比较两个变量引用的对象的值是否相同。</li>
<li>用户自定义的类也可以覆盖Object的equals方法实现对象按值进行比较</li>
<li>Hibernate 采用对象标识符（OID）区分对象。</li>
</ol>
<p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/session.png" alt></p>
<h2 id="使用注解映射单实体"><a href="#使用注解映射单实体" class="headerlink" title="使用注解映射单实体"></a><font size="5" color="#ff0000">使用注解映射单实体</font></h2><p>User.java类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span>								<span class="comment">//声明一个实体类。</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"USER"</span>)					<span class="comment">//为实体类指定对应的数据库表</span></span><br><span class="line"><span class="meta">@DynamicInsert</span>(<span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@DynamicUpdate</span>(<span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span>                       <span class="comment">//声明实体类的OID属性</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(generator=<span class="string">"my_gen"</span>)		<span class="comment">//声明OID的生成策略</span></span><br><span class="line">    <span class="meta">@GenericGenerator</span>(name = <span class="string">"my_gen"</span>, strategy = <span class="string">"increment"</span>)	<span class="comment">//使用Hibernate提供的生成策略</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="meta">@Column</span>(name=<span class="string">"USERNAME"</span>, insertable=<span class="keyword">true</span>)</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Access</span>(AccessType.FIELD)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@Formula</span>(value = <span class="string">"(select sum(o.price) from orders as o where o.userid=id)"</span>)<span class="comment">//查询语句</span></span><br><span class="line">    <span class="keyword">private</span> Double totalPrice;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">getTotalPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> totalPrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTotalPrice</span><span class="params">(Double totalPrice)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.totalPrice = totalPrice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Column(name=”columnName”) ：将属性映射到列。<br></p>
<ol>
<li>name=”columnName”    字段名称；<br></li>
<li>unique=false            是否在该字段上设置唯一约束；<br></li>
<li>nullable=true            字段是否能为空；<br></li>
<li>insertable=true        控制 insert语句；<br></li>
<li>updatable=true        控制 update语句；<br></li>
<li>length=255            指定字段长度。<br></li>
</ol>
<p>@Access(AccessType.PROPERTY)：<br></p>
<ol>
<li>通过 getter 和 setter 方法访问实体类的属性；<br></li>
<li>需要在 getter 方法上定义字段的属性。<br></li>
</ol>
<p>@Access(AccessType.FIELD)：<br></p>
<ol>
<li>直接访问实体类的属性，可以不定义 getter 和 setter 方法，但是需要将变量定义为public；<br></li>
<li>需要在变量上定义字段的属性。<br></li>
</ol>
<p>@Formula：将属性映射到SQL语句。<br><br><code>@Formula(value = &quot;(select sum(o.price) from     
            orders as o where o.userid=id)&quot;)</code></p>
<p>@DynamicInsert：动态生成 INSERT 语句。<br></p>
<p>@DynamicUpdate：动态生成 UPDATE 语句。<br></p>
<h2 id="使用注解和xml方式的区别："><a href="#使用注解和xml方式的区别：" class="headerlink" title="使用注解和xml方式的区别："></a><font color="#0000FF" size="10">使用注解和xml方式的区别：</font></h2><ol>
<li><p><font color="#0000FF" size="4">hibernate.hbm.xml 文件中把引用：xxx.hbm.xml改为引用实体类：</font>即把：&lt;mapping resource=”com/db/entity/Person.hbm.xml”/&gt;改为：&lt;mapping class=”com.db.entity.Person” /&gt;</p>
</li>
<li><p><font color="#0000FF" size="4">注解方式不需要在xxx.hbm.xml把实体类与表进行映射。而采用在实体类中进行注解。</font></p>
<ol>
<li>实体类属性注解的时候，都注解在<font color="#ff0000">get方法前</font></li>
<li>如果在实体类中某些属性不注解：（属性和get都不写注解），默认为表字段名与实体类属性名一致。</li>
<li>如果实体类的某个成员属性不需要存入数据库中，使用@Transient 进行注解就可以了。即类似于：(xxx.hbm.Xml配置中的某些字段不写(就是不需要对这个成员属性进行映射))</li>
<li>表名称可以在实体类前进行注解。</li>
<li>所有这些注解在：javax.persistence包下。而不是在hibernate包中。</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>1.Hibernate框架的搭建</title>
    <url>/2020/02/25/1-Hibernate%E6%A1%86%E6%9E%B6%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Hibernate框架的搭建"><a href="#Hibernate框架的搭建" class="headerlink" title="Hibernate框架的搭建"></a>Hibernate框架的搭建</h1><a id="more"></a>
<h2 id="三层体系结构"><a href="#三层体系结构" class="headerlink" title="三层体系结构"></a>三层体系结构</h2><p><img src="https://gitee.com/LYmystery/PicGo/raw/master/image/three-layer_architecture.png" alt></p>
<ol>
<li>定义：将系统的组件<strong>分隔到不同的层</strong>中，每一层中的组件应保持内聚性； 每一层都应与它下面的各层保持松散耦合。<br></li>
<li>层与层之间存在自上而下的<strong>依赖关系</strong>，即上层组件会访问下层组件的API，而下层组件不应该依赖上层组件。<br></li>
<li>每个层对上层<strong>公开AP</strong>I，但具体的实现细节对外透明。当某一层的实现发生变化，只要它的API不变，不会影响其他层的实现。</li>
<li>持久层：将数据访问细节和业务逻辑分开（也就是在业务逻辑层和数据库层新添持久层）</li>
<li>持久化：将程序数据在瞬时状态和持久化状态之间转换的机制<ol>
<li>瞬时状态：保存在内存中的数据</li>
<li>持久状态：保存在数据库（磁盘）的程序数据</li>
</ol>
</li>
<li>持久层的作用：为业务逻辑层提供面向对象的API，<strong><em>使业务逻辑层可以专注于实现业务逻辑</em></strong></li>
<li>持久层的目标：<ol>
<li>代码可重用性高，能够完成对象持久化操作；</li>
<li>支持多种数据库平台；</li>
<li>具有相对独立性，当持久层发生变化时，不会影响上层实现。</li>
</ol>
</li>
<li>Hibernate是持久化层框架。</li>
</ol>
<h2 id="软件的模型及ORM"><a href="#软件的模型及ORM" class="headerlink" title="软件的模型及ORM"></a>软件的模型及ORM</h2><p><strong>不同类型的模型：</strong></p>
<p>分析阶段–创建概念模型<br><br>设计阶段–域模型（面向对象）和数据模型（面向关系）——形成<strong>对象关系映射（ORM）</strong></p>
<p>通过ORM模式在操作实体对象的时候，就不需要再去和复杂的 SQL语句打交道，只需简单的操作实体对象的属性和方法</p>
<h2 id="Hibernate介绍"><a href="#Hibernate介绍" class="headerlink" title="Hibernate介绍"></a>Hibernate介绍</h2><ol>
<li>在分层体系结构中Hibernate位于持久化层，是完成对象持久化的持久化层框架；<br></li>
<li>Hibernate是连接Java应用程序和关系型数据库的框架，能够建立对象模型和关系数据模型之间的映射，是一种自动ORM框架；<br></li>
<li>Hibernate是对JDBC API的封装，是JDBC轻量级封装框架。<br></li>
</ol>
<h2 id="第一个Hibernate程序"><a href="#第一个Hibernate程序" class="headerlink" title="第一个Hibernate程序"></a>第一个Hibernate程序</h2><h3 id="1-安装Eclipse、Mysql；"><a href="#1-安装Eclipse、Mysql；" class="headerlink" title="1.安装Eclipse、Mysql；"></a>1.安装Eclipse、Mysql；</h3><h3 id="2-下载Hibernate，并解压缩-获得jar包；"><a href="#2-下载Hibernate，并解压缩-获得jar包；" class="headerlink" title="2.下载Hibernate，并解压缩,获得jar包；"></a>2.下载Hibernate，并解压缩,获得jar包；</h3><h3 id="3-使用Eclipse创建新的项目；"><a href="#3-使用Eclipse创建新的项目；" class="headerlink" title="3.使用Eclipse创建新的项目；"></a>3.使用Eclipse创建新的项目；</h3><h3 id="4-引入Hibernate及其依赖库（jar包）；"><a href="#4-引入Hibernate及其依赖库（jar包）；" class="headerlink" title="4.引入Hibernate及其依赖库（jar包）；"></a>4.引入Hibernate及其依赖库（jar包）；</h3><h3 id="5-引入Mysql数据库驱动包；"><a href="#5-引入Mysql数据库驱动包；" class="headerlink" title="5.引入Mysql数据库驱动包；"></a>5.引入Mysql数据库驱动包；</h3><h3 id="6-编写Hibernate配置文件-hibernate-cfg-xml-；"><a href="#6-编写Hibernate配置文件-hibernate-cfg-xml-；" class="headerlink" title="6.编写Hibernate配置文件(hibernate.cfg.xml)；"></a>6.<font color="#FF0000" size="5">编写Hibernate配置文件(hibernate.cfg.xml)；</font></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/test<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.characterEncoding"</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"com/hibernate/entity/Customer.hbm.xml"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-创建Java持久化类XXX-java；"><a href="#7-创建Java持久化类XXX-java；" class="headerlink" title="7. 创建Java持久化类XXX.java；"></a>7. <font color="#FF0000" size="5">创建Java持久化类XXX.java；</font></h3><p><em>持久化类与数据库之间是一一对应关系</em><br><br><em>Custom.java文件：</em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> sex;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="comment">/*set，get方法*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-编写持久化类的映射配置文件XXX-hbm-xml；"><a href="#8-编写持久化类的映射配置文件XXX-hbm-xml；" class="headerlink" title="8. 编写持久化类的映射配置文件XXX.hbm.xml；"></a>8. <font color="#FF0000" size="5">编写持久化类的映射配置文件XXX.hbm.xml；</font></h3><p>Customer.hbm.xml文件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot;?&gt;</span><br><span class="line">	&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-&#x2F;&#x2F;Hibernate&#x2F;Hibernate Mapping DTD 3.0&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;hibernate.sourceforge.net&#x2F;hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;hibernate-mapping package&#x3D;&quot;com.hibernate.entity&quot;&gt;</span><br><span class="line">		&lt;class name&#x3D;&quot;Customer&quot; table&#x3D;&quot;customer&quot;&gt;</span><br><span class="line">			&lt;id name&#x3D;&quot;id&quot; type&#x3D;&quot;int&quot; column&#x3D;&quot;id&quot;&gt;</span><br><span class="line">				&lt;generator class&#x3D;&quot;native&quot; &#x2F;&gt;</span><br><span class="line">			&lt;&#x2F;id&gt;</span><br><span class="line">		</span><br><span class="line">			&lt;property name&#x3D;&quot;name&quot; not-null&#x3D;&quot;true&quot; type&#x3D;&quot;java.lang.String&quot; column&#x3D;&quot;name&quot; &#x2F;&gt;</span><br><span class="line">			&lt;property name&#x3D;&quot;sex&quot; type&#x3D;&quot;int&quot; column&#x3D;&quot;sex&quot; &#x2F;&gt;</span><br><span class="line">			&lt;property name&#x3D;&quot;age&quot; type&#x3D;&quot;int&quot; column&#x3D;&quot;age&quot; &#x2F;&gt;</span><br><span class="line">		&lt;&#x2F;class&gt;</span><br><span class="line">&lt;&#x2F;hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>

<h4 id="介绍配置文件"><a href="#介绍配置文件" class="headerlink" title="介绍配置文件"></a>介绍配置文件</h4><ol>
<li><p>class元素指定类与表之间的映射</p>
<ol>
<li>name：类名</li>
<li>table：对应的表名</li>
</ol>
</li>
<li><p>id子元素设定持久化类的OID和表的主键的映射关系</p>
<ol>
<li>column：指定表字段的名称</li>
<li>generator：元素指定OID的生成器<ol>
<li>increment：采用 Hibernate 数值递增的方式；（不适合集群情况）</li>
<li>identity：采用数据库提供的自增长方式；（需设置数据库自增字段）</li>
<li>assigned：主键由应用逻辑产生；（自个设置ID）</li>
<li>native：自动选择合适的标识符生成器；</li>
</ol>
</li>
</ol>
</li>
<li><p>property 子元素设定类的其他属性和表的字段的映射关系</p>
<ol>
<li>name：对应类的属性名称；</li>
<li>type：指定属性的类型；</li>
<li>column：指定表字段的名称；</li>
<li>not-null：指定属性是否允许为空。</li>
</ol>
</li>
<li><p><font color="#FF0000" size="5">使用Hibernate API 完成对象的持久化。</font><br></p>
</li>
</ol>
<h4 id="HibernateUtil工具类"><a href="#HibernateUtil工具类" class="headerlink" title="HibernateUtil工具类"></a>HibernateUtil工具类</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class HibernateUtil &#123;</span><br><span class="line">	&#x2F;&#x2F;SessionFactory是线程安全的，多个应用线程间进行共享，一般整个应用有且只有一个SessionFactory</span><br><span class="line">	private static SessionFactory sessionFactory &#x3D; null;</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 静态初始化 Hibernate：创建 StandardServiceRegistry 实例（标准注册服务）</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	static &#123;</span><br><span class="line">		StandardServiceRegistry registry &#x3D; new StandardServiceRegistryBuilder()&#x2F;&#x2F;创建 StandardServiceRegistryBuilder 实例（标准注册服务生成器）</span><br><span class="line">												.configure()&#x2F;&#x2F;从 hibernate.cfg.xml 配置文件中读取配置信息</span><br><span class="line">												.build();&#x2F;&#x2F;构建 StandardServiceRegistry实例（标准注册服务）</span><br><span class="line">		try &#123;</span><br><span class="line">			&#x2F;&#x2F; 2 创建 SessionFactory 实例（会话工厂）</span><br><span class="line">			&#x2F;&#x2F; 2.1 根据标准注册服务创建一个 MetadataSources 实例（元数据资源集）</span><br><span class="line">			&#x2F;&#x2F; 2.2 构建元数据</span><br><span class="line">			&#x2F;&#x2F; 2.3 生成SessionFactory 实例（会话工厂）</span><br><span class="line">			sessionFactory &#x3D; new MetadataSources(registry)</span><br><span class="line">									.buildMetadata().buildSessionFactory();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			&#x2F;&#x2F; 2.4 创建失败手动释放 StandardServiceRegistry</span><br><span class="line">			StandardServiceRegistryBuilder.destroy(registry);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	public static SessionFactory getSessionFactory() &#123;</span><br><span class="line">		return sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">	public static void closeSessionFactory() &#123;</span><br><span class="line">		sessionFactory.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试类test-java"><a href="#测试类test-java" class="headerlink" title="测试类test.java"></a>测试类test.java</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Session session &#x3D; HibernateUtil.getSessionFactory().openSession();&#x2F;&#x2F;打开Session</span><br><span class="line">Transaction tx &#x3D; session.beginTransaction();&#x2F;&#x2F;开始一个事务</span><br><span class="line">Customer customer &#x3D; new Customer();&#x2F;&#x2F;创建需要持久化的对象</span><br><span class="line">customer.setName(&quot;胡宗南&quot;);</span><br><span class="line">customer.setSex(2);</span><br><span class="line">customer.setAge(30);</span><br><span class="line">session.save(customer); &#x2F;&#x2F;保存</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;Customer customer2&#x3D;session.get(Customer.class, new Integer(1));&#x2F;&#x2F;查询</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;customer2.setName(&quot;李四&quot;);&#x2F;&#x2F;修改</span><br><span class="line">	&#x2F;&#x2F;session.update(customer2);</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;session.delete(customer2);&#x2F;&#x2F;删除</span><br><span class="line">	</span><br><span class="line">tx.commit();&#x2F;&#x2F;提交事务</span><br><span class="line">session.close();关闭 Session,SessionFactory</span><br><span class="line">HibernateUtil.closeSessionFactory();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hibernate</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
</search>
