<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    4-Hibernate一对一关联映射 |  神秘的小胖纸
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

<link rel="alternate" href="/atom.xml" title="神秘的小胖纸" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-4-Hibernate一对一关联映射" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  4-Hibernate一对一关联映射
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/26/4-Hibernate%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/" class="article-date">
  <time datetime="2020-02-26T01:03:24.000Z" itemprop="datePublished">2020-02-26</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/hibernate/">hibernate</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">2.3k字</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">12分钟</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="Hibernate一对一关联映射"><a href="#Hibernate一对一关联映射" class="headerlink" title="Hibernate一对一关联映射"></a>Hibernate一对一关联映射</h1><p>实体之间的联系：<br/></p>
<ol>
<li>一对一联系（1:1）</li>
<li>一对多联系（1:n）</li>
<li>多对多联系（m:n）</li>
</ol>
<h2 id="一对一的关联映射（主键关联方式）"><a href="#一对一的关联映射（主键关联方式）" class="headerlink" title="一对一的关联映射（主键关联方式）"></a>一对一的关联映射（主键关联方式）</h2><p><strong>主键关联：</strong>原理是两张表的主键(ID)保持一致，在获取的时候根据两种表中的ID相同来作为关系判断的标准，这样的设计好处在于我们不用添加另外的字段来维护它们之间的关系。 </p>
<h3 id="xml方式"><a href="#xml方式" class="headerlink" title="xml方式"></a>xml方式</h3><a id="more"></a>

<p>实体类<br>User.java</p>
<pre><code>public class User {
    private int id;//主键
    private String userName;
    private String password;
    private Person person;
    ……
}</code></pre><p>Persion.java</p>
<pre><code>public class Person {
    private Integer id;//主键和外键，外键依赖user的主键id
    private String name;
    private String idNumber;
    private User user;
    ……
}</code></pre><p>User.hbm.xml</p>
<pre><code>&lt;class name=&quot;User&quot;&gt;
    &lt;id name=&quot;id&quot; &gt;
        &lt;generator class=&quot;increment&quot;&gt;&lt;/generator&gt;
    &lt;/id&gt;
    &lt;property name=&quot;userName&quot;  /&gt;
    &lt;property name=&quot;password&quot;/&gt;

    &lt;!-- 主键关联方式映射与Person的一对一关系 --&gt;
    &lt;one-to-one name=&quot;person&quot; class=&quot;Person&quot; cascade=&quot;all&quot;/&gt;
&lt;/class&gt;</code></pre><p>Persion.hbm.xml</p>
<pre><code>&lt;class name=&quot;Person&quot;&gt;
    &lt;id name=&quot;id&quot; &gt;
        &lt;generator class=&quot;foreign&quot;&gt;
            &lt;param name=&quot;property&quot;&gt;user&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;

    &lt;!-- 主键关联方式映射与User的一对一关系 --&gt;
    &lt;one-to-one name=&quot;user&quot; constrained=&quot;true&quot; /&gt;
    &lt;property name=&quot;name&quot; /&gt;
    &lt;property name=&quot;idNumber&quot;/&gt;

&lt;/class&gt;</code></pre><p>Test.java</p>
<pre><code>public static void saveUser() {
    Session session = null;
    Transaction tran = null;
    try {
        session = HibernateUtil.openSession();
        tran = session.beginTransaction();// 开启事务

        // 新建User对象
        User user = new User();
        user.setUserName(&quot;张三&quot;);
        user.setPassword(&quot;111111&quot;);

        //新建Person对象
        Person person = new Person();
        person.setName(&quot;张三&quot;);
        person.setIdNumber(&quot;100345199002031234&quot;);

        //建立联系
        user.setPerson(person);
        person.setUser(user);

        // 保存user并级联保存person
        session.save(user);

        tran.commit();// 提交事务

    } catch (Exception e) {
        tran.rollback();// 回滚事务
        e.printStackTrace();
    } finally {
        session.close();// 关闭session
        HibernateUtil.closeSessionFactory();
    }
}</code></pre><h3 id="注释方法"><a href="#注释方法" class="headerlink" title="注释方法"></a>注释方法</h3><p>User.java</p>
<pre><code>@Entity
@Table(name=&quot;user&quot;)
public class User {
    //注解写在属性上使用的是反射机制
    //注解写在get方法上，是setget机制
    private int id;
    private String userName;
    private String password;
    private Person person;

    @Id
    @GeneratedValue(generator=&quot;my_gen&quot;)
    @GenericGenerator(name=&quot;my_gen&quot;, strategy=&quot;increment&quot;)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @OneToOne(cascade=CascadeType.ALL)
    @PrimaryKeyJoinColumn(name=&quot;id&quot;)
    public Person getPerson() {
        return person;
    }

    public void setPerson(Person person) {
        this.person = person;
    }

}</code></pre><p>Persion.java</p>
<pre><code>@Entity
@Table(name=&quot;person&quot;)
public class Person {

    private Integer id;
    private String name;//姓名
    private String idNumber;//身份证号
    private User user;

    @Id
    @GeneratedValue(generator=&quot;my_gen&quot;)
    @GenericGenerator(name=&quot;my_gen&quot;, strategy = &quot;foreign&quot;, parameters= {@Parameter(name = &quot;property&quot;, value = &quot;user&quot;)})
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getIdNumber() {
        return idNumber;
    }
    public void setIdNumber(String idNumber) {
        this.idNumber = idNumber;
    }

    @OneToOne(mappedBy=&quot;person&quot;)
    public User getUser() {
        return user;
    }
    public void setUser(User user) {
        this.user = user;
    }

}</code></pre><p>测试类同上</p>
<p><strong>关于上述代码解释：</strong></p>
<ol>
<li>xml：<ol>
<li>通过<one-to-one> 元素配置。—–（主键表）<ol>
<li>ascade属性（级联属性）为 all：:对象所有操作进行级联操作  save,update,delete</li>
<li>ascade属性（级联属性）为 save-update :  执行保存和更改操作时进行级联操作</li>
<li>ascade属性（级联属性）为 delete :  执行删除操作时进行级联操作</li>
<li>ascade属性（级联属性）为 none : 对所有操作不进行级联操作       默认</li>
</ol>
</li>
<li>constrained 属性为 true，表明 PERSON 表ID为外键，参照主表USER—–（外键表）</li>
<li>外键表实体类配置文件中 OID 使用 foreign 生成策略。—–（外键表）</li>
</ol>
</li>
<li>注解：<ol>
<li>User端的person属性配置<ol>
<li>@OneToOne(cascade=CascadeType.ALL) ：指定一对一关联关系，并设置级联属性。</li>
<li>@PrimaryKeyJoinColumn(name=”ID”) ：指定Persion表主键列名。</li>
</ol>
</li>
<li>在Person端的id属性上配置主键生成策略为 foreign<br><ol>
<li><code>@GeneratedValue(generator=&quot;foreign&quot;)</code></li>
<li><code>@GenericGenerator(name=&quot;foreign&quot;,strategy=&quot;foreign&quot;,parameters={@Parameter(name=&quot;property&quot;,value=&quot;user&quot;)})</code></li>
</ol>
</li>
<li>在Person一端的user属性上配置一对一关联关系<br><br><code>@OneToOne(mappedBy=&quot;person&quot;)</code></li>
</ol>
</li>
</ol>
<h2 id="一对一的关联映射（唯一外键关联方式）"><a href="#一对一的关联映射（唯一外键关联方式）" class="headerlink" title="一对一的关联映射（唯一外键关联方式）"></a>一对一的关联映射（唯一外键关联方式）</h2><h3 id="xml方式-1"><a href="#xml方式-1" class="headerlink" title="xml方式"></a>xml方式</h3><p>User.java</p>
<pre><code>public class User {
    private int id;//主键，外键（外键依赖persion类的id）
    private String userName;
    private String password;
    private Person person;
    ......

}</code></pre><p>User.hbm.xml</p>
<pre><code>&lt;class name=&quot;User&quot; table=&quot;USER&quot;&gt;
    &lt;id name=&quot;id&quot; &gt;
        &lt;generator class=&quot;increment&quot;&gt;&lt;/generator&gt;
    &lt;/id&gt;
    &lt;property name=&quot;userName&quot;  /&gt;
    &lt;property name=&quot;password&quot;/&gt;

    &lt;!-- 外键关联方式映射与Person的一对一关系 --&gt;
    &lt;many-to-one name=&quot;person&quot; column=&quot;PERSONID&quot; cascade=&quot;all&quot; unique=&quot;true&quot;/&gt;
&lt;/class&gt;</code></pre><p>Persion.java</p>
<pre><code>public class Person {
    private Integer id;//主键
    private String name;
    private String idNumber;
    private User user;
    ......
}</code></pre><p>Persion.hbm.xml</p>
<pre><code>&lt;class name=&quot;Person&quot; table=&quot;PERSON&quot;&gt;
    &lt;id name=&quot;id&quot;&gt;
        &lt;generator class=&quot;increment&quot;&gt;&lt;/generator&gt;
    &lt;/id&gt;
    &lt;property name=&quot;name&quot; /&gt;
    &lt;property name=&quot;idNumber&quot; /&gt;

    &lt;!-- 外键关联方式映射与User的一对一关系   property-ref:外键列对应的属性名 --&gt;
    &lt;one-to-one name=&quot;user&quot; property-ref=&quot;person&quot; /&gt;
&lt;/class&gt;</code></pre><p>测试类同上</p>
<h3 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h3><p>User.java</p>
<pre><code>@Entity
@Table(name=&quot;USER&quot;)
public class User {

    private int id;
    private String userName;
    private String password;
    private Person person;

    @Id
    @GeneratedValue(generator=&quot;my_gen&quot;)
    @GenericGenerator(name=&quot;my_gen&quot;, strategy = &quot;increment&quot;)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name=&quot;PERSONID&quot;)
    public Person getPerson() {
        return person;
    }

    public void setPerson(Person person) {
        this.person = person;
    }

}</code></pre><p>Persion.java</p>
<pre><code>@Entity
@Table(name=&quot;PERSON&quot;)
public class Person {

    private Integer id;
    private String name;//姓名
    private String idNumber;//身份证号
    private User user;

    @Id
    @GeneratedValue(generator=&quot;my_gen&quot;)
    @GenericGenerator(name = &quot;my_gen&quot;, strategy = &quot;increment&quot;)
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getIdNumber() {
        return idNumber;
    }
    public void setIdNumber(String idNumber) {
        this.idNumber = idNumber;
    }

    @OneToOne(mappedBy=&quot;person&quot;)
    public User getUser() {
        return user;
    }
    public void setUser(User user) {
        this.user = user;
    }

}</code></pre><p>测试类同上</p>
<p><strong>关于上述代码解释：</strong></p>
<ol>
<li>xml<ol>
<li>通过<many-to-one> 元素配置。—–（外键表）<ol>
<li>column 属性指明外键列；</li>
<li>unique 属性设置为 true，表明唯一约束；</li>
<li>cascade 属性设置为 all，表明删除 USER 时同时删除PERSON</li>
<li><code>&lt;many-to-one name=&quot;person&quot; column=&quot;persionId&quot; cascade=&quot;all&quot; unique=&quot;true&quot;/&gt;</code></li>
</ol>
</li>
<li>通过<one-to-one> 元素配置。—–（主键表）<ol>
<li>property-ref 属性，表明建立了从User到Person的一对一关联关系</li>
<li><code>&lt;one-to-one name=&quot;user&quot; property-ref=&quot;person&quot;/&gt;</code></li>
</ol>
</li>
</ol>
</li>
<li>注解<ol>
<li>在User一端的person属性上配置。<ol>
<li>@OneToOne(cascade=CascadeType.ALL)</li>
<li>@JoinColumn(name=”PERSONID”)：指明USER表中的外键列名。</li>
</ol>
</li>
<li>在Person一端的user属性上配置。<ol>
<li>@OneToOne(mappedBy=”person”)</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="组合关系映射"><a href="#组合关系映射" class="headerlink" title="组合关系映射"></a>组合关系映射</h2><p>问题：</p>
<p>某单位职工档案管理系统的需求中，希望能够保存职工的各种联系方式，包括：家庭地址、工作地址、籍贯地址、<br>手机号、邮箱等，每个地址又需包含省、市、县、详细街道信息，应该如何实现？</p>
<table>
<thead>
<tr>
<th align="left">Contact</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">id : int</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">email : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">phoneNum : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeAddress : Address</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">workAddress : Address</td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Address</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">province : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">city : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">district : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">detail : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">数据库中只有一张contact表，如何添加？</td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Contact</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">id : int</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">email : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">phoneNum : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeProvince : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeCity ： String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeDistrict : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">homeDetail : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">workProvince : String</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">…</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="xml方式："><a href="#xml方式：" class="headerlink" title="xml方式："></a>xml方式：</h3><p>Contact.java</p>
<pre><code>public class Contact {
    private int id;
    private String phoneNum;
    private String email;
    private Address homeAddress;
    private Address workAddress;
    ...
}</code></pre><p>Contact.hbm.xml</p>
<pre><code>&lt;class name=&quot;Contact&quot;&gt;
    &lt;id name=&quot;id&quot;&gt;
        &lt;generator class=&quot;increment&quot; /&gt;
    &lt;/id&gt;
    &lt;property name=&quot;phoneNum&quot; /&gt;
    &lt;property name=&quot;email&quot; /&gt;

    &lt;!-- component映射组合关系 --&gt;
    &lt;component name=&quot;homeAddress&quot; class=&quot;Address&quot;&gt;
        &lt;property name=&quot;province&quot; column=&quot;HOMEPROVINCE&quot; /&gt;
        &lt;property name=&quot;city&quot; column=&quot;HOMECITY&quot; /&gt;
        &lt;property name=&quot;district&quot; column=&quot;HOMEDISTRICT&quot; /&gt;
        &lt;property name=&quot;detail&quot; column=&quot;HOMEDETAIL&quot; /&gt;
    &lt;/component&gt;
    &lt;component name=&quot;workAddress&quot; class=&quot;Address&quot;&gt;
        &lt;property name=&quot;province&quot; column=&quot;WORKPROVINCE&quot; /&gt;
        &lt;property name=&quot;city&quot; column=&quot;WORKCITY&quot; /&gt;
        &lt;property name=&quot;district&quot; column=&quot;WORKDISTRICT&quot; /&gt;
        &lt;property name=&quot;detail&quot; column=&quot;WORKDETAIL&quot; /&gt;
    &lt;/component&gt;

&lt;/class&gt;</code></pre><p>Address.java</p>
<pre><code>public class Address {
    private String province;//省
    private String city;//市
    private String district;//区
    private String detail;//详细地址
    ...
}</code></pre><p>Test.java</p>
<pre><code>public static void saveContact() {
    Session session = null;
    Transaction tran = null;

    try {
        session = HibernateUtil.openSession();
        tran = session.beginTransaction();

        Contact contact = new Contact();
        contact.setPhoneNum(&quot;12345678910&quot;);
        contact.setEmail(&quot;abcxxx@123.com&quot;);

        Address homeAddress = new Address();
        homeAddress.setProvince(&quot;河北省&quot;);
        homeAddress.setCity(&quot;xx市&quot;);
        homeAddress.setDistrict(&quot;xx区&quot;);
        homeAddress.setDetail(&quot;xx路xx号&quot;);

        Address workAddress = new Address();
        workAddress.setProvince(&quot;河北省&quot;);
        workAddress.setCity(&quot;xx市&quot;);
        workAddress.setDistrict(&quot;xx区&quot;);
        workAddress.setDetail(&quot;xx路xx号&quot;);

        //建立联系
        contact.setHomeAddress(homeAddress);
        contact.setWorkAddress(workAddress);

        // 保存contact同时保存地址信息
        session.save(contact);
        tran.commit();
    } catch (Exception e) {
        tran.rollback();
        e.printStackTrace();
    } finally {    
        session.close();
        HibernateUtil.closeSessionFactory();
    }
}</code></pre><h3 id="注解方式-1"><a href="#注解方式-1" class="headerlink" title="注解方式"></a>注解方式</h3><p>Contact.java</p>
<pre><code>@Entity
public class Contact {

    private int id;
    private String phoneNum;
    private String email;
    private Address homeAddress;
    private Address workAddress;

    @Id
    @GeneratedValue(generator=&quot;my_gen&quot;)
    @GenericGenerator(name = &quot;my_gen&quot;, strategy = &quot;increment&quot;)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getPhoneNum() {
        return phoneNum;
    }

    public void setPhoneNum(String phoneNum) {
        this.phoneNum = phoneNum;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @Embedded
    @AttributeOverrides(value={
            @AttributeOverride(
                    name = &quot;province&quot;, 
                    column = @Column(name=&quot;HOMEPROVINCE&quot;)),
            @AttributeOverride(
                    name = &quot;city&quot;,
                    column = @Column(name=&quot;HOMECITY&quot;)),
            @AttributeOverride(
                    column = @Column(name=&quot;HOMEDISTRICT&quot;),
                    name = &quot;district&quot;),
            @AttributeOverride(
                    column = @Column(name=&quot;HOMEDETAIL&quot;),
                    name = &quot;detail&quot;)})
    public Address getHomeAddress() {
        return homeAddress;
    }

    public void setHomeAddress(Address homeAddress) {
        this.homeAddress = homeAddress;
    }

    @Embedded  //注意与嵌入式类注解@Embeddable区分
    @AttributeOverrides(value={
            @AttributeOverride(
                    name = &quot;province&quot;, 
                    column = @Column(name=&quot;WORKPROVINCE&quot;)),
            @AttributeOverride(
                    name = &quot;city&quot;,
                    column = @Column(name=&quot;WORKCITY&quot;)),
            @AttributeOverride(
                    column = @Column(name=&quot;WORKDISTRICT&quot;),
                    name = &quot;district&quot;),
            @AttributeOverride(
                    column = @Column(name=&quot;WORKDETAIL&quot;),
                    name = &quot;detail&quot;)})
    public Address getWorkAddress() {
        return workAddress;
    }

    public void setWorkAddress(Address workAddress) {
        this.workAddress = workAddress;
    }

}</code></pre><p>Address.java</p>
<pre><code>@Embeddable        //指明为嵌入式类，不需要单独进行映射
public class Address {
    private String province;//省
    private String city;//市
    private String district;//区
    private String detail;//详细地址
    ...

}</code></pre><p>测试类同上</p>

      
      <!-- reward -->
      
      <div id="reward-btn">
        打赏
      </div>
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>版权声明： </strong s>
              本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2020/02/26/4-Hibernate%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysterious/" rel="tag">mysterious</a></li></ul>


    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2020/02/26/speed-github/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            加速访问Github
          
        </div>
      </a>
    
    
      <a href="/2020/02/25/3-Hibernate%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">3.Hibernate继承关系映射</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        notify: 'false',
        verify: 'false',
        avatar: 'mp',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        John Doe
      </li>
      <li>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="神秘的小胖纸"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<script src="/js/share.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['面朝大海，春暖花开','愿你一生努力，一生被爱','想要的都拥有，得不到的都释怀'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>